<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">
  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">


<link rel="stylesheet" href="/lib/font-awesome/css/all.min.css">

<script id="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"example.com","root":"/","scheme":"Gemini","version":"7.8.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":false},"copycode":{"enable":false,"show_result":false,"style":null},"back2top":{"enable":true,"sidebar":false,"scrollpercent":false},"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"algolia":{"hits":{"per_page":10},"labels":{"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}},"localsearch":{"enable":false,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}}};
  </script>

  <meta name="description" content="Vue初体验如何使用vue安装和使用vue的javaScript的方式 方式一  ：在页面中通过CDN的方式引入 1&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;vue@next&quot;&gt;&lt;&#x2F;script&gt;  方式二：下载vue的javaScript文件，并且手动引入：直接把https:&#x2F;&#x2F;unpkg.com&#x2F;vue@next复制到浏览器，然后">
<meta property="og:type" content="article">
<meta property="og:title" content="vue">
<meta property="og:url" content="http://example.com/2021/09/27/vue3%E5%AD%A6%E4%B9%A0/index.html">
<meta property="og:site_name" content="webStudy">
<meta property="og:description" content="Vue初体验如何使用vue安装和使用vue的javaScript的方式 方式一  ：在页面中通过CDN的方式引入 1&lt;script src&#x3D;&quot;https:&#x2F;&#x2F;unpkg.com&#x2F;vue@next&quot;&gt;&lt;&#x2F;script&gt;  方式二：下载vue的javaScript文件，并且手动引入：直接把https:&#x2F;&#x2F;unpkg.com&#x2F;vue@next复制到浏览器，然后">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="c:/Users/黄千智/Desktop/vue3学习/image-20210817155933084.png">
<meta property="og:image" content="c:/Users/黄千智/Desktop/vue3学习/image-20210817160001720.png">
<meta property="og:image" content="c:/Users/黄千智/Desktop/vue3学习/image-20210818143223542.png">
<meta property="article:published_time" content="2021-09-27T10:36:29.000Z">
<meta property="article:modified_time" content="2021-11-03T13:48:33.943Z">
<meta property="article:author" content="zhige">
<meta property="article:tag" content="vue">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="c:/Users/黄千智/Desktop/vue3学习/image-20210817155933084.png">

<link rel="canonical" href="http://example.com/2021/09/27/vue3%E5%AD%A6%E4%B9%A0/">


<script id="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>

  <title>vue | webStudy</title>
  






  <noscript>
  <style>
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="container use-motion">
    <div class="headband"></div>

    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
      <span class="toggle-line toggle-line-first"></span>
      <span class="toggle-line toggle-line-middle"></span>
      <span class="toggle-line toggle-line-last"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <h1 class="site-title">webStudy</h1>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>




<nav class="site-nav">
  <ul id="menu" class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签</a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类</a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档</a>

  </li>
  </ul>
</nav>




</div>
    </header>

    
  <div class="back-to-top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>


    <main class="main">
      <div class="main-inner">
        <div class="content-wrap">
          

          <div class="content post posts-expand">
            

    
  
  
  <article itemscope itemtype="http://schema.org/Article" class="post-block" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://example.com/2021/09/27/vue3%E5%AD%A6%E4%B9%A0/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="zhige">
      <meta itemprop="description" content="记录、分享">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="webStudy">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          vue
        </h1>

        <div class="post-meta">
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-calendar"></i>
              </span>
              <span class="post-meta-item-text">发表于</span>

              <time title="创建时间：2021-09-27 18:36:29" itemprop="dateCreated datePublished" datetime="2021-09-27T18:36:29+08:00">2021-09-27</time>
            </span>
              <span class="post-meta-item">
                <span class="post-meta-item-icon">
                  <i class="far fa-calendar-check"></i>
                </span>
                <span class="post-meta-item-text">更新于</span>
                <time title="修改时间：2021-11-03 21:48:33" itemprop="dateModified" datetime="2021-11-03T21:48:33+08:00">2021-11-03</time>
              </span>
            <span class="post-meta-item">
              <span class="post-meta-item-icon">
                <i class="far fa-folder"></i>
              </span>
              <span class="post-meta-item-text">分类于</span>
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
                  <a href="/categories/vue/" itemprop="url" rel="index"><span itemprop="name">vue</span></a>
                </span>
            </span>

          

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">

      
        <h1 id="Vue初体验"><a href="#Vue初体验" class="headerlink" title="Vue初体验"></a>Vue初体验</h1><h2 id="如何使用vue"><a href="#如何使用vue" class="headerlink" title="如何使用vue"></a>如何使用vue</h2><p>安装和使用vue的javaScript的方式</p>
<p>方式一  ：在页面中通过CDN的方式引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;https://unpkg.com/vue@next&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>方式二：下载vue的javaScript文件，并且手动引入：直接把<a target="_blank" rel="noopener" href="https://unpkg.com/vue@next%E5%A4%8D%E5%88%B6%E5%88%B0%E6%B5%8F%E8%A7%88%E5%99%A8%EF%BC%8C%E7%84%B6%E5%90%8E%E5%B0%86%E9%87%8C%E9%9D%A2%E7%9A%84%E4%BB%A3%E7%A0%81%E9%83%BD%E5%A4%8D%E5%88%B6%E5%88%B0%E4%B8%80%E4%B8%AAjs%E6%96%87%E4%BB%B6%E9%87%8C%E9%9D%A2%EF%BC%8C%E7%84%B6%E5%90%8E%E5%BC%95%E5%85%A5%E4%BD%BF%E7%94%A8">https://unpkg.com/vue@next复制到浏览器，然后将里面的代码都复制到一个js文件里面，然后引入使用</a></p>
<p>方式三：通过npm包管理工具安装使用它（webpack再讲）；</p>
<p>方式四：直接通过Vue CLI创建项目，并且使用它；</p>
<h3 id="vue的引入案例（计数器）"><a href="#vue的引入案例（计数器）" class="headerlink" title="vue的引入案例（计数器）"></a>vue的引入案例（计数器）</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">    Vue.createApp(&#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        template: `</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">           <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">             <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">             <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;increment&#x27;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">             <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;decrement&#x27;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">           <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        `,</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        data() &#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            return &#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">                count: 100</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            &#125;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        &#125;,</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        methods: &#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            increment() &#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">                this.count++;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            &#125;,</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            decrement() &#123;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">                this.count--;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">            &#125;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml"></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        &#125;</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">    &#125;).mount(&quot;#app&quot;)</span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="MVVM模型"><a href="#MVVM模型" class="headerlink" title="MVVM模型"></a>MVVM模型</h2><p>MVVM是Model-View-ViewModel的简称，是目前非常流行的架构模式</p>
<p>通常情况下，我们也经常称Vue是一个MVVM的框架</p>
<p>View-&gt;ViewModel-&gt;Model</p>
<p>View（视图）:可以看成DOM或者模板，因为template最终是要被渲染成一个DOM的</p>
<p>ViewModel：View可以引用Model中的东西，是有这一层ViewModel（类似黑盒子）作绑定</p>
<p>Model：类似对象的一部分属性data，methods等是Model</p>
<h2 id="template的写法（计数器案例）"><a href="#template的写法（计数器案例）" class="headerlink" title="template的写法（计数器案例）"></a>template的写法（计数器案例）</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;../js/vue.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">&lt;!-- 有高亮，推荐使用 --&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;increment&#x27;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;decrement&#x27;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line">&lt;!-- </span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;x-template&quot;</span> <span class="attr">id</span>=<span class="string">&#x27;my-app&#x27;</span>&gt;</span><span class="handlebars"><span class="xml"></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">    <span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span></span><span class="template-variable">&#123;&#123;<span class="name">count</span>&#125;&#125;</span><span class="xml"><span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;increment&#x27;</span>&gt;</span>+<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&#x27;decrement&#x27;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span></span></span><br><span class="line"><span class="xml"><span class="handlebars"><span class="xml"></span></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span> --&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(&#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&quot;#my-app&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">count</span>: <span class="number">100</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">increment</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.count++;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">decrement</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.count--;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;).mount(<span class="string">&quot;#app&quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<p>问题：那既然<template></template>可以为啥不能换div呢，加一个div的获取</p>
<p>解决：如果用div的话它会被vue处理一次，处理完一次后，他会把这个模板挂在到div显示一次。但是本身div也会被浏览器处理一次，所以默认的模板内容也会被显示一次</p>
<h2 id="data属性"><a href="#data属性" class="headerlink" title="data属性"></a>data属性</h2><p>data属性是传入一个函数，并且该函数需要返回一个对象</p>
<p>在Vue2.x的时候，也可以传入一个对象（虽然官方推荐是一个函数</p>
<p>在Vue3.x的时候，必须传入一个函数，否则就会直接在浏览器中报错</p>
<p>data中返回的对象会被Vue的响应式系统劫持，之后对该对象的修改或者访问都会在劫持中被处理</p>
<p>所以我们在template中通过  访问counter，可以从对象中获取到数据</p>
<p>所以我们修改counter的值时，template中的 也会发生改变</p>
<h2 id="methods属性"><a href="#methods属性" class="headerlink" title="methods属性"></a>methods属性</h2><p>methods属性是一个对象，通常我们会在这个对象中定义很多的方法</p>
<p>这些方法可以被绑定到 template 模板中</p>
<p>在该方法中，我们可以使用this关键字来直接访问到data中返回的对象的属性</p>
<h2 id="this的指向问题"><a href="#this的指向问题" class="headerlink" title="this的指向问题"></a>this的指向问题</h2><p>一：在一个对象里面的this指向的是这个对象</p>
<p>二：this在全局作用域下指向的是window</p>
<p>三：定义一个函数，用个不同的方式对它进行调用this的指向不同</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 定义一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 1.调用方式一: 直接调用</span></span><br><span class="line">foo(); <span class="comment">// window</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.调用方式二: 将foo放到一个对象中,再调用</span></span><br><span class="line"><span class="keyword">var</span> obj = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;why&quot;</span>,</span><br><span class="line">  <span class="attr">foo</span>: foo</span><br><span class="line">&#125;</span><br><span class="line">obj.foo() <span class="comment">// obj对象</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.调用方式三: 通过call/apply调用</span></span><br><span class="line">foo.call(<span class="string">&quot;abc&quot;</span>); <span class="comment">// String &#123;&quot;abc&quot;&#125;对象</span></span><br></pre></td></tr></table></figure>

<p>四：普通函数调用或者一个函数又调用另一个函数，或者将函数作为参数，传到另一个函数中，由于没有进行任何对象的绑定，只是独立函数的调用，所以this都指向window</p>
<p>五：隐式绑定：通过对象的属性调用函数，那么被会被绑定到对象上</p>
<p>六：显示绑定：JavaScript所有的函数都可以使用call和apply方法，都可以改变this的指向，区别是第一个参数是相同的，后面的参数，apply为数组，call为参数列表</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">foo.call(<span class="built_in">window</span>); <span class="comment">// window</span></span><br><span class="line">foo.call(&#123;<span class="attr">name</span>: <span class="string">&quot;why&quot;</span>&#125;); <span class="comment">// &#123;name: &quot;why&quot;&#125;</span></span><br><span class="line">foo.call(<span class="number">123</span>); <span class="comment">// Number对象,存放时123</span></span><br></pre></td></tr></table></figure>

<h2 id="this的面试题"><a href="#this的面试题" class="headerlink" title="this的面试题"></a>this的面试题</h2><p>面试题一：</p>
<ul>
<li>```javascript<br>var name = “window”;<br>var person = {<br>  name: “person”,<br>  sayName: function () {<pre><code>console.log(this.name);
</code></pre>
  }<br>};<br>function sayName() {<br>  var sss = person.sayName;<br>  sss();<br>  person.sayName();<br>  (person.sayName)();<br>  (b = person.sayName)();<br>}<br>sayName();function sayName() {<br>  var sss = person.sayName;<br>  // 独立函数调用，没有和任何对象关联<br>  sss(); // window<br>  // 关联<br>  person.sayName(); // person<br>  (person.sayName)(); // person<br>  (b = person.sayName)(); // window<br>}<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">var name = &#x27;window&#x27;</span><br><span class="line">var person1 = &#123;</span><br><span class="line">  name: &#x27;person1&#x27;,</span><br><span class="line">  foo1: function () &#123;</span><br><span class="line">    console.log(this.name)</span><br><span class="line">  &#125;,</span><br><span class="line">  foo2: () =&gt; console.log(this.name),</span><br><span class="line">  foo3: function () &#123;</span><br><span class="line">    return function () &#123;</span><br><span class="line">      console.log(this.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  foo4: function () &#123;</span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      console.log(this.name)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">var person2 = &#123; name: &#x27;person2&#x27; &#125;</span><br><span class="line"></span><br><span class="line">person1.foo1(); </span><br><span class="line">person1.foo1.call(person2); </span><br><span class="line"></span><br><span class="line">person1.foo2();</span><br><span class="line">person1.foo2.call(person2);</span><br><span class="line"></span><br><span class="line">person1.foo3()();</span><br><span class="line">person1.foo3.call(person2)();</span><br><span class="line">person1.foo3().call(person2);</span><br><span class="line"></span><br><span class="line">person1.foo4()();</span><br><span class="line">person1.foo4.call(person2)();</span><br><span class="line">person1.foo4().call(person2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// 隐式绑定，肯定是person1</span><br><span class="line">person1.foo1(); // person1</span><br><span class="line">// 隐式绑定和显示绑定的结合，显示绑定生效，所以是person2</span><br><span class="line">person1.foo1.call(person2); // person2</span><br><span class="line"></span><br><span class="line">// foo2()是一个箭头函数，不适用所有的规则</span><br><span class="line">person1.foo2() // window</span><br><span class="line">// foo2依然是箭头函数，不适用于显示绑定的规则</span><br><span class="line">person1.foo2.call(person2) // window</span><br><span class="line"></span><br><span class="line">// 获取到foo3，但是调用位置是全局作用于下，所以是默认绑定window</span><br><span class="line">person1.foo3()() // window</span><br><span class="line">// foo3显示绑定到person2中</span><br><span class="line">// 但是拿到的返回函数依然是在全局下调用，所以依然是window</span><br><span class="line">person1.foo3.call(person2)() // window</span><br><span class="line">// 拿到foo3返回的函数，通过显示绑定到person2中，所以是person2</span><br><span class="line">person1.foo3().call(person2) // person2</span><br><span class="line"></span><br><span class="line">// foo4()的函数返回的是一个箭头函数</span><br><span class="line">// 箭头函数的执行找上层作用域，是person1</span><br><span class="line">person1.foo4()() // person1</span><br><span class="line">// foo4()显示绑定到person2中，并且返回一个箭头函数</span><br><span class="line">// 箭头函数找上层作用域，是person2</span><br><span class="line">person1.foo4.call(person2)() // person2</span><br><span class="line">// foo4返回的是箭头函数，箭头函数只看上层作用域</span><br><span class="line">person1.foo4().call(person2) // person1</span><br></pre></td></tr></table></figure></li>
</ul>
<ul>
<li><p>面试题三</p>
</li>
<li><p>```javascript<br>var name = ‘window’<br>function Person (name) {<br>  this.name = name<br>  this.foo1 = function () {</p>
<pre><code>console.log(this.name)
</code></pre>
<p>  },<br>  this.foo2 = () =&gt; console.log(this.name),<br>  this.foo3 = function () {</p>
<pre><code>return function () &#123;
  console.log(this.name)
&#125;
</code></pre>
<p>  },<br>  this.foo4 = function () {</p>
<pre><code>return () =&gt; &#123;
  console.log(this.name)
&#125;
</code></pre>
<p>  }<br>}<br>var person1 = new Person(‘person1’)<br>var person2 = new Person(‘person2’)</p>
<p>person1.foo1()<br>person1.foo1.call(person2)</p>
<p>person1.foo2()<br>person1.foo2.call(person2)</p>
<p>person1.foo3()()<br>person1.foo3.call(person2)()<br>person1.foo3().call(person2)</p>
<p>person1.foo4()()<br>person1.foo4.call(person2)()<br>person1.foo4().call(person2)</p>
<p>// 隐式绑定<br>person1.foo1() // peron1<br>// 显示绑定优先级大于隐式绑定<br>person1.foo1.call(person2) // person2</p>
<p>// foo是一个箭头函数，会找上层作用域中的this，那么就是person1<br>person1.foo2() // person1<br>// foo是一个箭头函数，使用call调用不会影响this的绑定，和上面一样向上层查找<br>person1.foo2.call(person2) // person1</p>
<p>// 调用位置是全局直接调用，所以依然是window（默认绑定）<br>person1.foo3()() // window<br>// 最终还是拿到了foo3返回的函数，在全局直接调用（默认绑定）<br>person1.foo3.call(person2)() // window<br>// 拿到foo3返回的函数后，通过call绑定到person2中进行了调用<br>person1.foo3().call(person2) // person2</p>
<p>// foo4返回了箭头函数，和自身绑定没有关系，上层找到person1<br>person1.foo4()() // person1<br>// foo4调用时绑定了person2，返回的函数是箭头函数，调用时，找到了上层绑定的person2<br>person1.foo4.call(person2)() // person2<br>// foo4调用返回的箭头函数，和call调用没有关系，找到上层的person1<br>person1.foo4().call(person2) // person1</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">面试题四：</span><br><span class="line"></span><br><span class="line">```javascript</span><br><span class="line">var name = &#x27;window&#x27;</span><br><span class="line">function Person (name) &#123;</span><br><span class="line">  this.name = name</span><br><span class="line">  this.obj = &#123;</span><br><span class="line">    name: &#x27;obj&#x27;,</span><br><span class="line">    foo1: function () &#123;</span><br><span class="line">      return function () &#123;</span><br><span class="line">        console.log(this.name)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    foo2: function () &#123;</span><br><span class="line">      return () =&gt; &#123;</span><br><span class="line">        console.log(this.name)</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">var person1 = new Person(&#x27;person1&#x27;)</span><br><span class="line">var person2 = new Person(&#x27;person2&#x27;)</span><br><span class="line"></span><br><span class="line">person1.obj.foo1()()</span><br><span class="line">person1.obj.foo1.call(person2)()</span><br><span class="line">person1.obj.foo1().call(person2)</span><br><span class="line"></span><br><span class="line">person1.obj.foo2()()</span><br><span class="line">person1.obj.foo2.call(person2)()</span><br><span class="line">person1.obj.foo2().call(person2)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">// obj.foo1()返回一个函数</span><br><span class="line">// 这个函数在全局作用于下直接执行（默认绑定）</span><br><span class="line">person1.obj.foo1()() // window</span><br><span class="line"></span><br><span class="line">// 最终还是拿到一个返回的函数（虽然多了一步call的绑定）</span><br><span class="line">// 这个函数在全局作用于下直接执行（默认绑定）</span><br><span class="line">person1.obj.foo1.call(person2)() // window</span><br><span class="line">person1.obj.foo1().call(person2) // person2</span><br><span class="line"></span><br><span class="line">// 拿到foo2()的返回值，是一个箭头函数</span><br><span class="line">// 箭头函数在执行时找上层作用域下的this，就是obj</span><br><span class="line">person1.obj.foo2()() // obj</span><br><span class="line"></span><br><span class="line">// foo2()的返回值，依然是箭头函数，但是在执行foo2时绑定了person2</span><br><span class="line">// 箭头函数在执行时找上层作用域下的this，找到的是person2</span><br><span class="line">person1.obj.foo2.call(person2)() // person2</span><br><span class="line"></span><br><span class="line">// foo2()的返回值，依然是箭头函数</span><br><span class="line">// 箭头函数通过call调用是不会绑定this，所以找上层作用域下的this是obj</span><br><span class="line">person1.obj.foo2().call(person2) // obj</span><br></pre></td></tr></table></figure></li>
</ul>
<h2 id="vscode生成代码片段"><a href="#vscode生成代码片段" class="headerlink" title="vscode生成代码片段"></a>vscode生成代码片段</h2><p>点击右上角文件-&gt;首选项-&gt;用户片段-&gt;点击html模板</p>
<p>通过这个链接把需要的代码格式转换然后复制到html.json中<a target="_blank" rel="noopener" href="https://snippet-generator.app/">https://snippet-generator.app/</a></p>
<h1 id="基础语法"><a href="#基础语法" class="headerlink" title="基础语法"></a>基础语法</h1><h2 id="mustache语法"><a href="#mustache语法" class="headerlink" title="mustache语法"></a>mustache语法</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 可以是一个表达式 --&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;counter * 100&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 会通过空格切割成一个数组[ &quot;Hello&quot;, &quot;World!&quot; ] --&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message.split(&quot; &quot;)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 对数组进行翻转 [ &quot;World!&quot;, &quot;Hello&quot; ]--&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message.split(&quot; &quot;).reverse()&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 把数组中的所有元素放入一个字符串 World Hello join括号中不加&quot; &quot;默认用逗号分隔--&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message.split(&quot; &quot;).reverse().join(&quot; &quot;)&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 用函数的方法 --&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;getReverseMessage()&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 三元运算符 --&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;isshow ? &quot;哈哈哈&quot; : &quot;nnonono&quot;&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- 错误用法 赋值语句不可以 --&gt;</span></span></span><br><span class="line"><span class="xml">       <span class="comment">&lt;!-- &lt;h2&gt;&#123;&#123;var name =&quot;abc&quot;&#125;&#125;&lt;/h2&gt; --&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">       <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span>转换<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">   <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">   <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">       <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">           <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">           <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">               <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                   <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                   <span class="attr">counter</span>: <span class="number">100</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                   <span class="attr">isshow</span>: <span class="literal">true</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">               &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">           &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">           <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">               <span class="function"><span class="title">getReverseMessage</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                   <span class="keyword">return</span> <span class="built_in">this</span>.message.split(<span class="string">&quot; &quot;</span>).reverse().join(<span class="string">&quot; &quot;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">               &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">               <span class="function"><span class="title">toggle</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                   <span class="built_in">this</span>.isshow = !<span class="built_in">this</span>.isshow</span></span></span><br><span class="line"><span class="javascript"><span class="xml">               &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">           &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">       Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">   </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="v-once指令"><a href="#v-once指令" class="headerlink" title="v-once指令"></a>v-once指令</h2><p>v-once用于指定元素或者组件只渲染一次</p>
<p>当数据发生变化时，元素或者组件以及其所有的子元素将视为静态内容并且跳过</p>
<p>该指令可以用于性能优化</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-once</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;count&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;increment&quot;</span>&gt;</span>-<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">count</span>: <span class="number">10</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">increment</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.count--</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="v-html"><a href="#v-html" class="headerlink" title="v-html"></a>v-html</h2><p>默认情况下，如果我们展示的内容本身是 html 的，那么vue并不会对其进行特殊的解析。 如果我们希望这个内容被Vue可以解析出来，那么可以使用 v-html 来展示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">v-html</span>=<span class="string">&quot;message&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&#x27;&lt;span style=&quot;color:red;background:blue&quot;&gt;哈哈哈哈哈，嘻嘻嘻嘻&lt;/span&gt;&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>





<h2 id="v-pre"><a href="#v-pre" class="headerlink" title="v-pre"></a>v-pre</h2><p>v-pre用于跳过元素和它的子元素的编译过程，显示原始的Mustache标签,跳过不需要编译的节点，加快编译的速度</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-pre</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="v-bind"><a href="#v-bind" class="headerlink" title="v-bind"></a>v-bind</h2><h3 id="绑定style对象与数组写法"><a href="#绑定style对象与数组写法" class="headerlink" title="绑定style对象与数组写法"></a>绑定style对象与数组写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!--css写法驼峰式或者用- --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 对象写法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;&#123;color:&#x27;red&#x27;,backgroundColor:&#x27;blue&#x27;&#125;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;stylee&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 数组写法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:style</span>=<span class="string">&quot;[styleObj1,styleObj2]&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">stylee</span>: &#123; <span class="attr">color</span>: <span class="string">&#x27;orange&#x27;</span> &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">styleObj1</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">color</span>: <span class="string">&#x27;white&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">fontSize</span>: <span class="number">10</span> + <span class="string">&#x27;px&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">styleObj2</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">backgroundColor</span>: <span class="string">&#x27;black&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="绑定class对象与数组写法"><a href="#绑定class对象与数组写法" class="headerlink" title="绑定class对象与数组写法"></a>绑定class对象与数组写法</h3><p>数组里面的类名需要加引号例如里面的a，不然它会去寻找变量，但是对象写法中可以不用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 对象写法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;&#123;a:isActive,b:isActive&#125;&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 将对象放到一个单独的属性中 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;ba&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 数组写法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- a与b要加引号不然默认到里面找变量，就不对了 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;a&#x27;,title]&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;a&#x27;,title,isActive?&#x27;active&#x27;:&#x27;&#x27;]&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 数组里面允许嵌套对象语法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">:class</span>=<span class="string">&quot;[&#x27;a&#x27;,title,&#123;active:isActive&#125;]&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">isActive</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">ba</span>: &#123; <span class="attr">b</span>: <span class="literal">true</span> &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">title</span>: <span class="string">&#x27;b&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="v-bind动态绑定属性和一个对象"><a href="#v-bind动态绑定属性和一个对象" class="headerlink" title="v-bind动态绑定属性和一个对象"></a>v-bind动态绑定属性和一个对象</h3><p>info对象会被拆解成div的各个属性</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-bind</span>=<span class="string">&quot;info&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">info</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">name</span>: <span class="string">&#x27;xyy&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">age</span>: <span class="number">18</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                    <span class="attr">height</span>: <span class="number">1.88</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="v-on绑定事件"><a href="#v-on绑定事件" class="headerlink" title="v-on绑定事件"></a>v-on绑定事件</h2><p>Vue中监听事件用v-on指令，和用户进行各种各样的交互</p>
<h3 id="监听事件写法"><a href="#监听事件写法" class="headerlink" title="监听事件写法"></a>监听事件写法</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- v-on完整写法 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick&quot;</span>&gt;</span>按钮1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 绑定一个表达式 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> <span class="attr">v-on:click</span>=<span class="string">&quot;count++&quot;</span>&gt;</span>&#123;&#123;count&#125;&#125;按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 绑定一个对象 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;aa&quot;</span> <span class="attr">v-on</span>=<span class="string">&quot;&#123;click:btnclick,mousemove:mouseMove&#125;&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;按钮被点击了&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">mouseMove</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;经过啦&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="v-on参数传递"><a href="#v-on参数传递" class="headerlink" title="v-on参数传递"></a>v-on参数传递</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick(count)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 默认传入event对象,可以在方法中获取 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick1&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- $event可以获取到事件发生时事件对象 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick2($event,&#x27;aiyy&#x27;,18)&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">count</span>: <span class="number">0</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick</span>(<span class="params">counts</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(counts);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick1</span>(<span class="params">event</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(event);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick2</span>(<span class="params">event, name, age</span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(event, name, age);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="v-on的修饰符"><a href="#v-on的修饰符" class="headerlink" title="v-on的修饰符"></a>v-on的修饰符</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- @click.stop可以阻止事件冒泡 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">div</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick1&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click.stop</span>=<span class="string">&quot;btnclick2&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 没加.enter所有按键被按下都会触发事件，但是加了之后，按回车才会触发  --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> @<span class="attr">keyup.enter</span>=<span class="string">&quot;enterKeyup&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick1</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;div被点击了&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick2</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;button被点击了&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;, <span class="function"><span class="title">enterKeyup</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">console</span>.log(<span class="string">&#x27;按键被抬起&#x27;</span>);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h2 id="条件渲染的基本使用"><a href="#条件渲染的基本使用" class="headerlink" title="条件渲染的基本使用"></a>条件渲染的基本使用</h2><p>v-if的渲染原理：v-if是惰性的；</p>
<p>当条件为false时，其判断的内容完全不会被渲染或者会被销毁掉</p>
<p>当条件为true时，才会真正渲染条件块中的内容</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;toggle&quot;</span>&gt;</span>按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;isshow&quot;</span>&gt;</span>&#123;&#123;message&#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="comment">&lt;!-- 多个条件渲染 --&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;score&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-if</span>=<span class="string">&quot;score&gt;90&quot;</span>&gt;</span>优秀<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else-if</span>=<span class="string">&quot;score&gt;80&quot;</span>&gt;</span>良好<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span> <span class="attr">v-else</span>=<span class="string">&quot;score&gt;70&quot;</span>&gt;</span>及格<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">message</span>: <span class="string">&quot;Hello World&quot;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">isshow</span>: <span class="literal">true</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">score</span>: <span class="number">71</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">toggle</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.isshow = !<span class="built_in">this</span>.isshow</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="template与v-if一起使用"><a href="#template与v-if一起使用" class="headerlink" title="template与v-if一起使用"></a>template与v-if一起使用</h3><p>如果我们想把多个元素通过一个v-if一起来做一个判断的时候要用一个div，但是这相当于多创建了一个元素，此时用template会更好</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;!-- 如果用div的话，条件成立，会被渲染，用template就不会了 --&gt;</span><br><span class="line">    &lt;template v-if=&quot;isShow&quot;&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">    &lt;template v-else&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">        &lt;h2&gt;哈哈哈哈&lt;/h2&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h3 id="v-if与v-show的区别"><a href="#v-if与v-show的区别" class="headerlink" title="v-if与v-show的区别"></a>v-if与v-show的区别</h3><p> v-show是不支持template； </p>
<p>v-show不可以和v-else一起使用；</p>
<p>v-show元素无论是否需要显示到浏览器上，它的DOM实际都是有渲染的，只是通过CSS的display属性来进行切换</p>
<p>v-if当条件为false时，其对应的元素压根不会被渲染到DOM中；</p>
<p>开发中如何进行选择呢？</p>
<p>如果我们的元素需要在显示和隐藏之间频繁的切换，那么使用v-show； </p>
<p>如果不会频繁的发生切换，那么使用v-if；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;h2 v-if=false&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2 v-show=false&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h2 id="列表渲染-v-for"><a href="#列表渲染-v-for" class="headerlink" title="列表渲染(v-for)"></a>列表渲染(v-for)</h2><p>参数列表不同</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="comment">&lt;!-- 遍历数组 --&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="comment">&lt;!-- in换of也可以 --&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(item,index) in moives&quot;</span>&gt;</span>&#123;&#123;index +&#x27;,&#x27;+ item&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="comment">&lt;!-- 遍历对象 --&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;(value,key,index) in info&quot;</span>&gt;</span>&#123;&#123;index + &#x27;-&#x27; + key + &#x27;:&#x27; + value&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="comment">&lt;!-- 遍历数字 --&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">         <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;num in 10&quot;</span>&gt;</span>&#123;&#123;num&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">     <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml"> <span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"> <span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">     <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">         <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">         <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">             <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                 <span class="attr">moives</span>: [<span class="string">&#x27;大话西游&#x27;</span>, <span class="string">&#x27;功夫足球&#x27;</span>, <span class="string">&#x27;功夫&#x27;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                 <span class="attr">info</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     <span class="attr">name</span>: <span class="string">&#x27;aiyy&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                     <span class="attr">age</span>: <span class="number">18</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">                 &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">             &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">         &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">     Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"> </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>

<h3 id="v-for和template"><a href="#v-for和template" class="headerlink" title="v-for和template"></a>v-for和template</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;ul&gt;</span><br><span class="line">        &lt;!-- ul中不推荐使用div</span><br><span class="line">        &lt;div v-for=&quot;(value,key) in info&quot;&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123;key&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;hr&gt;</span><br><span class="line">        &lt;/div&gt; --&gt;</span><br><span class="line"></span><br><span class="line">        &lt;template v-for=&quot;(value,key) in info&quot;&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123;key&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li&gt;&#123;&#123;value&#125;&#125;&lt;/li&gt;</span><br><span class="line">            &lt;li class=&quot;divider&quot;&gt;&lt;/li&gt;</span><br><span class="line">        &lt;/template&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                info: &#123;</span><br><span class="line">                    name: &#x27;aiyy&#x27;,</span><br><span class="line">                    age: 18,</span><br><span class="line">                    height: 1.88</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="数组的更新检测"><a href="#数组的更新检测" class="headerlink" title="数组的更新检测"></a>数组的更新检测</h3><p>Vue 将被侦听的数组的变更方法进行了包裹，所以它们也将会触发视图更新。这些被包裹过的方法包括： </p>
<p>push()、pop()、shift()、unshift()、splice()、sort()、reverse()</p>
<p>替换数组的方法</p>
<p>上面的方法会直接修改原来的数组，但是某些方法不会替换原来的数组，而是会生成新的数组，比如 filter()、concat() 和 slice()</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">span</span>&gt;</span>电影列表<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;items in moives&quot;</span>&gt;</span>&#123;&#123;items&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">&quot;vedio&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;vedio&quot;</span> <span class="attr">v-model</span>=<span class="string">&quot;newValue&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">label</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;btnclick&quot;</span>&gt;</span>添加<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"><span class="xml"></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">moives</span>: [<span class="string">&#x27;大话西游&#x27;</span>, <span class="string">&#x27;功夫足球&#x27;</span>, <span class="string">&#x27;功夫&#x27;</span>],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">newValue</span>: <span class="string">&#x27; &#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">btnclick</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.moives.push(<span class="built_in">this</span>.newValue)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.newValue = <span class="string">&quot; &quot;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h3 id="VNode的概念"><a href="#VNode的概念" class="headerlink" title="VNode的概念"></a>VNode的概念</h3><p>VNode的全称是Virtual Node，也就是虚拟节点</p>
<p>事实上，无论是组件还是元素，它们最后表现出来的都是一个个VNode，VNode本质上就是个javaScript对象，在Vue中，模板里对应的元素就被转换成一个个VNode，然后再通过一些操作转换成显示到浏览器的真实DOM，VNode最大的好处就是可以做多平台的渲染，做跨平台的东西</p>
<h3 id="虚拟DOM-先不考虑组件"><a href="#虚拟DOM-先不考虑组件" class="headerlink" title="虚拟DOM(先不考虑组件)"></a>虚拟DOM(先不考虑组件)</h3><p>如果我们不只是一个简单的div，而是有一大堆的元素，那么它们应该会形成一个VNode Tree:先有template生成一大堆的VNode形成的一颗树，这颗树就是虚拟DOM，虚拟DOM再进行真实的渲染到浏览器上面形成我们看到真实的DOM（多个VNode形成的树结构）</p>
<h3 id="key案例插入F元素"><a href="#key案例插入F元素" class="headerlink" title="key案例插入F元素"></a>key案例插入F元素</h3><p>有无key的对比：</p>
<p>假设这个案例，在b后面插入f，旧-&gt;新</p>
<p>当没有key的时候：a-&gt;a b-&gt;b c-&gt;f d-&gt;c  最后新增d</p>
<p>有key时：a-&gt;a b-&gt;b 新增f c-&gt;c d-&gt;d</p>
<p>由此可以发现当有key的时候效率变高了。这涉及到的算法时diff算法，加入key更高效，key值是唯一的，有id用id值作为key值</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;app&quot;</span>&gt;&lt;/div&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">template</span> <span class="attr">id</span>=<span class="string">&quot;my-app&quot;</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">        <span class="tag">&lt;<span class="name">li</span> <span class="attr">v-for</span>=<span class="string">&quot;items in letters&quot;</span> <span class="attr">:key</span>=<span class="string">&quot;items&quot;</span>&gt;</span>&#123;&#123;items&#125;&#125;<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;insertF&quot;</span>&gt;</span>插入F元素<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">template</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;../js/vue.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> App = &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">template</span>: <span class="string">&#x27;#my-app&#x27;</span>,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="keyword">return</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="attr">letters</span>: [<span class="string">&#x27;a&#x27;</span>, <span class="string">&#x27;b&#x27;</span>, <span class="string">&#x27;c&#x27;</span>, <span class="string">&#x27;d&#x27;</span>]</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        <span class="attr">methods</span>: &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            <span class="function"><span class="title">insertF</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">                <span class="built_in">this</span>.letters.splice(<span class="number">2</span>, <span class="number">0</span>, <span class="string">&#x27;f&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">            &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">        &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    Vue.createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h1 id="Vue3的options-API"><a href="#Vue3的options-API" class="headerlink" title="Vue3的options-API"></a>Vue3的options-API</h1><h2 id="计算属性computed"><a href="#计算属性computed" class="headerlink" title="计算属性computed"></a>计算属性computed</h2><p>在某些情况，我们可能需要对<strong>数据进行一些转化后</strong>再显示，或者需要<strong>将多个数据结合起来</strong>进行显示到视图上，这时，可能就会想到把逻辑抽取到methods的options中，这时就会有弊端，所有的data使用过程就会变成一个方法的调用，此时使用computed计算属性，这个属性是有缓存的，减少功耗，对任何响应式数据的复杂逻辑，都应该使用计算属性</p>
<p>计算属性将被混入到组件实例中。所有 getter 和 setter 的 <em><strong>this</strong></em> 上下文自动地绑定为组件实例</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;toggle&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;getFullName&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;getResult&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                firstName: &quot;Kobe&quot;,</span><br><span class="line">                lastName: &quot;Bryant&quot;,</span><br><span class="line">                score: 91,</span><br><span class="line">                message: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            toggle() &#123;</span><br><span class="line">                return this.message.split(&quot; &quot;).reverse().join(&quot; &quot;)</span><br><span class="line">            &#125;,</span><br><span class="line">            getFullName() &#123;</span><br><span class="line">                return this.firstName + &quot; &quot; + this.lastName</span><br><span class="line">            &#125;,</span><br><span class="line">            getResult() &#123;</span><br><span class="line">                return this.score &gt; 90 ? &quot;良好&quot; : &quot;一般&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="methods与computed的区别"><a href="#methods与computed的区别" class="headerlink" title="methods与computed的区别"></a>methods与computed的区别</h3><p>计算属性是有缓存的，当我们多次使用计算属性时，计算属性的运算只会执行一次，当data发生改变时，界面会重新渲染，计算属性会随着依赖的数据（firstName）的改变，而重新计算</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;getReverse()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;Reverse&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;getReverse()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;Reverse&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;getReverse()&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;Reverse&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            getReverse() &#123;</span><br><span class="line">                console.log(&quot;调用了methods的翻转函数&quot;)</span><br><span class="line">                return this.message.split(&quot; &quot;).reverse().join(&quot; &quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            Reverse() &#123;</span><br><span class="line">                console.log(&quot;调用了computed的翻转函数&quot;);</span><br><span class="line">                return this.message.split(&quot; &quot;).reverse().join(&quot; &quot;)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="计算属性的setter和getter"><a href="#计算属性的setter和getter" class="headerlink" title="计算属性的setter和getter"></a>计算属性的setter和getter</h3><p>计算属性在大多数情况下，只需要一个<strong>getter方法</strong>即可，所以我们会将计算属性直接<strong>写成一个函数</strong>。 但是，如果我们确实想<strong>设置计算属性的值</strong>呢？</p>
<p>这个时候我们也可以给计算属性设置一个setter的方法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;Reverse&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;changeReverse&quot;&gt;修改Reverse&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        computed: &#123;</span><br><span class="line">            //fullName的getter方法</span><br><span class="line">            // Reverse: function () &#123;</span><br><span class="line">            //     return this.message.split(&quot; &quot;).reverse().join(&quot; &quot;)</span><br><span class="line">            // &#125;</span><br><span class="line">            //完整写法 Reverse的getter和setter方法</span><br><span class="line">            Reverse: &#123;</span><br><span class="line">                get: function () &#123;</span><br><span class="line">                    return this.message.split(&quot; &quot;).reverse().join(&quot; &quot;)</span><br><span class="line">                &#125;,</span><br><span class="line">                set: function (newValue) &#123;</span><br><span class="line">                    console.log(newValue);</span><br><span class="line">                    this.message = newValue</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            changeReverse() &#123;</span><br><span class="line">                //此时getter方法会被调用</span><br><span class="line">                this.Reverse = &quot;ai yy&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="侦听器watch"><a href="#侦听器watch" class="headerlink" title="侦听器watch"></a>侦听器watch</h2><p>开发中我们在data返回的对象中定义了数据，这个数据通过插值语法等方式绑定到template中</p>
<p>当数据变化时，template会自动进行更新来显示最新的数据</p>
<p>但是在某些情况下，我们希望在代码逻辑中监听某个数据的变化，这个时候就需要用侦听器watch来完成了</p>
<h3 id="侦听器的基本使用"><a href="#侦听器的基本使用" class="headerlink" title="侦听器的基本使用"></a>侦听器的基本使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;question&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;question&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                question: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            queryAnswer() &#123;</span><br><span class="line">                console.log(`你的问题$&#123;this.question&#125;的答案是啊哈哈哈`);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            //newValue变化后的新值 oldValue变化前的旧值</span><br><span class="line">            //question是侦听data中属性的名称</span><br><span class="line">            question(newValue, oldValue) &#123;</span><br><span class="line">                console.log(&quot;新值:&quot; + newValue + &quot;旧值:&quot; + oldValue)</span><br><span class="line">                this.queryAnswer()</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="computed和watch有什么区别"><a href="#computed和watch有什么区别" class="headerlink" title="computed和watch有什么区别"></a>computed和watch有什么区别</h3><p>computed是对数据发生转换后，显示到视图上，用computed</p>
<p>watch是数据发生变化，我们要处理一些逻辑比说入网络请求的时候，这时候使用侦听器</p>
<h3 id="侦听器watch的配置选项"><a href="#侦听器watch的配置选项" class="headerlink" title="侦听器watch的配置选项"></a>侦听器watch的配置选项</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;changeInfo&quot;&gt;改变Info&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeInfoName&quot;&gt;改变info.name&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeNba&quot;&gt;深度监听&lt;/button&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;info.name&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                info: &#123;</span><br><span class="line">                    name: &#x27;kobe&#x27;,</span><br><span class="line">                    age: 18,</span><br><span class="line">                    nba: &#123;</span><br><span class="line">                        name: &#x27;yaoming&#x27;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        watch: &#123;</span><br><span class="line">            //默认情况下，我们侦听器只会针对监听的数据本身的改变</span><br><span class="line">            //像这个例子，当this.info.name改变时，不会打印新旧info，代表没侦听到(对内部发生的改变时不能侦听的)</span><br><span class="line">            // info(newInfo, oldInfo) &#123;</span><br><span class="line">            //     console.log(&quot;newInfo:&quot;, newInfo, &quot;oldInfo:&quot;, oldInfo);</span><br><span class="line">            // &#125;</span><br><span class="line"></span><br><span class="line">            // 深度侦听</span><br><span class="line">            info: &#123;</span><br><span class="line">                handler: function (newInfo, oldInfo) &#123;</span><br><span class="line">                    console.log(&quot;newInfo:&quot;, newInfo, &quot;oldInfo:&quot;, oldInfo);</span><br><span class="line">                &#125;,</span><br><span class="line">                deep: true,</span><br><span class="line">                immediate: true//刷新后立即执行一次</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            changeInfo() &#123;</span><br><span class="line">                this.info = &#123; name: &#x27;aiyy&#x27; &#125;</span><br><span class="line">            &#125;,</span><br><span class="line">            changeInfoName() &#123;</span><br><span class="line">                this.info.name = &quot;why&quot;//浅拷贝</span><br><span class="line">            &#125;,</span><br><span class="line">            changeNba() &#123;</span><br><span class="line">                this.info.nba.name = &quot;xiaozhi&quot;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="侦听器的其他方式"><a href="#侦听器的其他方式" class="headerlink" title="侦听器的其他方式"></a>侦听器的其他方式</h3><p>用”info.name”也可以进行侦听，同时，它在侦听第二个按钮时，可以拿到旧值，就说拷贝了一份旧的对象</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">watch: &#123;</span><br><span class="line">    <span class="string">&quot;info.name&quot;</span>: &#123;</span><br><span class="line">        <span class="attr">handler</span>: <span class="function"><span class="keyword">function</span> (<span class="params">newInfo, oldInfo</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="string">&quot;newInfo:&quot;</span>, newInfo, <span class="string">&quot;oldInfo:&quot;</span>, oldInfo);</span><br><span class="line">        &#125;,</span><br><span class="line">        <span class="attr">deep</span>: <span class="literal">true</span>,</span><br><span class="line">        <span class="attr">immediate</span>: <span class="literal">true</span><span class="comment">//刷新后立即执行一次</span></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="对象的引用-浅拷贝-深拷贝"><a href="#对象的引用-浅拷贝-深拷贝" class="headerlink" title="对象的引用-浅拷贝-深拷贝"></a>对象的引用-浅拷贝-深拷贝</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js&quot;</span>&gt;&lt;/script&gt;</span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//对象是引用类型</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//对象的引用赋值</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const info = &#123; name: &#x27;age&#x27;, age: &#x27;10&#x27; &#125;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const obj = info</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// info.name = &#x27;aiyy&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// console.log(obj.name)</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//浅拷贝，在内存开辟了新空间， info和obj里面保存的地址不一样</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const info = &#123; name: &#x27;aiyy&#x27;, age: 18, friend: &#123; name: &#x27;yy&#x27;, height: 1.85 &#125; &#125;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const obj = Object.assign(&#123;&#125;, info)</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// info.name = &#x27;kobe&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// console.log(obj.name);</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// info.friend.name = &#x27;qq&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// console.log(obj.friend.name);//这里就会改变</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//深拷贝</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const info = &#123; name: &#x27;aiyy&#x27;, age: 18, friend: &#123; name: &#x27;yy&#x27;, height: 1.85 &#125; &#125;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// //JSON.stringify可以把对象转换成字符串 JSON.parse可以将它还原，还原时会生成一个新对象，与原来对象没有任何关系</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// const obj = JSON.parse(JSON.stringify(info))</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// info.friend.name = &#x27;kobe&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">// console.log(obj.friend.name);//不会改变了</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//借助lodash实现深拷贝、浅拷贝</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//lodash是一个第三方的库，里面提供了很多方法</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> info = &#123; <span class="attr">name</span>: <span class="string">&#x27;aiyy&#x27;</span>, <span class="attr">age</span>: <span class="number">18</span>, <span class="attr">friend</span>: &#123; <span class="attr">name</span>: <span class="string">&#x27;yy&#x27;</span>, <span class="attr">height</span>: <span class="number">1.85</span> &#125; &#125;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">const</span> obj = _.clone(info)</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    info.name = <span class="string">&#x27;kobe&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(obj.name);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    info.friend.name = <span class="string">&#x27;jame&#x27;</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="built_in">console</span>.log(obj.friend.name);</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="comment">//深拷贝用_.cloneDeep(info)</span></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br></pre></td></tr></table></figure>



<h2 id="v-model"><a href="#v-model" class="headerlink" title="v-model"></a>v-model</h2><h3 id="v-model原理"><a href="#v-model原理" class="headerlink" title="v-model原理"></a>v-model原理</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; :value=&quot;message&quot; @input=&quot;inputChange&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            inputChange(event) &#123;</span><br><span class="line">                this.message = event.target.value</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="v-model绑定其他表单"><a href="#v-model绑定其他表单" class="headerlink" title="v-model绑定其他表单"></a>v-model绑定其他表单</h3><p>在的案例中大部分的值都是在template中固定好的： </p>
<p>比如gender的两个输入框值male、female； </p>
<p>比如hobbies的三个输入框值basketball、football、tennis； </p>
<p>在真实开发中，我们的数据可能是来自服务器的，那么我们就可以先将值请求下来，绑定到data返回的对象中，再通过v-bind来进行值的绑定，这个过程就是<strong>值绑定</strong>。 </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;!-- 1.textarea --&gt;</span><br><span class="line">    &lt;label for=&quot;message&quot;&gt;</span><br><span class="line">        &lt;textarea name=&quot;message&quot; id=&quot;message&quot; cols=&quot;30&quot; rows=&quot;10&quot; v-model=&quot;message&quot;&gt;&lt;/textarea&gt;</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;h2&gt;message:&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2.checkbox --&gt;</span><br><span class="line">    &lt;label for=&quot;agree&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;agree&quot; type=&quot;checkbox&quot; v-model=&quot;isAgree&quot;&gt;同意协议</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;h2&gt;isAgree:&#123;&#123;isAgree&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 3.多选框 --&gt;</span><br><span class="line">    &lt;label for=&quot;basketball&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;basketball&quot; type=&quot;checkbox&quot; v-model=&quot;hobbies&quot; value=&quot;basketball&quot;&gt;篮球</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label for=&quot;football&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;football&quot; type=&quot;checkbox&quot; v-model=&quot;hobbies&quot; value=&quot;football&quot;&gt;足球</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label for=&quot;tennis&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;tennis&quot; type=&quot;checkbox&quot; v-model=&quot;hobbies&quot; value=&quot;tennis&quot;&gt;网球</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;h2&gt;hobbies:&#123;&#123;hobbies&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 4.radio --&gt;</span><br><span class="line">    &lt;label for=&quot;male&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;male&quot; type=&quot;radio&quot; v-model=&quot;gender&quot; value=&quot;male&quot;&gt;男</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;label for=&quot;female&quot;&gt;</span><br><span class="line">        &lt;input id=&quot;female&quot; type=&quot;radio&quot; v-model=&quot;gender&quot; value=&quot;female&quot;&gt;女</span><br><span class="line">    &lt;/label&gt;</span><br><span class="line">    &lt;h2&gt;gender:&#123;&#123;gender&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 5.select --&gt;</span><br><span class="line">    &lt;select v-model=&quot;fruit&quot; multiple size=&quot;2&quot;&gt;</span><br><span class="line">        &lt;option value=&quot;apple&quot;&gt;苹果&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;strawberry &quot;&gt;草莓&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;durian &quot;&gt;榴莲&lt;/option&gt;</span><br><span class="line">        &lt;option value=&quot;banana&quot;&gt;香蕉&lt;/option&gt;</span><br><span class="line">    &lt;/select&gt;</span><br><span class="line">    &lt;h2&gt;fruit:&#123;&#123;fruit&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;,</span><br><span class="line">                isAgree: true,</span><br><span class="line">                hobbies: [],</span><br><span class="line">                gender: &quot;&quot;,</span><br><span class="line">                fruit: &quot;&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>





<h3 id="v-model修饰符的使用"><a href="#v-model修饰符的使用" class="headerlink" title="v-model修饰符的使用"></a>v-model修饰符的使用</h3><h4 id="lazy修饰符"><a href="#lazy修饰符" class="headerlink" title="lazy修饰符"></a>lazy修饰符</h4><p>默认情况下，v-model在进行双向绑定时，绑定的是input事件，那么会在每次内容输入后就将最新的值和绑定的属性进行同步；</p>
<p>如果我们在v-model后跟上lazy修饰符，那么会将绑定的事件切换为 change 事件，只有在提交时（比如回车）才会触发</p>
<h3 id="number修饰符"><a href="#number修饰符" class="headerlink" title="number修饰符"></a>number修饰符</h3><p>v-model绑定后的值双向绑定赋值后，都会是string类型</p>
<p>另外，在我们进行逻辑判断时，如果是一个string类型，在可以转化的情况下会进行隐式转换的</p>
<h3 id="trim修饰符"><a href="#trim修饰符" class="headerlink" title="trim修饰符"></a>trim修饰符</h3><p>如果要自动过滤用户输入的首尾空白字符,可以给v-model添加 trim 修饰符</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;!-- 1.lazy修饰符 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model.lazy=&quot;message&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2.number修饰符 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model.number=&quot;num&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;num&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;showType&quot;&gt;查看类型&lt;/button&gt;</span><br><span class="line">    &lt;br&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    &lt;!-- 3.trim修饰符 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model.trim=&quot;message&quot;&gt;</span><br><span class="line">    &lt;button @click=&quot;showResult&quot;&gt;查看结果&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;,</span><br><span class="line">                num: 100</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            showType() &#123;</span><br><span class="line">                console.log(this.num, typeof this.num);</span><br><span class="line">            &#125;,</span><br><span class="line">            showResult() &#123;</span><br><span class="line">                console.log(this.message);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    Vue.createApp(App).mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h1 id="组件化开发-了解"><a href="#组件化开发-了解" class="headerlink" title="组件化开发(了解)"></a>组件化开发(了解)</h1><h2 id="组件化思想"><a href="#组件化思想" class="headerlink" title="组件化思想"></a>组件化思想</h2><p>如果我们将一个页面中所有的处理逻辑全部放在一起，处理起来就会变得非常复杂，而且不利于后续的管理以及扩展； 但如果，我们讲一个页面拆分成一个个小的功能块，每个功能块完成属于自己这部分独立的功能，那么之后整个页面 的管理和维护就变得非常容易了； 如果我们将一个个功能块拆分后，就可以像搭建积木一下来搭建我们的项目</p>
<h2 id="注册组件的方式"><a href="#注册组件的方式" class="headerlink" title="注册组件的方式"></a>注册组件的方式</h2><h3 id="全局注册"><a href="#全局注册" class="headerlink" title="全局注册"></a>全局注册</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;component-a&gt;&lt;/component-a&gt;</span><br><span class="line">    &lt;component-b&gt;&lt;/component-b&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template id=&quot;component-a&quot;&gt;</span><br><span class="line">    &lt;h2&gt;我是component-a组件&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template id=&quot;component-b&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;btnclick&quot;&gt;按钮&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const app = Vue.createApp(App)</span><br><span class="line">    // app.component(组件的名称，组件对象)</span><br><span class="line">    app.component(&quot;component-a&quot;, &#123;</span><br><span class="line">        template: &quot;#component-a&quot;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.component(&quot;component-b&quot;, &#123;</span><br><span class="line">        template: &quot;#component-b&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;hello&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        methods: &#123;</span><br><span class="line">            btnclick() &#123;</span><br><span class="line">                console.log(&quot;hahah&quot;);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;)</span><br><span class="line"></span><br><span class="line">    app.mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="局部注册"><a href="#局部注册" class="headerlink" title="局部注册"></a>局部注册</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;app&quot;&gt;&lt;/div&gt;</span><br><span class="line">&lt;template id=&quot;my-app&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;message&#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;!-- 不要用驼峰 --&gt;</span><br><span class="line">    &lt;component-a&gt;&lt;/component-a&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template id=&quot;component-a&quot;&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123;messages&#125;&#125;&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script src=&quot;../js/vue.js&quot;&gt;&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">    const componentA = &#123;</span><br><span class="line">        template: &quot;#component-a&quot;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                messages: &#x27;hello&#x27;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    const App = &#123;</span><br><span class="line">        template: &#x27;#my-app&#x27;,</span><br><span class="line">        data() &#123;</span><br><span class="line">            return &#123;</span><br><span class="line">                message: &quot;Hello World&quot;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;,</span><br><span class="line">        components: &#123;</span><br><span class="line">            //key:组件名称 value:组件对象</span><br><span class="line">            componentA: componentA</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    const app = Vue.createApp(App)</span><br><span class="line">    app.mount(&#x27;#app&#x27;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h1 id="webpack"><a href="#webpack" class="headerlink" title="webpack"></a>webpack</h1><h2 id="webpack是什么"><a href="#webpack是什么" class="headerlink" title="webpack是什么"></a>webpack是什么</h2><p><strong>webpack是一个静态的模块化打包工具，为现代的JavaScript应用程序</strong></p>
<p>打包bundler：webpack可以将帮助我们进行打包，所以它是一个打包工具</p>
<p>静态的static：这样表述的原因是我们最终可以将代码打包成最终的静态资源（部署到静态服务器），到时候用户就可以通过服务器去访问对应的静态资源；</p>
<p>模块化module：webpack默认支持各种模块化开发，ES Module、CommonJS、AMD等，在开发时，很多时候我们会将一个js文件当成一个模块直接去使用，那么这个时候我们就需要让当前这个环境支持模块化，不支持编写模块化就会报错，webpack支持各种模块化</p>
<p>现代的modern：我们前端说过，正是因为现代前端开发面临各种各样的问题，才催生了webpack的出现和发展；</p>
<h2 id="vue加载文件有哪些"><a href="#vue加载文件有哪些" class="headerlink" title="vue加载文件有哪些"></a>vue加载文件有哪些</h2><p><strong>JavaScript的打包：</strong>将ES6转换成ES5的语法；TypeScript的处理，将其转换成JavaScript</p>
<p><strong>Css的处理：</strong>CSS文件模块的加载、提取；Less、Sass等预处理器的处理</p>
<p><strong>资源文件img、font：</strong> 图片img文件的加载；字体font文件的加载；</p>
<p><strong>HTML资源的处理：</strong>打包HTML资源文件</p>
<p><strong>处理vue项目的SFC文件.vue文件</strong></p>
<h2 id="webpack使用前提"><a href="#webpack使用前提" class="headerlink" title="webpack使用前提"></a>webpack使用前提</h2><p>webpack的官方文档是<a target="_blank" rel="noopener" href="https://webpack.js.org/">https://webpack.js.org/</a></p>
<p>webpack的中文官方文档是<a target="_blank" rel="noopener" href="https://webpack.docschina.org/">https://webpack.docschina.org/</a></p>
<p>DOCUMENTATION：文档详情，也是我们最关注的</p>
<p>Webpack的运行是依赖Node环境的，所以我们电脑上必须有Node环境 </p>
<p>所以需要先安装Node.js，并且同时会安装npm(包管理工具)</p>
<p>我当前电脑上的node版本是v12.18.1，npm版本是6.14.5（你也可以使用nvm或者n来管理Node版本）；</p>
<p>Node官方网站：<a target="_blank" rel="noopener" href="https://nodejs.org/">https://nodejs.org/</a></p>
<h2 id="webpack的安装"><a href="#webpack的安装" class="headerlink" title="webpack的安装"></a>webpack的安装</h2><p>npm install webpack webpack-cli –g     # 全局安装</p>
<p>npm install webpack webpack-cli –D     # 局部安装</p>
<h3 id="全局webpck"><a href="#全局webpck" class="headerlink" title="全局webpck"></a>全局webpck</h3><p>进入编辑器，编写了format.js和mathjs导出，分别用了CommonJS和ES Module写法，在index.js中进行导入,在index.html中进行脚本导入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./src/index.js&quot;</span> <span class="attr">type</span>=<span class="string">&quot;module&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>发现依旧报错，不能在浏览器上跑，打开编辑器终端，进入相应的文件，因为刚刚在cmd中进行了全局安装，所以此时webpack –version是可以找出版本的，然后输入webpack，打包生成生成dist文件，dist文件下还有一个main.js文件，在index.html中引入</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">&quot;./dist/main.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>发现浏览器不会报错了，并且正确显示，上述用webpack进行打包用的是全局的webpack，但是用全局的webpack会有问题，比如每次项目用的全局webpck打包，这样修改了全局的webpack，项目进行打包时会有兼容性的问题，所以在真实开发中用的大部分是安装局部webpack</p>
<h3 id="局部webpack安装"><a href="#局部webpack安装" class="headerlink" title="局部webpack安装"></a>局部webpack安装</h3><p>webpack属性一个包，package，之后还有一些css，less文件都是一些包，项目中会依赖很多包，在项目中会有一个package.json这个文件，在里面管理这些包</p>
<p>创建这个文件在终端中输入npm init,当文件夹没有中文时，也可以通过npm -y创建</p>
<p> 局部安装时分两类，一类是开发阶段使用到的，还有一类是生产阶段的，当在终端输入 npm install webpack webpack-cli直接回车的话默认是生产阶段，要开发阶段使用话 加-D,  npm install webpack webpack-cli -D</p>
<p>安装好后会多两个文件，package.json，还有一个是package-lock.json(记录了真正安装的版本号，并且在下次安装会去缓存里找的文件)，还有一个是刚刚安装webpack的包node_modules，这时，当安装好后，在终端敲webpack依旧是全局的，所以要在局部的话，要在node_modules的bin下的webpack里的命令，一种方法是./node_modules/.bin/webpack但是这种方式很麻烦，所以还有一种用npx webpack也可以打包，在package.json下的script中添加bulid属性，值为webpack默认就会使用webpack命令，这时在终端输入npm run bulid就可以打包了</p>
<h3 id="webpack配置文件"><a href="#webpack配置文件" class="headerlink" title="webpack配置文件"></a>webpack配置文件</h3><p>当执行npm run build命令时，但是在打包的时候没有指定webpack入口，就是没有指定从哪个文件打包，它会默认去当前所在目录的src中对index.js进行打包，所以假设目录中没有index.js这个文件，叫main.js，这时打包就会报错，这时给它指定一个入口的方式是 npx webpack –entry ./src/main.js –output-path ./build,但是如果要执行npm run build，在package.json的脚本中就得在webpack后面加–entry ./src/main.js –output-path ./build，这么写当前的命令就会很长，所有的配置信息不能都写到这后面，所以真实开发中，会在当前文件夹下建立一个文件webpack.config.js这个文件叫法一般是固定的，在这个配置文件中进行配置</p>
<p>webpack.config.js这个文件名字如果要改的话，要在package.json中修改脚本中build，webpack –config xxx.config.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 这里必须用过mudule.exports导出，因为webpack是在node环境下运行的，读取也是node环境，所以写配置信息也是用CommonJS写法</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.js&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&#x27;./bulid&#x27;</span>),    <span class="comment">//绝对路径，完整的写法太长了，所以一般用拼接，用node模块</span></span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h2 id="webpack依赖图"><a href="#webpack依赖图" class="headerlink" title="webpack依赖图"></a>webpack依赖图</h2><p>webpack到底是如何对我们的项目进行打包的呢？</p>
<p>事实上webpack在处理应用程序时，它会根据命令或者配置文件找到入口文件</p>
<p>从入口开始，会生成一个 依赖关系图，这个依赖关系图会包含应用程序中所需的所有模块（比如.js文件、css文件、图片、字体等）</p>
<p>然后遍历图结构，打包一个个模块（根据文件的不同使用不同的loader来解析）</p>
<p>它会在入口看一下依赖了哪些文件，有依赖的话，就以为这个文件的代码会被打包</p>
<h2 id="loader的配置方式"><a href="#loader的配置方式" class="headerlink" title="loader的配置方式"></a>loader的配置方式</h2><p>配置方式表示的意思是在我们的webpack.config.js文件中写明配置信息：</p>
<p>module.rules中允许我们配置多个loader（因为我们也会继续使用其他的loader，来完成其他文件的加载）；这种方式可以更好的表示loader的配置，也方便后期的维护，同时也让你对各个Loader有一个全局的概览；</p>
<p><strong>module.rules的配置如下：</strong></p>
<p>rules属性对应的值是一个数组：**[Rule]**，表示规则，要配置多个规则，因为加载css需要规则，加载ts，less也需要规则</p>
<p>数组中存放的是一个个的Rule，Rule是一个对象，对象中可以设置多个属性：</p>
<p>test属性：用于对 resource（资源）进行匹配的，通常会设置成正则表达式；</p>
<p>use属性：对应的值时一个数组：**[UseEntry]** </p>
<p>UseEntry是一个对象，可以通过对象的属性来设置一些其他属性</p>
<p>loader：必须有一个 loader属性，对应的值是一个字符串；</p>
<p>options：可选的属性，值是一个字符串或者对象，值会被传入到loader中；</p>
<p>query：目前已经使用options来替代；</p>
<p><strong>传递字符串（如：use: [ ‘style-loader’ ]）是 loader 属性的简写方式（如：use: [ { loader: ‘style-loader’} ]）；</strong></p>
<p>loader属性： Rule.use: [ { loader } ] 的简写</p>
<h2 id="webpack对css的打包"><a href="#webpack对css的打包" class="headerlink" title="webpack对css的打包"></a>webpack对css的打包</h2><h3 id="css-loader"><a href="#css-loader" class="headerlink" title="css-loader"></a>css-loader</h3><p>给style.css加了依赖后，执行npm run build后报错Module parse failed，webpack把css当成了一个模块，意思是现在有css这个模块，但是模块在解析的时候失败了，处理方法：需要一个合适的loader，webpack默认对js可以打包，但是不认识.css，所以需要各种loader</p>
<p>loader 可以用于对模块的源代码进行转换； 我们可以将css文件也看成是一个模块，我们是通过import来加载这个模块的；在加载这个模块时，webpack其实并不知道如何对其进行加载，我们必须制定对应的loader来完成这个功能； 那么我们需要一个什么样的loader呢？对于加载css文件来说，我们需要一个可以读取css文件的loader； 这个loader最常用的是css-loader</p>
<p>css-loader的安装：npm install css-loader -D 加载的过程是开发使用</p>
<p>安装成功了但是没告诉webpack是加载css要用这个loader，所以得配置加载css时使用这个loader</p>
<p>css-loader使用方法</p>
<p><strong>内联方式：</strong>内联方式使用较少，因为不方便管理； 在引入的样式前加上使用的loader，并且使用!分割；</p>
<p>import “css.loader!../css/style.css”</p>
<p> <strong>CLI方式</strong></p>
<p>在webpack5的文档中已经没有了–module-bind ,实际应用中也比较少使用，因为不方便管理</p>
<p><strong>配置方式</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">  <span class="comment">// loader: &quot;css-loader&quot;//第一种写法,语法糖</span></span><br><span class="line">  <span class="comment">// 2.完整写法</span></span><br><span class="line">  use: [</span><br><span class="line">    <span class="string">&quot;css-loader&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="style-loader"><a href="#style-loader" class="headerlink" title="style-loader"></a>style-loader</h3><p>配置了css-loader加载.css文件没问题了，但是样式在浏览器上依然是不生效的</p>
<p>因为css-loader只是负责将.css文件进行解析，并不会将解析之后的css插入到页面中如果我们希望再完成插入style的操作，那么我们还需要另外一个loader，就是style-loader</p>
<p>安装style-loader：npm install style-loader -D</p>
<p>配置style-loader</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.css$/</span>,</span><br><span class="line">  <span class="comment">// loader: &quot;css-loader&quot;//第一种写法,语法糖</span></span><br><span class="line">  <span class="comment">// 2.完整写法</span></span><br><span class="line">  use: [</span><br><span class="line">    &#123; <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>因为loader的执行顺序是从右向左(或者说从下到上，或者说从后到前的）所以我们需要将style,loader写到css-loader的前面</p>
<h2 id="webpak对less文件的打包"><a href="#webpak对less文件的打包" class="headerlink" title="webpak对less文件的打包"></a>webpak对less文件的打包</h2><p>像less和sass这些在处理的时候都是需要一个工具的，less的文件浏览器是不认识的，所以应该转换为最普通的css，那么怎么转呢，是需要一个工具的，叫less compiler，npm install less -D，在项目中安装这个工具，安装成功后在node_modules下面.bin下就有lessc这个工具了,通过命令</p>
<p>npx lessc ./test.less demo.css，会生成demo.css，所以用过这个命令可以将.less生成.css文件，命令行可以直接使用，但是在项目中会有许多个.less文件，所以一个个写是不现实的，webpack可以将.less加到依赖图来处理，那么处理需要对应的loader，</p>
<p>less-loader其实就是lessc这个工具来处理的，所以安装less-loader就可以处理.less这个文件了(必须安装lessc)</p>
<p>配置webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.less$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123; <span class="attr">loader</span>: <span class="string">&quot;style-loader&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">loader</span>: <span class="string">&quot;css-loader&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">loader</span>: <span class="string">&quot;less-loader&quot;</span> &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这里需要三个loader，因为当转为css后还需要css-loader加载css文件，再通过style-loader解析</p>
<h2 id="postcss工具"><a href="#postcss工具" class="headerlink" title="postcss工具"></a>postcss工具</h2><p>什么是PostCSS呢？</p>
<p>PostCSS是一个通过JavaScript来转换样式的工具,这个工具可以帮助我们进行一些CSS的转换和适配，比如自动添加<strong>浏览器前缀、css样式的重置</strong>； </p>
<p>但是实现这些功能，我们需要借助于PostCSS对应的插件；</p>
<p>如何使用PostCSS呢？主要就是两个步骤： </p>
<p>第一步：查找PostCSS在构建工具中的扩展，比如webpack中的postcss-loader；</p>
<p>第二步：选择可以添加你需要的PostCSS相关的插件</p>
<p>postcss-loader依赖一个工具叫postcss，而这个工具起作用时又依赖里面可以安装的插件(plugins)</p>
<p>命令行可以使用postcss</p>
<p>安装postcss，postcss-cli</p>
<p>npm install postcss postcss-cli -D</p>
<p>但是安装后，这工具是需要借助插件才会生效，所以得安装插件才能生效</p>
<p>因为我们需要添加前缀，所以要安装autoprefixer，直接使用使用postcss工具，并且制定使用autoprefixer</p>
<p>npm install autoprefixer -D</p>
<p>npx postcss –use autoprefixer -o end.css ./src/css/style.css</p>
<p>通过安装postcss-loader，可以在webpack里面使用postcss</p>
<p>配置文件webpack.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">   <span class="attr">loader</span>: <span class="string">&quot;postcss-loader&quot;</span>,</span><br><span class="line">   <span class="attr">options</span>: &#123;<span class="comment">//给loader配置一些额外的选项</span></span><br><span class="line">     <span class="attr">postcssOptions</span>: &#123;</span><br><span class="line">       <span class="attr">plugins</span>: [</span><br><span class="line">         <span class="built_in">require</span>(<span class="string">&quot;autoprefixer&quot;</span>)</span><br><span class="line">       ]</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure>



<p>也可以将postcss的配置抽取到一个postcss.config.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="built_in">require</span>(<span class="string">&quot;autoprefixer&quot;</span>)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>首先会在webpack.config.js中读取有没有postcss-loader的配置信息，如果没有就会在当前项目根目录找postcss.config.js这个文件，然后看有没有导出对象，如果有导出那么就当做配置信息</p>
<p>事实上，在配置postcss-loader时，我们配置插件并不需要使用autoprefixer。 </p>
<p>我们可以使用另外一个插件：postcss-preset-env </p>
<p>ppostcss-preset-env也是一个postcss的插件；</p>
<p>它可以帮助我们将一些现代的CSS特性，转成大多数浏览器认识的CSS，并且会根据目标浏览器或者运行时环境 添加所需的polyfill； </p>
<p>也包括会自动帮助我们添加autoprefixer（所以相当于已经内置了autoprefixer）；</p>
<p>首先，我们需要安装postcss-preset-env： </p>
<p>之后，我们直接修改掉之前的autoprefixer即可：</p>
<p>npm install postcss-preset-env -D</p>
<p>通过这个插件可以识别rgba的格式，css新特性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.title</span>&#123;</span><br><span class="line">  <span class="attribute">color</span>:<span class="number">#123456</span>78;</span><br><span class="line">  <span class="attribute">font-weight</span>:<span class="number">700</span>;</span><br><span class="line">  <span class="attribute">font-size</span>:<span class="number">30px</span>;</span><br><span class="line">  user-select: none;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="webpack打包其他资源"><a href="#webpack打包其他资源" class="headerlink" title="webpack打包其他资源"></a>webpack打包其他资源</h2><h3 id="file-loader"><a href="#file-loader" class="headerlink" title="file-loader"></a>file-loader</h3><p>要处理jpg、png等格式的图片，我们也需要有对应的loader：<strong>file-loader</strong></p>
<p>file-loader的作用就是帮助我们处理import/require()方式引入的一个文件资源，并且会将它放到我们输出的文件夹中</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpe?g||png|svg|gif)$/</span>,</span><br><span class="line">  use: &#123;</span><br><span class="line">    <span class="attr">loader</span>: <span class="string">&quot;file-loader&quot;</span>,</span><br><span class="line">    <span class="attr">options</span>: &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;img/[name]_[hash:6].[ext]&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>有时候我们处理后的文件名称按照一定的规则进行显示：</p>
<p>比如保留原来的文件名、扩展名，同时为了防止重复，包含一个hash值等；</p>
<p>这个时候我们可以使用PlaceHolders来完成，webpack给我们提供了大量的PlaceHolders来显示不同的内容：</p>
<p> <a target="_blank" rel="noopener" href="https://webpack.js.org/loaders/file-loader/#placeholders">https://webpack.js.org/loaders/file-loader/#placeholders</a></p>
<p>我们可以在文档中查阅自己需要的placeholder； </p>
<p>我们这里介绍几个最常用的placeholder： </p>
<p> <strong>[ext]：</strong> 处理文件的扩展名；</p>
<p>  <strong>[name]：</strong>处理文件的名称；</p>
<p> <strong>[hash]：</strong>文件的内容，使用MD4的散列函数处理，生成的一个128位的hash值（32个十六进制）；</p>
<p> <strong>[contentHash]：</strong>在file-loader中和[hash]结果是一致的（在webpack的一些其他地方不一样，后面会讲到）；</p>
<p> <strong>[hash:<length>]：</strong>截图hash的长度，默认32个字符太长了；</p>
<p> <strong>[path]：</strong>文件相对于webpack配置文件的路径</p>
<p>在这里出现了问题，我们常见引用图片的方式有背景图片引用还有使用img标签的src属性</p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-class">.image-bg</span>&#123;</span><br><span class="line">  <span class="attribute">background-image</span>: <span class="built_in">url</span>(<span class="string">&quot;../img/nhlt.jpg&quot;</span>);</span><br><span class="line">  <span class="attribute">background-size</span>: contain;</span><br><span class="line">  <span class="attribute">width</span>: <span class="number">200px</span>;</span><br><span class="line">  <span class="attribute">height</span>: <span class="number">200px</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>这是我用背景引用的，同时使用ES写法导入模块import ‘../css/image.css’;，但是在这里会自动作解析，使得加入file-loader后再次解析失败,而用src属性，import zzngImage from ‘../img/zznh.png’导入一个图片地址赋值给src，这样是通过模块被file-loader解析的，如果直接把src=’../img/zznh.png’赋值给src的话，这样是赋值一个相对路径的，赋值了个字符串，加载的时候会相对于index文件夹下的位置去找，这样就找不到这张图片，所以通过一个模块赋值给src的方式，这样资源就会被打包到build，这样就找的到了，但是为什么背景图片在没安装file-loader是就会被解析，这个没懂</p>
<h3 id="url-loader"><a href="#url-loader" class="headerlink" title="url-loader"></a>url-loader</h3><p><strong>url-loader和file-loader</strong>的工作方式是相似的，但是可以将较小的文件，转成base64的URI</p>
<p>但是开发中我们往往是小的图片需要转换，但是大的图片直接使用图片即可,这是因为小的图片转换base64之后可以和页面一起被请求，减少不必要的请求过程,而大的图片也进行转换，反而会影响页面的请求速度； 那么，我们如何可以<strong>限制哪些大小的图片转换和不转换</strong>呢？</p>
<p>url-loader有一个options属性limit，可以用于设置转换的限制；</p>
<p>下面的代码38kb的图片会进行base64编码，而295kb的不会</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(png|svg|gif)$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;url-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">name</span>: <span class="string">&quot;img/[name]_[hash:8].[ext]&quot;</span>,</span><br><span class="line">        <span class="attr">limit</span>: <span class="number">10</span> * <span class="number">1024</span></span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>url-loader的好处:假设现在文件打包后有bundle.js，图片1，图片2，index.html，这些都要放到服务器上，供浏览器请求 ，首先把index.html请求下来，接下来里面有script指向了bundle.js，那么再把bundle.js发送网络请求，再通过bgi或者src去加载图片1图片2，它也会对静态服务器发送网络请求，但是在开发中图片是很多的，不可能一次次发送请求，每个服务器在同一个时间能应对的并发请求数是有限的，所以经常会对图片做一些优化，比如精灵图，把50张图片放在一张图片上，这样只需要请求一次，还有就可以对小的图片做一个编码，base64 URI，这样它会随着我们另外的资源一起下载下来，之后浏览器是可以直接解析base64显示的</p>
<h2 id="asset-module-type-webpack5"><a href="#asset-module-type-webpack5" class="headerlink" title="asset module type(webpack5)"></a>asset module type(webpack5)</h2><p><strong>我们当前使用的webpack版本是webpack5：</strong> </p>
<p>在webpack5之前，加载这些资源我们需要使用一些loader，比如raw-loader 、url-loader、file-loader； </p>
<p>在webpack5开始，我们可以直接使用资源模块类型（asset module type），来替代上面的这些loader； </p>
<p>**资源模块类型(asset module type)**，通过添加 4 种新的模块类型，来替换所有这些 loader： </p>
<p><strong>asset/resource</strong> 发送一个单独的文件并导出 URL。之前通过使用 file-loader 实现；</p>
<p><strong>asset/inline</strong> 导出一个资源的 data URI。之前通过使用 url-loader 实现；</p>
<p><strong>asset/source</strong> 导出资源的源代码。之前通过使用 raw-loader 实现；</p>
<p><strong>asset</strong> 在导出一个 data URI 和发送一个单独的文件之间自动选择。之前通过使用 url-loader，并且配置资源体积限制实现</p>
<p><a target="_blank" rel="noopener" href="https://www.csdn.net是一个uri(它只说明了服务器的地址,没有具体到文件是什么类型)/">https://www.csdn.net是一个URI（它只说明了服务器的地址，没有具体到文件是什么类型）</a> 那么<a target="_blank" rel="noopener" href="https://www.csdn.net/image/logo.gif%E5%B0%B1%E6%98%AF%E4%B8%80%E4%B8%AAURL%EF%BC%88%E4%BB%96%E5%85%B7%E4%BD%93%E5%88%B0%E4%BA%86logo%E6%96%87%E4%BB%B6%E7%9A%84%E4%BD%8D%E7%BD%AE%E5%B9%B6%E4%B8%94logo%E6%96%87%E4%BB%B6%E6%98%AFgif%E7%B1%BB%E5%9E%8B%E7%9A%84%EF%BC%89">https://www.csdn.net/image/logo.gif就是一个URL（他具体到了logo文件的位置并且logo文件是gif类型的）</a></p>
<p>只要能唯一标识资源的就是URI，在URI的基础上给出其资源的访问方式的就是URL</p>
<p>这样写的方法就相当于file-loader，全部都打包</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  test: /\.(jpe?g||png|gif|svg)$/,</span><br><span class="line">  type: &quot;asset/resource&quot;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>asset常用写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(jpe?g||png|gif|svg)$/</span>,</span><br><span class="line">  type: <span class="string">&quot;asset&quot;</span>,</span><br><span class="line">  <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;img/[name]_[hash:6][ext]&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">parser</span>: &#123;</span><br><span class="line">    <span class="attr">dataUrlCondition</span>: &#123;</span><br><span class="line">      <span class="attr">maxSize</span>: <span class="number">100</span> * <span class="number">1024</span><span class="comment">//超过100kb就不打包</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>用asset module type最新的用法进行资源的打包，这样像url-loader都可以不用安装</p>
<h3 id="加载字体文件"><a href="#加载字体文件" class="headerlink" title="加载字体文件"></a>加载字体文件</h3><p>如果我们需要使用某些特殊的字体或者字体图标，那么我们会引入很多字体相关的文件，这些文件的处理也是一样的,可以选择使用file-loader来处理，也可以选择直接使用webpack5的资源模块类型来处理</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.(eot|ttf|woff2?)$/</span>,</span><br><span class="line">  type: <span class="string">&quot;asset/resource&quot;</span>,</span><br><span class="line">  <span class="attr">generator</span>: &#123;</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;font/[name]_[hash:6][ext]&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="webpack插件Plugin"><a href="#webpack插件Plugin" class="headerlink" title="webpack插件Plugin"></a>webpack插件Plugin</h2><h3 id="Plugin"><a href="#Plugin" class="headerlink" title="Plugin"></a>Plugin</h3><p>Loader是用于特定的模块类型进行转换</p>
<p>Plugin可以用于执行更加广泛的任务，比如打包优化、资源管理、环境变量注入等</p>
<p>loader只是在加载模块的时候它通过test去匹配模块，去使用不同的loader来处理这个模块，而plubin可以在webpack做任何事情，贯穿整个生命周期</p>
<h3 id="CleanWebpackPlugin"><a href="#CleanWebpackPlugin" class="headerlink" title="CleanWebpackPlugin"></a>CleanWebpackPlugin</h3><p>前面演示的过程中，每次修改了一些配置，重新打包时，都需要手动删除dist文件夹</p>
<p>可以借助于一个插件来帮助我们完成，这个插件就是CleanWebpackPlugin</p>
<p>安装插件 npm install clean-webpack-plugin -D</p>
<p>那么如何去使用插件，它需要在webpack.config.js中去导入,它和loader不一样,loader在使用时加上名字就会自动加载，但是插件必须手动导入</p>
<p>clean-webpack-plugin本身就是一个对象，对象里面有CleanWebpackPlugin这个属性指向这个类，所以要解构</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>)</span><br></pre></td></tr></table></figure>

<p>在require里面导出一个对象，从这个对象中导出一个类，一般情况插件都是封装成一个class，到时候会做一些回调，执行plugin中的一些代码</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="comment">//一个个插件对象</span></span><br><span class="line">  <span class="keyword">new</span> CleanWebpackPlugin()<span class="comment">//通过某一个类创建一个对象</span></span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>会根据上文output去删除打包的文件夹</p>
<h3 id="HtmlWebpackPlugin"><a href="#HtmlWebpackPlugin" class="headerlink" title="HtmlWebpackPlugin"></a>HtmlWebpackPlugin</h3><p>我们的HTML文件是编写在根目录下的，而最终打包的dist文件夹中是没有index.html文件的。在进行项目部署的时，必然也是需要有对应的入口文件index.html； 所以我们也需要对index.html进行打包处理</p>
<p> 对HTML进行打包处理我们可以使用另外一个插件：<strong>HtmlWebpackPlugin</strong>；</p>
<p>npm install html-webpack-plugin -D</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>这个插件不用做解构，因为导出的就是一个类</p>
<p>这个文件是如何生成的呢？默认情况下是根据ejs的一个模板来生成的；</p>
<p>在html-webpack-plugin的源码中，有一个default_index.ejs模块</p>
<h3 id="自定义HTML模板"><a href="#自定义HTML模板" class="headerlink" title="自定义HTML模板"></a>自定义HTML模板</h3><p>上面的代码中，会有一些类似这样的语法&lt;% 变量 %&gt;，这个是EJS模块填充数据的方式。</p>
<p>在配置HtmlWebpackPlugin时，我们可以添加如下配置：</p>
<p><strong>template：</strong>指定我们要使用的模块所在的路径； </p>
<p><strong>title：</strong>在进行htmlWebpackPlugin.options.title读取时，就会读到该信息</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">plugins: [</span><br><span class="line">  <span class="comment">//一个个插件对象</span></span><br><span class="line">  <span class="keyword">new</span> CleanWebpackPlugin(),<span class="comment">//通过某一个类创建一个对象</span></span><br><span class="line">  <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">    <span class="attr">template</span>: <span class="string">&quot;./public/index.html&quot;</span>,</span><br><span class="line">    <span class="attr">title</span>: <span class="string">&quot;哈哈哈&quot;</span></span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">new</span> DefinePlugin(&#123;</span><br><span class="line">    <span class="attr">BASE_URL</span>: <span class="string">&quot;&#x27;./&#x27;&quot;</span></span><br><span class="line">  &#125;)</span><br><span class="line">]</span><br></pre></td></tr></table></figure>

<p>这样就会根据./public/index.html作为模板，去生成我们打包后的index.html</p>
<p>在编译template模块时，有一个BASE_URL： </p>
<p>但是我们并没有设置过这个常量值，所以会出现没有定义的错误； </p>
<p>这个时候我们可以使用DefinePlugin插件,DefinePlugin允许在编译时创建配置的全局常量，是一个webpack内置的插件（不需要单独安装）</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; DefinePlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="CopyWebpackPlugin"><a href="#CopyWebpackPlugin" class="headerlink" title="CopyWebpackPlugin"></a>CopyWebpackPlugin</h3><p>如果把一些资源放到public文件夹里面，到时候这里面的内容会被复制到打包的文件夹里面</p>
<p>在vue的打包过程中，如果我们将一些文件放到public的目录下，那么这个目录会被复制到dist文件夹中。</p>
<p>这个复制的功能，我们可以使用CopyWebpackPlugin来完成；</p>
<p>安装CopyWebpackPlugin插件：</p>
<p>npm install copy-webpack-plugin -D</p>
<p><strong>接下来配置CopyWebpackPlugin即可：</strong></p>
<p>复制的规则在patterns中设置；</p>
<p><strong>from：</strong>设置从哪一个源中开始复制；</p>
<p><strong>to：</strong>复制到的位置，可以省略，会默认复制到打包的目录下；</p>
<p><strong>globOptions：</strong>设置一些额外的选项，其中可以编写需要忽略的文件：</p>
<p>.DS_Store：mac目录下回自动生成的一个文件；</p>
<p> index.html：也不需要复制，因为我们已经通过HtmlWebpackPlugin完成了index.html的生成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">new</span> CopyWwebpackPlugin(&#123;</span><br><span class="line">  <span class="attr">patterns</span>: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">from</span>: <span class="string">&quot;public&quot;</span>,</span><br><span class="line">      <span class="attr">to</span>: <span class="string">&quot;./&quot;</span>,<span class="comment">//代表在上面./build后面进行拼接路径</span></span><br><span class="line">      <span class="attr">globOptions</span>: &#123;</span><br><span class="line">        <span class="attr">ignore</span>: [</span><br><span class="line">          <span class="string">&quot;**/index.html&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="Mode配置"><a href="#Mode配置" class="headerlink" title="Mode配置"></a>Mode配置</h3><p>因为目前bundle.js压缩过是在一行上的，代表打包后我们如果哪里有报错不好找出来，找不到哪一行的代码报错</p>
<p>在entry上面添加了mdoe:”development”这样可以把bundle.js变成没有压缩过的代码，但是devtool(设置开发时的一个工具)的默认值是eval，所以现在源代码有很多的eval函数包裹着实际写的代码，如果想看到实际的代码设置成source-map，这样在bundle中会生成bundle.js.map，这个文件会把原来看不懂的源代码映射到真实的源代码里面，这样在浏览器中可以看到是哪一行报错了，就可以解决报错问题</p>
<p>模式:可以设置两个</p>
<p>development:开发阶段，会设置development</p>
<p>production:准备上线打包的时候，设置production</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mode: <span class="string">&quot;development&quot;</span>,</span><br><span class="line"><span class="attr">devtool</span>: <span class="string">&quot;source-map&quot;</span>,<span class="comment">//建立js映射文件，方便调试代码和错误</span></span><br></pre></td></tr></table></figure>



<h2 id="Babel"><a href="#Babel" class="headerlink" title="Babel"></a>Babel</h2><h3 id="Babel是什么"><a href="#Babel是什么" class="headerlink" title="Babel是什么"></a>Babel是什么</h3><p>事实上，在开发中我们很少直接去接触babel，但是babel对于前端开发来说，目前是不可缺少的一部分：</p>
<p>开发中，我们想要使用ES6+的语法，想要使用TypeScript，开发React项目，它们都是离不开Babel的； </p>
<p>所以，学习Babel对于我们理解代码从编写到线上的转变过程至关重要； </p>
<p><strong>那么，Babel到底是什么呢？</strong></p>
<p>Babel是一个工具链，主要用于旧浏览器或者环境中将ECMAScript 2015+代码转换为向后兼容版本的JavaScript； 包括：语法转换、源代码转换等</p>
<p>babel本身可以作为一个独立的工具（和postcss一样），不和webpack等构建工具配置来单独使用。</p>
<p>如果我们希望在命令行尝试使用babel，需要安装如下库：</p>
<p>@babel/core：babel的核心代码，必须安装；</p>
<p>@babel/cli：可以让我们在命令行使用babel； (在命令行使用就可以不用安装)</p>
<p>npm install @babel/core  @babel/cli -D</p>
<h3 id="Babel在命令行的使用"><a href="#Babel在命令行的使用" class="headerlink" title="Babel在命令行的使用"></a>Babel在命令行的使用</h3><p>使用babel来处理我们的源代码：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> message = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> names = [<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;def&#x27;</span>];</span><br><span class="line"></span><br><span class="line">names.foreach(<span class="function"><span class="params">item</span> =&gt;</span> <span class="built_in">console</span>.log(item));</span><br></pre></td></tr></table></figure>

<p>src：是源文件的目录；</p>
<p>–out-dir：指定要输出的文件夹dist</p>
<p>npx babel src –out-dir dist</p>
<p>如果想生成一个单独的文件 npx babel demo.js –out-file dist.js</p>
<p>这时生成了dist文件下，文件下下有一个demo.js，输出确实已经输出了，但是依旧输出的是ES6的语法，这是因为在单独使用babel的时候必须使用对应的插件，假设我们需要转换箭头函数，那么就要使用箭头函数转换相关的插件</p>
<p>npm install @babel/plugin-transform-arrow-functions -D</p>
<p>这时使用命令</p>
<p>npx babel demo.js –out-file test.js --plugins=@babel/plugin-transform-arrow-functions</p>
<p>发现生成了转换箭头函数后的test.js，但是那些const的还没转换，所以也需要另外转换块级作用域的插件</p>
<p>npm install @babel/plugin-transform-block-scoping -D</p>
<p>这时就转换成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> message = <span class="string">&#x27;hello&#x27;</span>;</span><br><span class="line"><span class="keyword">var</span> names = [<span class="string">&#x27;abc&#x27;</span>, <span class="string">&#x27;def&#x27;</span>];</span><br><span class="line">names.foreach(<span class="function"><span class="keyword">function</span> (<span class="params">item</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> <span class="built_in">console</span>.log(item);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="Babel的预设preset"><a href="#Babel的预设preset" class="headerlink" title="Babel的预设preset"></a>Babel的预设preset</h3><p>但是如果要转换的内容过多，一个个设置是比较麻烦的，我们可以使用预设（preset），预设把常用的需要安装的插件，集合到了preset</p>
<p> 安装@babel/preset-env预设:</p>
<p>npm install @babel/preset-env</p>
<p>使用预设后 npx babel demo.js –out-file test.js --presets=@babel/preset-env</p>
<p>这时仍然会生成对应的ES5代码</p>
<p>babel是如何做到将我们的一段代码（ES6、TypeScript、React）转成另外一段代码（ES5的呢？</p>
<p>从一种源代码（原生语言）转换成另一种源代码（目标语言），这是什么的工作呢？</p>
<p>就是编译器，事实上我们可以将babel看成就是一个编译器。</p>
<p>Babel编译器的作用就是将我们的源代码，转换成浏览器可以直接识别的另外一段源代码； </p>
<p>Babel也拥有编译器的工作流程：</p>
<p>解析阶段（Parsing） </p>
<p>转换阶段（Transformation） </p>
<p>生成阶段（Code Generation） </p>
<h3 id="babel编译器执行原理"><a href="#babel编译器执行原理" class="headerlink" title="babel编译器执行原理"></a>babel编译器执行原理</h3><p><strong>原生源代码</strong>-&gt;词法分析-&gt;<strong>token数组</strong>-&gt;语法分析-&gt;<strong>AST抽象语法树</strong>-&gt;遍历-&gt;访问-&gt;应用插件-&gt;<strong>新的AST语法树</strong>-&gt;<strong>目标源代码</strong></p>
<p>自己编写的源代码会经过一个词法分析器，会对源代码里面所以的代码作分隔，分隔完会放到数组里面，经过语法分析比如const是个关键字，分析完后会生成AST树，就是一个树，把所有语法用一个抽象语法树表现出来，之后遍历抽象语法树，遍历的时候会应用插件当访问到const关键字的时候，就会对const进行转换，转换完生成新的抽象语法树，生成新最后目标源代码，所以babel做的事其实就是编译器做的事</p>
<h3 id="babel-loader"><a href="#babel-loader" class="headerlink" title="babel-loader"></a>babel-loader</h3><p>在没有babel-loader的时候，其实编写的ES6代码没有通过webpack转换成ES5的代码，虽然打包了，但是没有对内部的代码进行一个转换，webpack是模块化打包工具，不负责作一些转换</p>
<p>安装babel-loader:npm install babel-loader -D</p>
<p>在options里面要添加插件配置才能正确转换</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">plugins</span>: [</span><br><span class="line">          <span class="string">&quot;@babel/plugin-transform-arrow-functions&quot;</span>,</span><br><span class="line">          <span class="string">&quot;@babel/plugin-transform-block-scoping&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是如果每次都是安装插件太麻烦了，所以可以</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">test</span>: <span class="regexp">/\.js$/</span>,</span><br><span class="line">  use: [</span><br><span class="line">    &#123;</span><br><span class="line">      <span class="attr">loader</span>: <span class="string">&quot;babel-loader&quot;</span>,</span><br><span class="line">      <span class="attr">options</span>: &#123;</span><br><span class="line">        <span class="attr">presets</span>: [</span><br><span class="line">          <span class="string">&quot;@babel/preset-env&quot;</span></span><br><span class="line">        ]</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>babel的配置文件(babel.config.js)</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">presets</span>: [</span><br><span class="line">    <span class="string">&quot;@babel/preset-env&quot;</span></span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="vue源码的打包"><a href="#vue源码的打包" class="headerlink" title="vue源码的打包"></a>vue源码的打包</h2><p>npm install vue@next  因为默认还是vue2所以加上@next安装3</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> app = createApp(&#123;</span><br><span class="line">  <span class="attr">template</span>: <span class="string">`&lt;h2&gt;我是vue渲染出来的&lt;/h2&gt;`</span>,</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">title</span>: <span class="string">&quot;hello world&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.mount(<span class="string">&quot;#app&quot;</span>)</span><br></pre></td></tr></table></figure>

<p>编写vue代码后发现可以打包成功，但是不显示内容，这时候去打印台查看有警告</p>
<p>runtime-core.esm-bundler.js:38 [Vue warn]: Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias “vue” to “vue/dist/vue.esm-bundler.js”.<br>  at <App></p>
<p>这个警告的意思是</p>
<p>我们现在提供了template，但是我们现在用的是runtime版本</p>
<p>意思是现在对vue的源代码进行解析，vue给我们提供了很多版本，所有的版本分成了两类，一类是 runtime+compiler，另外一类是runtime-only，如果现在是有template的话就得用runtime+compiler，因为它最主要的作用就是对template作编译的，但是默认用的是runtime-only，不支持template的编译，所以会报警告</p>
<h3 id="vue打包后不同版本的解析"><a href="#vue打包后不同版本的解析" class="headerlink" title="vue打包后不同版本的解析"></a>vue打包后不同版本的解析</h3><p><strong>vue(.runtime).global(.prod).js：</strong> prod代表压缩代码后我们看不懂的版本</p>
<p>通过浏览器中的 <script src="..."> 直接使用；</p>
<p>我们之前通过CDN引入和下载的Vue版本就是这个版本；</p>
<p>会暴露一个全局的Vue来使用；</p>
<p><strong>vue(.runtime).esm-browser(.prod).js：</strong> </p>
<p>p 用于通过原生 ES 模块导入使用 (在浏览器中通过 <script type="module"> 来使用)。 </p>
<p> <strong>vue(.runtime).esm-bundler.js：</strong> </p>
<p>用于 webpack，rollup 和 parcel 等构建工具；</p>
<p>构建工具中默认是vue.runtime.esm-bundler.js； </p>
<p>如果我们需要解析模板template，那么需要手动指定vue.esm-bundler.js； </p>
<p> <strong>vue.cjs(.prod).js：</strong> </p>
<p> 服务器端渲染使用；</p>
<p> 通过require()在Node.js中使用；</p>
<p>所以为什么会报那么警告，因为现在用的vue版本默认是vue.runtime.esm-bundler.js，所以可以手动指定版本</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue/dist/vue.esm-bundler&#x27;</span></span><br></pre></td></tr></table></figure>

<p>这时候npm run build就会正常显示了</p>
<p>当我们编写SFC文件后template交给vue-loader @vue/compiler-sfc解析就可以不用加后面的/dist/vue.esm-bundler</p>
<h3 id="运行时-编译器vs仅运行时"><a href="#运行时-编译器vs仅运行时" class="headerlink" title="运行时+编译器vs仅运行时"></a>运行时+编译器vs仅运行时</h3><p>在Vue的开发过程中我们有<strong>三种方式</strong>来编写DOM元素：</p>
<p>方式一：template模板的方式（之前经常使用的方式）；</p>
<p>方式二：render函数的方式，使用h函数来编写渲染的内容；</p>
<p>方式三：通过.vue文件中的template来编写模板；</p>
<p><strong>它们的模板分别是如何处理的呢？</strong></p>
<p>方式二中的函数可以直接返回一个<strong>虚拟节点</strong>，也就是<strong>Vnode节点</strong>； </p>
<p>方式一和方式三的template都需要有特定的代码来对其进行解析：</p>
<p>方式三.vue文件中的template可以通过在vue-loader对其进行编译和处理；</p>
<p>方式一种的template我们必须要通过源码中一部分代码来进行编译；</p>
<p>所以，Vue在让我们选择版本的时候分为 <strong>运行时+编译器</strong> vs <strong>仅运行时</strong></p>
<p>运行时+编译器包含了对template模板的编译代码，更加完整，但是也更大一些；</p>
<p>仅运行时没有包含对template版本的编译代码，相对更小一些</p>
<h3 id="在vsCode编写SFC文件"><a href="#在vsCode编写SFC文件" class="headerlink" title="在vsCode编写SFC文件"></a>在vsCode编写SFC文件</h3><p>VSCode对SFC的支持： </p>
<p>插件一：Vetur,从Vue2开发就一直在使用的VSCode支持Vue的插件；</p>
<p>插件二：Volar,官方推荐的插件（后续会基于Volar开发官方的VSCode插件）我用这个</p>
<p>创建App.vue文件</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;我是vue渲染出来的&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default = &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &quot;hello world&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>导出一个对象，上面的template会有一个loader做编译</p>
<p>这时打包时不能成功的，因为引入了新的.vue文件，那么说明需要一个合适的loader来进行处理</p>
<p>npm install vue-loader@next -D 因为默认时vue2，所以加@next</p>
<p>安装成功后，执行npm run build依旧报错，vue-loader requires @vue/compiler-sfc to be present in the dependency tree</p>
<p>npm install @vue/compiler-sfc -D 这个包对我们的单文件进行解析</p>
<p>vue2这个包叫 @vue/vue-template-compiler </p>
<p>安装成功后依旧报错You may need an additional loader to handle the result of these loaders.</p>
<p>vue-loader was used without the corresponding plugin. Make sure to include VueLoaderPlugin in your webpack config.</p>
<p>需要插件的话，需要先导入，然后在Plugin中使用</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; VueLoaderPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;vue-loader/dist/index&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">new</span> VueLoaderPlugin()</span><br></pre></td></tr></table></figure>

<p>发现可以正常显示，.vue文件可以正常处理</p>
<p>组件也可以使用了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;我是Hello world组件&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &quot;./HelloWorld.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      title: &quot;hello world&quot;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    HelloWorld</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>报了一个警告You are running the esm-bundler build of Vue. It is recommended to configure your bundler to explicitly replace feature flag globals with boolean literals to get proper tree-shaking in the final bundle. See <a target="_blank" rel="noopener" href="http://link.vuejs.org/feature-flags">http://link.vuejs.org/feature-flags</a> for more details.</p>
<p>点击里面的网址就是让我们对两个东西作一个适配</p>
<p><strong>VUE_OPTIONS_API</strong><code>(enable/disable Options API support, default:</code>true`)</p>
<p><strong>VUE_PROD_DEVTOOLS</strong><code>(enable/disable devtools support in production, default:</code>false`)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">new DefinePlugin(&#123;</span><br><span class="line">  BASE_URL: &quot;&#x27;./&#x27;&quot;,</span><br><span class="line">  __VUE_OPTIONS_API__: true,//里面可以用vue2optionsapi</span><br><span class="line">  __VUE_PROD_DEVTOOLS__: false//生产时使用为false</span><br><span class="line">&#125;),</span><br></pre></td></tr></table></figure>



<h2 id="devserver"><a href="#devserver" class="headerlink" title="devserver"></a>devserver</h2><h3 id="为什么要搭建本地服务器"><a href="#为什么要搭建本地服务器" class="headerlink" title="为什么要搭建本地服务器"></a>为什么要搭建本地服务器</h3><p><strong>目前我们开发的代码，为了运行需要有两个操作：</strong></p>
<p>操作一：npm run build，编译相关的代码；</p>
<p>操作二：通过live server或者直接通过浏览器，打开index.html代码，查看效果；</p>
<p>这个过程经常操作会影响我们的开发效率，我们希望可以做到，当文件发生变化，可以自动的完成 编译 和 展示</p>
<p><strong>为了完成自动编译，webpack提供了几种可选的方式：</strong></p>
<p>webpack watch mode； </p>
<p>webpack-dev-server（常用）；</p>
<p>webpack-dev-middleware；</p>
<h3 id="Webpack-watch"><a href="#Webpack-watch" class="headerlink" title="Webpack watch"></a>Webpack watch</h3><p>webpack给我们提供了<strong>watch模式</strong>： </p>
<p>在该模式下，webpack依赖图中的所有文件，只要有一个发生了更新，那么代码将被重新编译； </p>
<p>我们不需要手动去运行 npm run build指令了；</p>
<p><strong>如何开启watch呢？两种方式：</strong></p>
<p>方式一：在导出的配置中，添加 watch: true； 在</p>
<p>方式二：在启动webpack的命令中，添加 –watch的标识； </p>
<p><strong>这里我们选择方式二</strong>，在package.json的 scripts 中添加一个 watch 的脚本：</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="attr">&quot;build&quot;</span>: <span class="string">&quot;webpack --watch&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>增加上这么一个选项后，这个选项会被webpack-cli处理，把这个选项变成一个配置</p>
<p>watch:true</p>
<p>执行npm run build 后当我们的源代码发生改变时，保存后，终端那边其实会有表现出重新做了一次编译，来到浏览器会有对应的相应，这样就不用在每次改完代码后又执行npm run build,</p>
<p>而live server会监听当前的代码发生了改变，就会重新进行刷新</p>
<p>在webpack.config,js导出配置加上</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">watch: <span class="literal">true</span>,</span><br></pre></td></tr></table></figure>

<p>也可以达到一样的效果</p>
<h3 id="webpack-dev-server"><a href="#webpack-dev-server" class="headerlink" title="webpack-dev-server"></a>webpack-dev-server</h3><p>上面的方式可以监听到文件的变化，但是事实上它本身是没有自动刷新浏览器的功能的,当然，目前我们可以在VSCode中使用live-server来完成这样的功能；</p>
<p>但是，我们希望在不使用live-server的情况下，可以具备live reloading（实时重新加载）的功能；</p>
<p>这个时候就可以安装webpack-dev-server</p>
<p>npm install webpack-dev-server -D</p>
<p>在脚本中添加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack&quot;</span>,</span><br><span class="line">  <span class="string">&quot;server&quot;</span>: <span class="string">&quot;webpack serve&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>添加后，到时候内部就会找到devserver就会启动本地服务器，安装好后执行npm run server</p>
<p>执行后发现报错8080端口被占用，在webpack配置文件中加</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>修改服务器端口就行了</p>
<p>这时访问的是localhost:8000,开启的服务器就不是liveserver开启的了，而是当前devserver自动搭建的本地服务器，基于node的express框架搭建的本地服务器，相当于访问这个地址时，会来到框架搭建的服务器，去找到打包的静态资源，返回给浏览器</p>
<p>当配置了  “server”: “webpack serve”时为什么会自动启动呢</p>
<p>是webpack-cli发现有这个参数，就会利用webpack-dev-server帮助启动</p>
<p>这时是不会对源代码打包后生成目标代码的，就是build里面是没有打包后的文件的</p>
<p>那么服务器访问的静态资源是从哪里来的呢？</p>
<p>其实webpack-dev-server是有对源代码进行编译后的打包的，但是编译打包后的代码没有做文件的输出，是将当前的文件打包，打包后的静态资源放到了内存里面，然后通过express服务器去访问打包到内存的静态资源，如果浏览器访问也是通过内存直接去读取资源，放回浏览器</p>
<p>那么为什么不做输出呢？如果打包完先输出到文件里面，如果用户访问，得先放express服务器先从文件把对应的资源读取到内存里面，有这个过程，然后再转换成对应的数据流返回到浏览器，webpack-dev-server为了增加开发效率，直接把对应的资源放到内存里面，这也就少了个把文件读到内存的过程</p>
<p>webpack-dev-server 在编译之后不会写入到任何输出文件，而是将 bundle 文件保留在内存中：</p>
<p>事实上webpack-dev-server使用了一个库叫memfs（memory-fs webpack自己写的）</p>
<h4 id="dev-server配置"><a href="#dev-server配置" class="headerlink" title="dev-server配置"></a>dev-server配置</h4><p>在webpack.config.js中配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: <span class="string">&quot;./abc&quot;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>重新执行npm run serve，会有提示Content not from webpack is served from ./abc</p>
<p>这句话的意思是如果当前资源没有从webpack加载到，那么会到abc中去找，例如我在public目录下index.html中添加，重新npm run build启动服务，当前index.html会被打包在内存生成index.html到浏览器访问的就是public目录下生成的index.html</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=<span class="string">&quot;./abc.js&quot;</span>&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>原理就是:它在当前目录下没有找到abc.js，webpack也没有打包过abc.js这样一个资源，就会去abc目录下去找，这时我们创建了abc/abc.js，回到浏览器发现打印abc.js中的内容，原因就是在devServer下配置了contentBase选项，使得没有从webpack里面加载到的资源会从这里abc这个文件夹中找</p>
<p>注释掉</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// new CopyWwebpackPlugin(&#123;</span></span><br><span class="line"><span class="comment">//   patterns: [</span></span><br><span class="line"><span class="comment">//     &#123;</span></span><br><span class="line"><span class="comment">//       from: &quot;public&quot;,</span></span><br><span class="line"><span class="comment">//       to: &quot;./&quot;,</span></span><br><span class="line"><span class="comment">//       globOptions: &#123;</span></span><br><span class="line"><span class="comment">//         ignore: [</span></span><br><span class="line"><span class="comment">//           &quot;**/index.html&quot;</span></span><br><span class="line"><span class="comment">//         ]</span></span><br><span class="line"><span class="comment">//       &#125;</span></span><br><span class="line"><span class="comment">//     &#125;</span></span><br><span class="line"><span class="comment">//   ]</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br></pre></td></tr></table></figure>

<p>这也样favicon.icon就不会被打包了,修改配置，图标重新显示</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: <span class="string">&quot;./public&quot;</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p>源代码通过devserver进行打包，将所有静态资源放到memfs内存里面，然后开启express服务器，然后浏览器通过localhost://8000这个地址去访问，第一次会把index.html下载下来，后面index.html里面的其他资源后续都会从express加载下来，那么像刚刚那么例子，abc.js在打包的资源里面没有，所以可以通过devserver配置contentBase，当打包的资源请求不到的时候，就去contentBase配置的那个文件夹找，开发阶段如果每次不想对copyWebpackPlugin作拷贝，那么就可以设置contentBase配置public文件夹，但是在最后进行打包的时候还是要用copyWebpackPlugin进行打包</p>
<h3 id="模块热替换HMR"><a href="#模块热替换HMR" class="headerlink" title="模块热替换HMR"></a>模块热替换HMR</h3><p><strong>什么是HMR呢？</strong></p>
<p>HMR的全称是Hot Module Replacement，翻译为模块热替换； </p>
<p>模块热替换是指在 应用程序运行过程中，替换、添加、删除模块，而无需重新刷新整个页面； </p>
<p><strong>HMR通过如下几种方式，来提高开发的速度：</strong></p>
<p>不重新加载整个页面，这样可以保留某些应用程序的状态不丢失； </p>
<p>p只更新需要变化的内容，节省开发的时间； </p>
<p>p修改了css、js源代码，会立即在浏览器更新，相当于直接在浏览器的devtools中直接修改样式；</p>
<p><strong>如何使用HMR呢？</strong></p>
<p>默认情况下，webpack-dev-server已经支持HMR，我们只需要开启即可； </p>
<p>在不开启HMR的情况下，当我们修改了源代码之后，整个页面会自动刷新，使用的是live reloading</p>
<p>假如浏览器有一个计数器，当前计数100，我希望保留页面这100这个状态，但是如果我修改了源代码，自动对源代码进行编译而且刷新了浏览器，100这个状态就没了，而且性能也很消耗，改一个地方就刷新整个页面，所以用HMR把一个模块当做整体，当对模块进行添加删除时，只刷新这一个模块会更好</p>
<p>开启HMR</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: <span class="string">&quot;./public&quot;</span>,</span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">target: <span class="string">&quot;web&quot;</span>,</span><br></pre></td></tr></table></figure>

<p>target不开启可能会出问题，因为在浏览器显示，所以写web环境</p>
<p>把HMR开启后，实际上修改源代码依旧会刷新整个页面，并没有做模块的热替换，因为webpack默认不知道要对哪些模块做模块热替换，它认为所有模块在更新的时候都是要刷新浏览器的，如果有某一个模块要做热替换需要这样写，当element.js里面修改了就会做热替换</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./js/element&#x27;</span></span><br><span class="line"><span class="keyword">if</span> (<span class="built_in">module</span>.hot) &#123;</span><br><span class="line">  <span class="built_in">module</span>.hot.accept(<span class="string">&quot;./js/element&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;element模块更新了&quot;</span>);</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是如果很多个模块要做热替换的时候都得这样编写就很麻烦，所以在真实开发的时候比如开发Vue、React项目，我们修改了组件，希望进行热更新，这个时候应该如何去操作呢？事实上社区已经针对这些有很成熟的解决方案了；</p>
<p>比如vue开发中，我们使用vue-loader，此loader支持vue组件的HMR</p>
<p>比如react开发中，有React Hot Loader，实时调整react组件（目前React官方已经弃用了，改成使用react-refresh）</p>
<p>在我修改App.vue里面的内容时，vue-loader会自动作模块的热替换，并不会做浏览器的刷新</p>
<h4 id="HMR原理"><a href="#HMR原理" class="headerlink" title="HMR原理"></a>HMR原理</h4><p><strong>那么HMR的原理是什么呢？如何可以做到只更新一个模块中的内容呢？</strong></p>
<p>webpack-dev-server会创建两个服务：提供静态资源的服务（express）和Socket服务（net.Socket）； </p>
<p>express server负责直接提供静态资源的服务（打包后的资源直接被浏览器请求和解析）；</p>
<p><strong>HMR Socket Server，是一个socket的长连接：</strong></p>
<p>长连接有一个最好的好处是建立连接后双方可以通信（服务器可以直接发送文件到客户端）；</p>
<p>当服务器监听到对应的模块发生变化时，会生成两个文件.json（manifest文件）和.js文件（update chunk）； </p>
<p>通过长连接，可以直接将这两个文件主动发送给客户端（浏览器）；</p>
<p>浏览器拿到两个新的文件后，通过HMR runtime机制，加载这两个文件，并且针对修改的模块进行更新</p>
<p>意思就是:当我们源代码经过webpack编译后，这时webpack-dev-server就会开启静态服务器，之后浏览器发送http请求，服务器就会做http响应。再从浏览器中展示，这是没有开启HMR时的过程，当开启HMR后有一个HMR Server，这个服务本质是Socket一般做长连接(即时通行(微信聊天，送礼物))，建立了通道(心跳包)，http连接是短连接(客户端发送http请求-&gt;和服务器建立连接-&gt;服务器作出响应-&gt;断开连接)，这里是用socket长连接，假如现在源代码发生改变，webpack监听哪一个文件发生了改变，一种是有发生改变就刷新浏览器，一种是当有一个文件发生变化，webpack编译后生成两个文件.json和.js，服务器把这两个文件主动传给浏览器，然后在客户端有个HMR runtiome，会监听服务器传过来的这两个文件，根据这两个文件决定浏览器的哪一块需要做更新，这就是HMR的原理</p>
<h3 id="devserver的其他一些配置"><a href="#devserver的其他一些配置" class="headerlink" title="devserver的其他一些配置"></a>devserver的其他一些配置</h3><p><strong>host设置主机地址：</strong></p>
<p>默认值是localhost； </p>
<p>如果希望其他地方也可以访问，可以设置为 0.0.0.0； </p>
<p> <strong>localhost 和 0.0.0.0 的区别：</strong></p>
<p>localhost：本质上是一个域名，通常情况下会被解析成127.0.0.1;</p>
<p>127.0.0.1：回环地址(Loop Back Address)，表达的意思其实是我们主机自己发出去的包，直接被自己接收; </p>
<p>正常的数据库包经常 应用层 - 传输层 - 网络层 - 数据链路层 - 物理层 ; </p>
<p>而回环地址，是在网络层直接就被获取到了，是不会经常数据链路层和物理层的; </p>
<p>比如我们监听 127.0.0.1时，在同一个网段下的主机中，通过ip地址是不能访问的; </p>
<p>0.0.0.0：监听IPV4上所有的地址，再根据端口找到不同的应用程序; </p>
<p>比如我们监听 0.0.0.0时，在同一个网段下的主机中，通过ip地址是可以访问的;</p>
<p> <strong>port设置监听的端口，默认情况下是8080</strong></p>
<p> <strong>open是否打开浏览器：</strong></p>
<p>默认值是false，设置为true会打开浏览器；</p>
<p>也可以设置为类似于 Google Chrome等值； </p>
<p><strong>compress是否为静态文件开启gzip compression：</strong> </p>
<p>默认值是false，可以设置为true；index.html不压缩</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">devServer: &#123;</span><br><span class="line">  <span class="attr">contentBase</span>: <span class="string">&quot;./public&quot;</span>,</span><br><span class="line">  <span class="attr">hot</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">port</span>: <span class="number">8000</span>,</span><br><span class="line">  <span class="comment">// host: &quot;0.0.0.0&quot;,</span></span><br><span class="line">  <span class="attr">open</span>: <span class="literal">true</span>,</span><br><span class="line">  <span class="attr">compress</span>: <span class="literal">true</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h2 id="webpack的一些其他东西"><a href="#webpack的一些其他东西" class="headerlink" title="webpack的一些其他东西"></a>webpack的一些其他东西</h2><h3 id="resolve模块解析"><a href="#resolve模块解析" class="headerlink" title="resolve模块解析"></a>resolve模块解析</h3><p>resolve用于设置模块如何被解析：</p>
<p>在开发中我们会有各种各样的模块依赖，这些模块可能来自于自己编写的代码，也可能来自第三方库；</p>
<p>resolve可以帮助webpack从每个 require/import 语句中，找到需要引入到合适的模块代码；</p>
<p>webpack 使用 enhanced-resolve 来解析文件路径；</p>
<p><strong>webpack能解析三种文件路径：</strong></p>
<p>绝对路径:由于已经获得文件的绝对路径，因此不需要再做进一步解析。</p>
<p>相对路径:在这种情况下，使用 import 或 require 的资源文件所处的目录，被认为是上下文目录；</p>
<p>在 import/require 中给定的相对路径，会拼接此上下文路径，来生成模块的绝对路径；</p>
<p>模块路径在 resolve.modules中指定的所有目录检索模块；</p>
<p>默认值是 [‘node_modules’]，所以默认会从node_modules中查找文件；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br></pre></td></tr></table></figure>

<p>假设这个import为什么会知道去node_modules下去找对应的vue去做引用，这是因为webpack默认有一个配置</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  <span class="attr">modules</span>: [<span class="string">&quot;node_modules&quot;</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h3 id="确定文件或者文件夹-extensions"><a href="#确定文件或者文件夹-extensions" class="headerlink" title="确定文件或者文件夹(extensions)"></a>确定文件或者文件夹(extensions)</h3><p>如果是一个文件：</p>
<p>如果文件具有扩展名，则直接打包文件；</p>
<p>否则，将使用 resolve.extensions选项作为文件扩展名解析 </p>
<p>如果是一个文件夹： </p>
<p>会在文件夹中根据 resolve.mainFiles配置选项中指定的文件顺序查找；</p>
<p>resolve.mainFiles的默认值是 [‘index’]； </p>
<p>再根据 resolve.extensions来解析扩展名；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&#x27;./js/math&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>比如这个import语句后面没有加后缀，怎么知道后面是文件还是文件夹呢，原理是:</p>
<p>如果有写后缀名，那么就可以直接打包</p>
<p>否则就使用 resolve.extensions选项作为文件扩展名解析 </p>
<p>在之前以.js结尾的可以不写，但是.vue得写因为在resolve下配置了extensions，当没写后缀名后，就会从这里面依次按顺序加后缀名看看能不能匹配到</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  <span class="comment">// modules: [&quot;node_modules&quot;]</span></span><br><span class="line">  <span class="attr">extensions</span>: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.mjs&quot;</span>, <span class="string">&quot;vue&quot;</span>]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p>如果是个文件夹的话，经常可以去里面加载默认的index.html，假设有一个util文件夹下有一个index.html，就可以直接写</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&quot;./util&quot;</span></span><br></pre></td></tr></table></figure>

<p>这是因为有一个mainFiles配置默认值是[‘index’],再根据 resolve.extensions来解析扩展名</p>
<h3 id="alias配置"><a href="#alias配置" class="headerlink" title="alias配置"></a>alias配置</h3><p>当我们项目的目录结构比较深的时候，或者一个文件的路径可能需要 ../../../这种路径片段； </p>
<p>我们可以给某些常见的路径起一个别名；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">resolve: &#123;</span><br><span class="line">  <span class="comment">//   // modules: [&quot;node_modules&quot;]</span></span><br><span class="line">  <span class="attr">extensions</span>: [<span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.json&quot;</span>, <span class="string">&quot;.mjs&quot;</span>, <span class="string">&quot;.vue&quot;</span>],</span><br><span class="line">  <span class="attr">alias</span>: &#123;</span><br><span class="line">    <span class="string">&quot;js&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src/js&quot;</span>),</span><br><span class="line">    <span class="string">&quot;@&quot;</span>: path.resolve(__dirname, <span class="string">&quot;./src&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>这样写完，就可以利用别名这样写路径</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; sum &#125; <span class="keyword">from</span> <span class="string">&#x27;js/math&#x27;</span>;</span><br><span class="line"><span class="keyword">const</span> &#123; priceFormat &#125; = <span class="built_in">require</span>(<span class="string">&#x27;js/format&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;@/vue/App&#x27;</span></span><br></pre></td></tr></table></figure>



<h3 id="划分环境"><a href="#划分环境" class="headerlink" title="划分环境"></a>划分环境</h3><p>目前我们所有的webpack配置信息都是放到一个配置文件中的：webpack.config.js</p>
<p>当配置越来越多时，这个文件会变得越来越不容易维护； </p>
<p>并且某些配置是在开发环境需要使用的，某些配置是在生成环境需要使用的，当然某些配置是在开发和生成环</p>
<p>境都会使用的；</p>
<p>所以，我们最好对配置进行划分，方便我们维护和管理； </p>
<p>那么，在启动时如何可以区分不同的配置呢？</p>
<p>方案一：编写两个不同的配置文件，开发和生成时，分别加载不同的配置文件即可；</p>
<p>方式二：使用相同的一个入口配置文件，通过设置参数来区分它们；</p>
<p>在webpack.config.js中，有一些配置是放在开发环境的，有一些放在生产环境，但是现在都放在了一起，那么如果做分离呢</p>
<p>一般建立一个叫config的文件夹里面有</p>
<p>webpack.comm.config.js</p>
<p>webpack.dev.config.js</p>
<p>webpack.prod.config.js</p>
<p>在运行脚本的时候,指定不同环境的配置文件</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">&quot;scripts&quot;</span>: &#123;</span><br><span class="line">  <span class="string">&quot;build&quot;</span>: <span class="string">&quot;webpack --config ./config/webpack.prod.config.js&quot;</span>,</span><br><span class="line">  <span class="string">&quot;serve&quot;</span>: <span class="string">&quot;webpack serve --config ./config/webpack.dev.config.js&quot;</span></span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<p>在分离三个文件后，需要安装npm webpack-merge -D</p>
<p>然后由于加了个config目录，所以里面./路径有些要改成../，但是由于加载路径的不一样，有一些配置就不需要修改</p>
<h1 id="Vue-cLI"><a href="#Vue-cLI" class="headerlink" title="Vue-cLI"></a>Vue-cLI</h1><h2 id="脚手架介绍"><a href="#脚手架介绍" class="headerlink" title="脚手架介绍"></a>脚手架介绍</h2><p> 什么是Vue脚手架？</p>
<p>前面学习了如何通过webpack配置Vue的开发环境，但是在真实开发中我们不可能每一个项目从头来完成</p>
<p>所有的webpack配置，这样显示开发的效率会大大的降低；</p>
<p>所以在真实开发中，我们通常会使用脚手架来创建一个项目，Vue的项目我们使用的就是Vue的脚手架；</p>
<p>脚手架其实是建筑工程中的一个概念，在我们软件工程中也会将一些帮助我们搭建项目的工具称之为脚手架</p>
<p>Vue的脚手架就是Vue CLI： </p>
<p>CLI是Command-Line Interface, 翻译为命令行界面；</p>
<p>我们可以通过CLI选择项目的配置和创建出我们的项目；</p>
<p>Vue CLI已经内置了webpack相关的配置，我们不需要从零来配置；</p>
<h2 id="Vue-CLI的安装和使用"><a href="#Vue-CLI的安装和使用" class="headerlink" title="Vue-CLI的安装和使用"></a>Vue-CLI的安装和使用</h2><p><strong>安装Vue CLI:</strong> </p>
<p>我们是进行全局安装，这样在任何时候都可以通过vue的命令来创建项目</p>
<p>打开cmd:npm install @vue/cli -g</p>
<p>这样在电脑任何一个位置都可以使用脚手架</p>
<p><strong>升级Vue CLI：</strong> </p>
<p>如果是比较旧的版本，可以通过下面的命令来升级</p>
<p>npm update @vue/cli -g</p>
<p><strong>通过Vue的命令来创建项目:</strong></p>
<p>vue create 项目的名称</p>
<h2 id="项目的目录结构"><a href="#项目的目录结构" class="headerlink" title="项目的目录结构"></a>项目的目录结构</h2><p>node_modules:存放开发和生产的依赖</p>
<p>public：项目的一些资源</p>
<p>src:所有的源代码都在这里面编写</p>
<p>.browserslistrc:设置设配浏览器范围</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; 1% //市场份额大于％1</span><br><span class="line">last 2 versions  //最后两个版本</span><br><span class="line">not dead  //现在还在维护</span><br></pre></td></tr></table></figure>

<p>github搜索browserslistrc里面会找到很多配置</p>
<p>.gitignore:一些文件要忽略，不想上传到git</p>
<p>babel.config.js:针对vue自己写的一些babel预设</p>
<p>package-lock.json:记录package.json真实依赖的文件，还有再次安装的一些缓存</p>
<p>package.json:项目的管理文件</p>
<h1 id="Vue3组件化开发"><a href="#Vue3组件化开发" class="headerlink" title="Vue3组件化开发"></a>Vue3组件化开发</h1><h2 id="组件的嵌套"><a href="#组件的嵌套" class="headerlink" title="组件的嵌套"></a>组件的嵌套</h2><p>在之前的案例中，我们只是创建了一个组件App； </p>
<p>如果我们一个应用程序将所有的逻辑都放在一个组件中，那么这个组件就会变成非</p>
<p>常的臃肿和难以维护； </p>
<p>所以组件化的核心思想应该是对组件进行拆分，拆分成一个个小的组件； </p>
<p>再将这些组件组合嵌套在一起，最终形成我们的应用程序； </p>
<p>我们来分析一下下面代码的嵌套逻辑，假如我们将所有的代码逻辑都放到一个App.vue</p>
<p>组件中： 我们会发现，将所有的代码逻辑全部放到一个组件中，代码是非常的臃肿和难以维</p>
<p>护的。 </p>
<p>并且在真实开发中，我们会有更多的内容和代码逻辑，对于扩展性和可维护性来说</p>
<p>都是非常差的。</p>
<p>所以，在真实的开发中，我们会对组件进行拆分，拆分成一个个功能的小组件。</p>
<h2 id="使用vscode开发-vue文件"><a href="#使用vscode开发-vue文件" class="headerlink" title="使用vscode开发.vue文件"></a>使用vscode开发.vue文件</h2><p>本身vscode不认识,vue文件的，所以对应写的代码不会有高亮，需要插件，vetur，vue VSCode snippets，编辑.vue文件快捷键vbase-css可以快速打出生成的模板</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  export default &#123;</span><br><span class="line">    </span><br><span class="line">  &#125;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>vue3在template中可以不用加根div，因为有一个fragment内置了一个根</p>
<h2 id="组件的css作用域"><a href="#组件的css作用域" class="headerlink" title="组件的css作用域"></a>组件的css作用域</h2><p>在style有一个属性叫scoped作用域，防止样式污染，假设当前有一个App组件，在组件里面有</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;App&lt;/h2&gt;</span><br><span class="line">  &lt;hello-world&gt;&lt;/hello-world&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">h2 &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>当给App增加样式的时候，会给当前h2同级的hello-world组件一般是根元素也加上了样式，这叫样式穿透，同时hello-world也有自己的样式属性，这种在vue2一般不会有这也得问题，因为vue2会给模板套一个根元素div</p>
<p>解决方法：给hello-world加一个根元素</p>
<h2 id="组件的通信"><a href="#组件的通信" class="headerlink" title="组件的通信"></a>组件的通信</h2><p>比如App可能使用了多个Header，每个地方的Header展示的内容不同，那么我们就需要使用者传递给Header</p>
<p>一些数据，让其进行展示；</p>
<p>又比如我们在Main中一次性请求了Banner数据和ProductList数据，那么就需要传递给它们来进行展示；</p>
<p>也可能是子组件中发生了事件，需要由父组件来完成某些操作，那就需要子组件向父组件传递事件</p>
<h3 id="父子组件的通信"><a href="#父子组件的通信" class="headerlink" title="父子组件的通信"></a>父子组件的通信</h3><p>父组件传递给子组件：通过props属性； </p>
<p>子组件传递给父组件：通过$emit触发事件；</p>
<p><strong>什么是Props呢？</strong></p>
<p>Props是你可以在组件上注册一些自定义的attribute</p>
<p>父组件给这些attribute赋值，子组件通过attribute的名称获取到对应的值；</p>
<p> <strong>Props有两种常见的用法：</strong></p>
<p>方式一：字符串数组，数组中的字符串就是attribute的名称；</p>
<p>方式二：对象类型，对象类型我们可以在指定attribute名称的同时，指定它需要传递的类型、是否是必须的、默认值等等；</p>
<p>组件写法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;show-message message=&quot;哈哈哈&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message :message=&quot;message&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message :message=&quot;title.name&quot; :content=&quot;title.age&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message v-bind=&quot;title&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import showMessage from &quot;./showMessage.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    showMessage,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;heheh&quot;,</span><br><span class="line">      title: &#123;</span><br><span class="line">        name: &quot;hqz&quot;,</span><br><span class="line">        age: 22,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//showMessage.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line">  &#123;&#123; content &#125;&#125;</span><br><span class="line">  &#123;&#123; name &#125;&#125;</span><br><span class="line">  &#123;&#123; age &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: [&quot;message&quot;, &quot;content&quot;, &quot;name&quot;, &quot;age&quot;],</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>对象写法</p>
<p>数组用法中我们只能说明传入的attribute的名称，并不能对其进行任何形式的限制，接下来我们来看一下对象的写法是如何让我们的props变得更加完善的。 </p>
<p> 当使用对象语法的时候，我们可以对传入的内容限制更多：</p>
<p>比如指定传入的attribute的类型； </p>
<p>比如指定传入的attribute是否是必传的； </p>
<p>比如指定没有传入时，attribute的默认值；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;show-message message=&quot;哈哈哈&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message :message=&quot;message&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message v-bind=&quot;title&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import showMessage from &quot;./showMessage.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    showMessage,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;heheh&quot;,</span><br><span class="line">      title: &#123;</span><br><span class="line">        message: &quot;haha&quot;,</span><br><span class="line">        content: 22,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//showMessage.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &#123;&#123; message &#125;&#125;</span><br><span class="line">  &#123;&#123; content &#125;&#125;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  // props: [&quot;message&quot;, &quot;content&quot;],</span><br><span class="line">  props: &#123;</span><br><span class="line">    content: Number,</span><br><span class="line">    message: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      require: true, //这个数据是必须传的</span><br><span class="line">      //default:&quot;123&quot;如果没有传可以定义默认值</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>如果类型是一个对象的时候，默认值default必须写成一个函数，返回默认值，因为如果用这种写法一旦组件实例多了，然后很多个地方用info的默认值，但是这都是引用赋值的方式，如果一个地方的组件修改了props.info.name的值其他地方都会被修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">info: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">  <span class="attr">default</span>: &#123; <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span> &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>正确写法</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">info: &#123;</span><br><span class="line">  <span class="attr">type</span>: <span class="built_in">Object</span>,</span><br><span class="line">  <span class="function"><span class="title">default</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<p>因为这样在多次使用的时候会执行default函数，每次都会返回一个新的对象，这一样修改只会修改自己的</p>
<p><strong>那么type的类型都可以是哪些呢？</strong> </p>
<p>String,Number,Boolean,Array,Object,Date,Function,Symbol</p>
<p><strong>Prop 的大小写命名(camelCase vs kebab-case)</strong> </p>
<p>HTML 中的 attribute 名是大小写不敏感的，所以浏览器会把所有大写字符解释为小写字符； </p>
<p>这意味着当你使用 DOM 中的模板时，camelCase (驼峰命名法) 的 prop 名需要使用其等价的 kebab-case (短横线分隔命名) 命名；</p>
<h4 id="非props的Attribute"><a href="#非props的Attribute" class="headerlink" title="非props的Attribute"></a>非props的Attribute</h4><p><strong>什么是非Prop的Attribute呢？</strong></p>
<p>当我们传递给一个组件某个属性，但是该属性并没有定义对应的props或者emits时，就称之为 非Prop的Attribute； </p>
<p>常见的包括class、style、id属性等；</p>
<p> <strong>Attribute继承</strong></p>
<p>当组件有单个根节点时，非Prop的Attribute将自动添加到根节点的Attribute中</p>
<p>意思就是这样写class会被添加到根节点div上，这叫非props的Attribute继承</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;show-message message=&quot;哈哈哈&quot; class=&quot;hqz&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message :message=&quot;message&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">  &lt;show-message v-bind=&quot;title&quot;&gt;&lt;/show-message&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    &#123;&#123; content &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h4 id="禁用Attribute继承和多根节点"><a href="#禁用Attribute继承和多根节点" class="headerlink" title="禁用Attribute继承和多根节点"></a>禁用Attribute继承和多根节点</h4><p>禁用attribute继承的常见情况是需要将attribute应用于根元素之外的其他元素； </p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">inheritAttrs: false,</span><br></pre></td></tr></table></figure>

<p>我们可以通过 $attrs来访问所有的 非props的attribute； </p>
<p>在禁用根节点继承后，通过这种写法可以让class继承到别的节点</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 :class=&quot;$attrs.class&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; content &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>

<p>当里面的非props属性过多时假设还有id，可以通过v-bind直接继承多个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 v-bind=&quot;$attrs&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; content &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<p>当有多个根的时候,这样会报警告，因为不知道怎么去继承，这时候要通过$attrs.id手动指定到那个上</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;mult-root-element id=&quot;aaa&quot;&gt;&lt;/mult-root-element&gt;</span><br></pre></td></tr></table></figure>



<p>这样就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;h2 :id=&quot;$attrs.id&quot;&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">  &lt;h2&gt;MultRootElement&lt;/h2&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h3 id="子组件传递给父组件"><a href="#子组件传递给父组件" class="headerlink" title="子组件传递给父组件"></a>子组件传递给父组件</h3><p><strong>什么情况下子组件需要传递内容到父组件呢？</strong></p>
<p>当子组件有一些事件发生的时候，比如在组件中发生了点击，父组件需要切换内容；</p>
<p>子组件有一些内容想要传递给父组件的时候；</p>
<p><strong>我们如何完成上面的操作呢？</strong></p>
<p>首先，我们需要在子组件中定义好在某些情况下触发的事件名称； </p>
<p>其次，在父组件中以v-on的方式传入要监听的事件名称，并且绑定到对应的方法中；</p>
<p>最后，在子组件中发生某个事件的时候，根据事件名称触发对应的事件</p>
<h3 id="非父子组件的通信"><a href="#非父子组件的通信" class="headerlink" title="非父子组件的通信"></a>非父子组件的通信</h3><p>在开发中，我们构建了组件树之后，除了父子组件之间的通信之外，还会有非父子组件之间的通信。</p>
<p><strong>这里我们主要讲两种方式：</strong></p>
<p>Provide/Inject； </p>
<p>Mitt全局事件总线；</p>
<h4 id="Provide和Inject（主要是子孙）"><a href="#Provide和Inject（主要是子孙）" class="headerlink" title="Provide和Inject（主要是子孙）"></a>Provide和Inject（主要是子孙）</h4><p>Provide/Inject用于<strong>非父子组件之间共享数据</strong>： </p>
<p>比如有一些深度嵌套的组件，子组件想要获取父组件的部分内</p>
<p>容； </p>
<p>在这种情况下，如果我们仍然将props沿着组件链逐级传递下</p>
<p>去，就会非常的麻烦；</p>
<p>对于这种情况下，<strong>我们可以使用 Provide 和 Inject ：</strong> </p>
<p>无论层级结构有多深，父组件都可以作为其所有子组件的依赖提供者； </p>
<p>父组件有一个 provide 选项来提供数据；子组件有一个 inject 选项来开始使用这些数据；</p>
<p>实际上，你可以将依赖注入看作是“<strong>long range props”</strong>，除了：父组件不需要知道哪些子组件使用它 provide 的 property子组件不需要知道 inject 的 property 来自哪里</p>
<p>比如现在有</p>
<p>App.vue—&gt;Home.vue—&gt;HomeContent.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home&gt;&lt;/home&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  provide: &#123;</span><br><span class="line">    name: &quot;hqz&quot;,</span><br><span class="line">    age: 18,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//Home.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home-content&gt;&lt;/home-content&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HomeContent from &quot;./HomeContent.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HomeContent,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//HomeContent.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;我是HomeContent &#123;&#123; name &#125;&#125;-&#123;&#123; age &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inject: [&quot;name&quot;, &quot;age&quot;],</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>但是在真实开发中一般值都放在data里面，假设Provide要拿到data里面的值，但是不能用this，所以有另外一种函数写法，返回要传递的值，这样就能通过this拿到data里面的值</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home&gt;&lt;/home&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  provide() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">      age: 18,</span><br><span class="line">      length: this.names.length,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      names: [&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">  &lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;我是HomeContent &#123;&#123; name &#125;&#125;-&#123;&#123; age &#125;&#125;-&#123;&#123; length &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  inject: [&quot;name&quot;, &quot;age&quot;, &quot;length&quot;],</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>那么如果把data里面数组长度改了，那么provide拿到的长度也会跟着改变吗，答案是不会，这是因为当前给length赋值时，它是一次性赋值的，就原来如果是3，那么它是直接把3赋值给了length，当发生改变的时候，不会把一个新的值再给他传过去，但是开发可能会遇到这种需要，当长度改变时要做出响应，那么需要把那个值变成响应式，原理就是当内部值发生改变，这里就会重新计算，返回一个新的值，用一个computed的函数括号里面包裹箭头函数返回一个值，但是报警告是一个ref对象，在之前界面上显示的是Proxy对象要在显示的地方加.value，但是浏览器给了警告，ref对象在下一个小版本适应某种行为，现在不用加点.value就可以正常显示了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home&gt;&lt;/home&gt;</span><br><span class="line">    &lt;button @click=&quot;addName&quot;&gt;改变长度&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  provide() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">      age: 18,</span><br><span class="line">      length: computed(() =&gt; this.names.length),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      names: [&quot;aaa&quot;, &quot;bbb&quot;, &quot;ccc&quot;],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    addName() &#123;</span><br><span class="line">      this.names.push(&quot;why&quot;);</span><br><span class="line">      console.log(this.names);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="全局事件总线mitt库"><a href="#全局事件总线mitt库" class="headerlink" title="全局事件总线mitt库"></a>全局事件总线mitt库</h3><p>Vue3从实例中移除了 $on、$off 和 $once 方法，所以我们如果希望<strong>继续使用全局事件总线，要通过第三方的库</strong>： </p>
<p>Vue3官方有推荐一些库，例如 mitt 或 tiny-emitter； </p>
<p>这里我们主要讲解一下mitt库的使用；</p>
<p>首先，我们需要先安装这个库： npm install mitt</p>
<p>其次，我们可以封装一个工具eventbus.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mitt <span class="keyword">from</span> <span class="string">&#x27;mitt&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//返回一个对象</span></span><br><span class="line"><span class="keyword">const</span> emitter = mitt();</span><br><span class="line"><span class="comment">//mitt()这个函数也可以创建多个对象</span></span><br><span class="line"><span class="comment">// export const emitter1 = mitt();</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> emitter;</span><br></pre></td></tr></table></figure>



<p>现在组件是这样App.vue—&gt;Home.vue—&gt;HomeContent.vue</p>
<p>​                                ⬇</p>
<p>​                            About.vue</p>
<p>About.vue和他们没有连接状态，比如现在About发生了一个事件，我们在HomeContent.vue里面作一个监听</p>
<p>在About里面有一个点击事件</p>
<p>如果我要在HomeContent里面做出相应，可以利用刚刚封装的eventbus.js里面的emitter这个对象发射出去一个事件，通过发射这个事件别人就可以做出响应了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;btnClick&quot;&gt;按钮点击&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import emitter from &quot;./utils/eventbus&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    btnClick() &#123;</span><br><span class="line">      console.log(&quot;about的点击&quot;);</span><br><span class="line">      emitter.emit(&quot;hqz&quot;, &#123; name: &quot;hqz&quot;, age: 18 &#125;);</span><br><span class="line">      emitter.emit(&quot;kobe&quot;, &#123; name: &quot;kobe&quot;, age: 18 &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>那么这个HomeContent组件一旦创建好，就需要开启监听，可以利用生命周期</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import emitter from &quot;./utils/eventbus&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    emitter.on(&quot;hqz&quot;, (info) =&gt; console.log(info));</span><br><span class="line">    emitter.on(&quot;kobe&quot;, (info) =&gt; console.log(info));</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>整个逻辑就是利用emitter对象在About发射 一个事件在HomeContent作出监听</p>
<p>也可以进行所有参数都监听</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import emitter from &quot;./utils/eventbus&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    emitter.on(&quot;hqz&quot;, (info) =&gt; console.log(info));</span><br><span class="line">    emitter.on(&quot;kobe&quot;, (info) =&gt; console.log(info));</span><br><span class="line">    //第一个参数是事件的类型，第二个才是传过来的参数</span><br><span class="line">    emitter.on(&quot;*&quot;, (type, info) =&gt; &#123;</span><br><span class="line">      console.log(&quot;* listener:&quot;, type, info);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h4 id="mitt的事件取消"><a href="#mitt的事件取消" class="headerlink" title="mitt的事件取消"></a>mitt的事件取消</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//取消emitter中所有的监听</span></span><br><span class="line">emitter.all.clear()</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//定义一个函数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">onFoo</span>(<span class="params"></span>)</span>&#123;&#125;</span><br><span class="line">emitter.on(<span class="string">&quot;foo&quot;</span>,onFoo)<span class="comment">//监听</span></span><br><span class="line">emitter.off(<span class="string">&quot;foo&quot;</span>,OnFoo)<span class="comment">//取消监听</span></span><br></pre></td></tr></table></figure>



<h2 id="插槽Slot"><a href="#插槽Slot" class="headerlink" title="插槽Slot"></a>插槽Slot</h2><p><strong>在开发中，我们会经常封装一个个可复用的组件：</strong></p>
<p>前面我们会通过props传递给组件一些数据，让组件来进行展示；</p>
<p>但是为了让这个组件具备更强的通用性，我们不能将组件中的内容限制为固定的div、span等等这些元素；</p>
<p>比如某种情况下我们使用组件，希望组件显示的是一个按钮，某种情况下我们使用组件希望显示的是一张图片； </p>
<p>我们应该让使用者可以决定某一块区域到底存放什么内容和元素；  </p>
<p><strong>举个例子：假如我们定制一个通用的导航组件 - NavBar</strong></p>
<p>这个组件分成三块区域：左边-中间-右边，每块区域的内容是不固定；</p>
<p>左边区域可能显示一个菜单图标，也可能显示一个返回按钮，可能什么都不显示；</p>
<p>中间区域可能显示一个搜索框，也可能是一个列表，也可能是一个标题，等等；</p>
<p>右边可能是一个文字，也可能是一个图标，也可能什么都不显示；</p>
<p><strong>这个时候我们就可以来定义插槽slot：</strong> </p>
<p>插槽的使用过程其实是抽取共性、预留不同； </p>
<p>我们会将共同的元素、内容依然在组件内进行封装；</p>
<p>同时会将不同的元素使用slot作为占位，让外部决定到底显示什么样的元素；</p>
<p><strong>如何使用slot呢？</strong></p>
<p>Vue中将 <slot> 元素作为承载分发内容的出口；</p>
<p>在封装组件中，使用特殊的元素<slot>就可以为封装组件开启一个插槽； </p>
<p>该插槽插入什么内容取决于父组件如何使用；</p>
<h3 id="插槽的基本使用"><a href="#插槽的基本使用" class="headerlink" title="插槽的基本使用"></a>插槽的基本使用</h3><p>我们一个组件MySlotCpn.vue：该组件中有一个插槽，我们可以在插槽中放入需要显示的内容；</p>
<p>我们在App.vue中使用它们：我们可以插入普通的内容、html元素、组件元素，都可以是可以的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;my-slot-cpn&gt;</span><br><span class="line">      &lt;button&gt;我是按钮&lt;/button&gt;</span><br><span class="line">    &lt;/my-slot-cpn&gt;</span><br><span class="line"></span><br><span class="line">    &lt;my-slot-cpn&gt;</span><br><span class="line">      &lt;my-button&gt;&lt;/my-button&gt;</span><br><span class="line">    &lt;/my-slot-cpn&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import MySlotCpn from &quot;./MySlotCpn.vue&quot;;</span><br><span class="line">import MyButton from &quot;./MyButton.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    MySlotCpn,</span><br><span class="line">    MyButton,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="插槽的默认值"><a href="#插槽的默认值" class="headerlink" title="插槽的默认值"></a>插槽的默认值</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"> &lt;my-slot-cpn&gt; &lt;/my-slot-cpn&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;组件开始&lt;/h2&gt;</span><br><span class="line">    &lt;slot&gt;我是默认内容&lt;/slot&gt;</span><br><span class="line">    &lt;h2&gt;组件结束&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<h4 id="插入多个内容"><a href="#插入多个内容" class="headerlink" title="插入多个内容"></a>插入多个内容</h4><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;my-slot-cpn&gt;</span><br><span class="line">  &lt;h2&gt;哈哈&lt;/h2&gt;</span><br><span class="line">  &lt;button&gt;我是按钮&lt;/button&gt;</span><br><span class="line">  &lt;h2&gt;嘻嘻嘻&lt;/h2&gt;</span><br><span class="line">&lt;/my-slot-cpn&gt;</span><br></pre></td></tr></table></figure>

<p>这样会都替换掉</p>
<h3 id="具名插槽的使用"><a href="#具名插槽的使用" class="headerlink" title="具名插槽的使用"></a>具名插槽的使用</h3><p>事实上，我们希望达到的效果是插槽对应的显示，这个时候我们就可以使用 <strong>具名插槽：</strong></p>
<p>具名插槽顾名思义就是给插槽起一个名字，<slot> 元素有一个特殊的 attribute：name； </p>
<p>一个不带 name 的slot，会带有隐含的名字 default；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--App.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;nav-bar&gt;</span><br><span class="line">      &lt;template v-slot:left&gt;&lt;button&gt;左边的按钮&lt;/button&gt;&lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:center&gt;&lt;h2&gt;我是标题&lt;/h2&gt;&lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:right&gt;&lt;i&gt;右边的i元素&lt;/i&gt;&lt;/template&gt;</span><br><span class="line">    &lt;/nav-bar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import NavBar from &quot;./NavBar.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    NavBar,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--NavBar.vue--&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;nav-bar&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;slot name=&quot;default&quot;&gt;&lt;/slot&gt; --&gt;</span><br><span class="line">    &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;left&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;center&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;center&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;right&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.nav-bar &#123;</span><br><span class="line">  display: flex;</span><br><span class="line">&#125;</span><br><span class="line">.left,</span><br><span class="line">.center,</span><br><span class="line">.right &#123;</span><br><span class="line">  height: 80px;</span><br><span class="line">&#125;</span><br><span class="line">.left,</span><br><span class="line">.right &#123;</span><br><span class="line">  width: 80px;</span><br><span class="line">  background-color: blue;</span><br><span class="line">&#125;</span><br><span class="line">.center &#123;</span><br><span class="line">  flex: 1;</span><br><span class="line">  background: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h4 id="动态插槽名"><a href="#动态插槽名" class="headerlink" title="动态插槽名"></a>动态插槽名</h4><p><strong>什么是动态插槽名呢？</strong></p>
<p>目前我们使用的插槽名称都是固定的；</p>
<p>比如 v-slot:left、v-slot:center等等；</p>
<p>我们可以通过 v-slot:[dynamicSlotName]方式动态绑定一个名称；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;nav-bar :name=&quot;name&quot;&gt;</span><br><span class="line">      &lt;template v-slot:left&gt;&lt;button&gt;左边的按钮&lt;/button&gt;&lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:center&gt;&lt;h2&gt;我是标题&lt;/h2&gt;&lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:right&gt;&lt;i&gt;右边的i元素&lt;/i&gt;&lt;/template&gt;</span><br><span class="line">      &lt;template v-slot:[name]&gt;&lt;i&gt;我是hqz&lt;/i&gt;&lt;/template&gt;</span><br><span class="line">    &lt;/nav-bar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import NavBar from &quot;./NavBar.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    NavBar,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;nav-bar&quot;&gt;</span><br><span class="line">    &lt;!-- &lt;slot name=&quot;default&quot;&gt;&lt;/slot&gt; --&gt;</span><br><span class="line">    &lt;div class=&quot;left&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;left&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;center&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;center&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;right&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;right&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;addition&quot;&gt;</span><br><span class="line">      &lt;slot :name=&quot;name&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  // data() &#123;</span><br><span class="line">  //   return &#123;</span><br><span class="line">  //     name: &quot;hqz&quot;,</span><br><span class="line">  //   &#125;;</span><br><span class="line">  // &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h4 id="具名插槽使用的缩写"><a href="#具名插槽使用的缩写" class="headerlink" title="具名插槽使用的缩写"></a>具名插槽使用的缩写</h4><p><strong>具名插槽使用的时候缩写：</strong></p>
<p>跟 v-on 和 v-bind 一样，v-slot 也有缩写； </p>
<p>即把参数之前的所有内容 (v-slot:) 替换为字符 #</p>
<h3 id="插槽的作用域"><a href="#插槽的作用域" class="headerlink" title="插槽的作用域"></a>插槽的作用域</h3><p><strong>在Vue中有渲染作用域的概念：</strong></p>
<p>父级模板里的所有内容都是在父级作用域中编译的；</p>
<p>子模板里的所有内容都是在子作用域中编译的；</p>
<p>如何理解这句话呢？我们来看一个案例：</p>
<p>在我们的案例中ChildCpn自然是可以让问自己作用域中的title内容的；</p>
<p>但是在App中，是访问不了ChildCpn中的内容的，因为它们是跨作用域的访问； </p>
<p>就是父组件里面在要用插槽的时候不能用子组件里面的数据</p>
<p><strong>下面的一个案例：</strong></p>
<p>1.在App.vue中定义好数据</p>
<p>2.传递给ShowNames组件中</p>
<p>3.ShowNames组件中遍历names数据</p>
<p>4.定义插槽的prop</p>
<p>5.通过v-slot:default的方式获取到slot的props</p>
<p>6.使用slotProps中的item和index</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><span class="line">/App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- &lt;child-cpn&gt;&lt;/child-cpn&gt; --&gt;</span><br><span class="line">    &lt;show-names :names=&quot;names&quot;&gt;</span><br><span class="line">      &lt;template v-slot:hqz=&quot;slotProps&quot;&gt;</span><br><span class="line">        &lt;button&gt;&#123;&#123; slotProps.item &#125;&#125;---&#123;&#123; slotProps.index &#125;&#125;&lt;/button&gt;</span><br><span class="line">      &lt;/template&gt;</span><br><span class="line">    &lt;/show-names&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import ChildCpn from &quot;./ChildCpn.vue&quot;;</span><br><span class="line">import ShowNames from &quot;./ShowNames.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    ChildCpn,</span><br><span class="line">    ShowNames,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      names: [&quot;hqz&quot;, &quot;kobe&quot;, &quot;hly&quot;, &quot;aini&quot;],</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">//ShowName.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;template v-for=&quot;(item, index) in names&quot; :key=&quot;item&quot;&gt;</span><br><span class="line">      &lt;slot name=&quot;hqz&quot; :item=&quot;item&quot; :index=&quot;index&quot;&gt;&lt;/slot&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    names: &#123;</span><br><span class="line">      type: Array,</span><br><span class="line">      default: [],</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>这个案例就是因为父组件不能获得子组件的值，那么在这个案例，我在父组件里面定义了一个数组，我要通过子组件渲染出来，通过props给子组件传递数组，那么在子组件里面通过v-for拿到数组并且渲染很简单，但是如果我想指定我通过哪个标签把它渲染出来，例如案例里我用button渲染，意思就是我要用插槽的方式，在父组件里面使用我想用的标签，把这个数组渲染出来，这时候就可以通过在子组件的插槽里面拿到想要渲染的数据，通过v-slot:default=”slotProps”这个可以获取slot的props，然后通过slotProps.的方式拿到渲染的数据</p>
<p>当是默认插槽的时候v-slot:default=”slotProps”的时候，就可以像下面这样写，把template给省略掉，官方叫独占默认插槽的缩写,意思就是在ShowName.vue里面不能再有<slot name="hqz"></slot>，同时App.vue里面要使用这个插槽给他内容的话，这样就不能这么写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;show-names :names=&quot;names&quot; v-slot:name=&quot;slotProps&quot;&gt;</span><br><span class="line">    &lt;button&gt;&#123;&#123; slotProps.item &#125;&#125;---&#123;&#123; slotProps.index &#125;&#125;&lt;/button&gt;</span><br><span class="line">&lt;/show-names&gt;</span><br></pre></td></tr></table></figure>



<h2 id="动态组件的实现"><a href="#动态组件的实现" class="headerlink" title="动态组件的实现"></a>动态组件的实现</h2><p><strong>动态组件是使用</strong> <strong>component 组件</strong>，通过一个特殊的attribute is来实现：</p>
<p><strong>如果是动态组件我们可以给它们传值和监听事件吗？</strong>也是一样的；只是我们需要将属性和监听事件放到component上来使用；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button</span><br><span class="line">      v-for=&quot;tab in tabs&quot;</span><br><span class="line">      @click=&quot;TabClick(tab)&quot;</span><br><span class="line">      :class=&quot;&#123; active: currentTab == tab &#125;&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &#123;&#123; tab &#125;&#125;</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 2.动态组件实现 --&gt;</span><br><span class="line">    &lt;component :is=&quot;currentTab&quot; name=&quot;hqz&quot; :age=&quot;18&quot; @pageClick=&quot;pageClick&quot;&gt;</span><br><span class="line">    &lt;/component&gt;</span><br><span class="line">    &lt;!-- 1.v-if的判断实现 --&gt;</span><br><span class="line">    &lt;!-- &lt;template v-if=&quot;currentTab == &#x27;home&#x27;&quot;&gt;</span><br><span class="line">      &lt;home&gt;&lt;/home&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-if=&quot;currentTab == &#x27;category&#x27;&quot;&gt;</span><br><span class="line">      &lt;category&gt;&lt;/category&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">    &lt;template v-if=&quot;currentTab == &#x27;about&#x27;&quot;&gt;</span><br><span class="line">      &lt;about&gt;&lt;/about&gt;</span><br><span class="line">    &lt;/template&gt; --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./pages/Home.vue&quot;;</span><br><span class="line">import Category from &quot;./pages/Category.vue&quot;;</span><br><span class="line">import About from &quot;./pages/About.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    About,</span><br><span class="line">    Category,</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      tabs: [&quot;home&quot;, &quot;about&quot;, &quot;category&quot;],</span><br><span class="line">      currentTab: &quot;home&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    TabClick(tab) &#123;</span><br><span class="line">      this.currentTab = tab;</span><br><span class="line">    &#125;,</span><br><span class="line">    pageClick() &#123;</span><br><span class="line">      console.log(&quot;内部发生了点击&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.active &#123;</span><br><span class="line">  color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">//home.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div @click=&quot;divClick&quot;&gt;我是home &#123;&#123; name &#125;&#125;--&#123;&#123; age &#125;&#125;&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    name: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">      default: &quot;&quot;,</span><br><span class="line">    &#125;,</span><br><span class="line">    age: &#123;</span><br><span class="line">      type: Number,</span><br><span class="line">      default: 0,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&quot;pageClick&quot;],</span><br><span class="line">  methods: &#123;</span><br><span class="line">    divClick() &#123;</span><br><span class="line">      this.$emit(&quot;pageClick&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>





<h2 id="Keep-alive"><a href="#Keep-alive" class="headerlink" title="Keep-alive"></a>Keep-alive</h2><p><strong>我们先对之前的案例中About组件进行改造：</strong></p>
<p>在其中增加了一个按钮，点击可以递增的功能；</p>
<p> 比如我们将counter点到10，那么在切换到home再切换回来about时，<strong>状态是否可以保持呢？</strong></p>
<p>答案是否定的；</p>
<p>这是因为默认情况下，我们在切换组件后，about组件会被销毁掉，再次回来时会重新创建组件； </p>
<p>但是，在开发中某些情况我们希望继续保持组件的状态，而不是销毁掉，这个时候我们就可以<strong>使用一个内置组件：</strong></p>
<p><strong>keep-alive</strong>。</p>
<p> <strong>keep-alive有一些属性：</strong></p>
<p>include - string | RegExp | Array。只有名称匹配的组件会被缓存；</p>
<p>exclude - string | RegExp | Array。任何名称匹配的组件都不会被缓存；</p>
<p>max - number | string。最多可以缓存多少组件实例，一旦达到这个数字，那么缓存组件中最近没有被访问的实例会被销毁；</p>
<p><strong>include 和 exclude prop 允许组件有条件地缓存：</strong></p>
<p>二者都可以用逗号分隔字符串、正则表达式或一个数组来表示；</p>
<p>匹配首先检查组件自身的 name 选项；</p>
<p> 给组件包裹一个<keep-alive></keep-alive>默认下组件都是缓存的，给它配置属性，例子里给about配置了属性，这样就about组件会被缓存，然后要给每一个组件添加name</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">   //App.vue</span><br><span class="line">   &lt;keep-alive include=&quot;about&quot;&gt;</span><br><span class="line">      &lt;component :is=&quot;currentTab&quot; name=&quot;hqz&quot; :age=&quot;18&quot; @pageClick=&quot;pageClick&quot;&gt;</span><br><span class="line">      &lt;/component</span><br><span class="line">    &gt;&lt;/keep-alive&gt;</span><br><span class="line">    </span><br><span class="line">    &lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    我是about</span><br><span class="line">    &lt;button @click=&quot;counter++&quot;&gt;&#123;&#123; counter &#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">//about.vue</span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;about&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter: 0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h3 id="动态组件的生命周期"><a href="#动态组件的生命周期" class="headerlink" title="动态组件的生命周期"></a>动态组件的生命周期</h3><p>动态组件在保持状态的时候，意味着来回切换组件不会被销毁，这就说明生命周期里面created只会被执行一次，不会执行unmount,切换的时候不会被执行,但是有可能开发想知道离开组件的时候，要在离开的时候保存一些状态执行一些操作，但是unmount不会被执行，所有vue提供了另外两个针对缓存组件的生命周期</p>
<p>对于缓存的组件来说，再次进入时，我们是<strong>不会执行created或者mounted等生命周期函数</strong>的：</p>
<p>但是有时候我们确实希望监听到何时重新进入到了组件，何时离开了组件；</p>
<p>这个时候我们可以使用activated 和 deactivated 这两个生命周期钩子函数来监听；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    我是about</span><br><span class="line">    &lt;button @click=&quot;counter++&quot;&gt;&#123;&#123; counter &#125;&#125;&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  name: &quot;about&quot;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter: 0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  activated() &#123;</span><br><span class="line">    console.log(&quot;about activated&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  deactivated() &#123;</span><br><span class="line">    console.log(&quot;about: deactivated&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="Webpack的代码分包"><a href="#Webpack的代码分包" class="headerlink" title="Webpack的代码分包"></a>Webpack的代码分包</h2><p>默认情况下，在构建整个组件树的过程中，因为组件和组件之间是通过模块化直接依赖的，那么webpack在打包时就会将组</p>
<p>件模块打包到一起（比如一个app.js文件中）；</p>
<p>这个时候随着项目的不断庞大，app.js文件的内容过大，会造成首屏的渲染速度变慢； </p>
<p><strong>打包时，代码的分包：</strong></p>
<p>所以，对于一些不需要立即使用的组件，我们可以单独对它们进行拆分，拆分成一些小的代码块chunk.js； </p>
<p>这些chunk.js会在需要时从服务器加载下来，并且运行代码，显示对应的内容；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./12_异步组件的使用/App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//通过import函数导出的模块，后续webpack对其进行打包的时候会进行分包操作</span></span><br><span class="line"><span class="keyword">import</span>(<span class="string">&quot;./12_异步组件的使用/utils/math&quot;</span>).then(<span class="function"><span class="params">res</span> =&gt;</span> &#123;</span><br><span class="line">  <span class="built_in">console</span>.log(res.sum(<span class="number">23</span>, <span class="number">30</span>));</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="vue中实现异步组件"><a href="#vue中实现异步组件" class="headerlink" title="vue中实现异步组件"></a>vue中实现异步组件</h2><p>如果我们的项目过大了，对于<strong>某些组件</strong>我们希望<strong>通过异步的方式来进行加载</strong>（目的是可以对其进行分包处理），那</p>
<p>么Vue中给我们提供了一个函数：<strong>defineAsyncComponent</strong>。 </p>
<p> <strong>defineAsyncComponent接受两种类型的参数：</strong></p>
<p>类型一：工厂函数，该工厂函数需要返回一个Promise对象；</p>
<p>类型二：接受一个对象类型，对异步函数进行配置； </p>
<p> <strong>工厂函数类型一的写法</strong></p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; defineAsyncComponent &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;./Home.vue&quot;</span>;</span><br><span class="line"><span class="comment">// import AsyncCategory from &quot;./AsyncCategory.vue&quot;;</span></span><br><span class="line"><span class="keyword">const</span> AsyncCategory = defineAsyncComponent(<span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./AsyncCategory.vue&quot;</span>));</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="attr">components</span>: &#123;</span><br><span class="line">    AsyncCategory,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>写法二：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; defineAsyncComponent &#125; from &quot;vue&quot;;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">import Loading from &quot;./Loading.vue&quot;;</span><br><span class="line"></span><br><span class="line">const AsyncCategory = defineAsyncComponent(&#123;</span><br><span class="line">  loader: () =&gt; import(&quot;./AsyncCategory.vue&quot;),</span><br><span class="line">  loadingComponent: Loading,</span><br><span class="line">  // errorComponent,</span><br><span class="line">  //delay:2000//在显示LoadingComponent组件之前，等待多少时间</span><br><span class="line">  //onError</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>



<h3 id="异步组件和suspense的使用"><a href="#异步组件和suspense的使用" class="headerlink" title="异步组件和suspense的使用"></a>异步组件和suspense的使用</h3><p>注：<strong>uspense显示的是一个实验性的特性，API随时可能会修改。</strong> </p>
<p> <strong>Suspense是一个内置的全局组件，该组件有两个插槽：</strong></p>
<p>default：如果default可以显示，那么显示default的内容； </p>
<p>fallback：如果default无法显示，那么会显示fallback插槽的内容；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;suspense&gt;</span><br><span class="line">  &lt;template #default&gt;</span><br><span class="line">    &lt;async-category&gt;&lt;/async-category&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line"></span><br><span class="line">  &lt;template #fallback&gt;</span><br><span class="line">    &lt;loading&gt;&lt;/loading&gt;</span><br><span class="line">  &lt;/template&gt;</span><br><span class="line">&lt;/suspense&gt;</span><br></pre></td></tr></table></figure>



<h2 id="refs的使用"><a href="#refs的使用" class="headerlink" title="$refs的使用"></a>$refs的使用</h2><p>某些情况下，我们在组件中想要<strong>直接获取到元素对象或者子组件实例</strong>： </p>
<p>在Vue开发中我们是不推荐进行DOM操作的；</p>
<p>这个时候，我们可以给元素或者组件绑定一个ref的attribute属性； </p>
<p> <strong>组件实例有一个$refs属性：</strong></p>
<p>它一个对象Object，持有注册过 ref attribute 的所有 DOM 元素和组件实例。</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title&quot;&gt;哈哈&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;btnClick&quot;&gt;获取元素&lt;/button&gt;</span><br><span class="line">    &lt;nav-bar ref=&quot;navBar&quot;&gt;&lt;/nav-bar&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import NavBar from &quot;./NavBar.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    NavBar,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    btnClick() &#123;</span><br><span class="line">      console.log(this.$refs.title);</span><br><span class="line">      console.log(this.$refs.navBar.message);</span><br><span class="line">      this.$refs.navBar.sayHello();</span><br><span class="line">      console.log(this.$refs.navBar.$el);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//NavBar.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;NavBar&lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;我是navBar里面的消息&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">      console.log(&quot;hello&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p><strong>我们可以通过$parent来访问父元素。</strong></p>
<p>NavBar.vue的实现：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;NavBar&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;getParentAndRoot&quot;&gt;获取父组件和根组件&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;我是navBar里面的消息&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    sayHello() &#123;</span><br><span class="line">      console.log(&quot;hello&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    getParentAndRoot() &#123;</span><br><span class="line">      console.log(this.$parent);</span><br><span class="line">      console.log(this.$root);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<p>这里我们也可以通过$root来实现，因为App是我们的根组件；</p>
<h2 id="生命周期"><a href="#生命周期" class="headerlink" title="生命周期"></a>生命周期</h2><h3 id="什么是生命周期呢？"><a href="#什么是生命周期呢？" class="headerlink" title="什么是生命周期呢？"></a>什么是生命周期呢？</h3><p>每个组件都可能会经历从创建、挂载、更新、卸载等一系列的过程； </p>
<p>在这个过程中的某一个阶段，用于可能会想要添加一些属于自己的代码逻辑（比如组件创建完后就请求一些服务器数据）；</p>
<p>但是我们如何可以知道目前组件正在哪一个过程呢？Vue给我们提供了组件的生命周期函数； </p>
<p> <strong>生命周期函数：</strong></p>
<p>生命周期函数是一些钩子函数，在某个时间会被Vue源码内部进行回调</p>
<p>通过对生命周期函数的回调，我们可以知道目前组件正在经历什么阶段 </p>
<p>那么我们就可以在该生命周期中编写属于自己的逻辑代码了；</p>
<h3 id="生命周期的流程"><a href="#生命周期的流程" class="headerlink" title="生命周期的流程"></a>生命周期的流程</h3><p><img src="C:\Users\黄千智\Desktop\vue3学习\image-20210817155933084.png" alt="image-20210817155933084"><img src="C:\Users\黄千智\Desktop\vue3学习\image-20210817160001720.png" alt="image-20210817160001720"></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;template v-if=&quot;isshow&quot;&gt;</span><br><span class="line">      &lt;home&gt;&lt;/home&gt;</span><br><span class="line">    &lt;/template&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//Home.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;changeMessage&quot;&gt;修改message&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    changeMessage() &#123;</span><br><span class="line">      this.message = &quot;home&quot;;</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;hello&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeCreate() &#123;</span><br><span class="line">    console.log(&quot;home: beforeCreate&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(&quot;home: create&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeMount() &#123;</span><br><span class="line">    console.log(&quot;home: beforeMount&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    console.log(&quot;home: mounted&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUnmount() &#123;</span><br><span class="line">    console.log(&quot;home: beforeUnmount&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  Unmounted() &#123;</span><br><span class="line">    console.log(&quot;home: unmounted&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  beforeUpdate() &#123;</span><br><span class="line">    console.log(&quot;home: beforeUpdate&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">  updated() &#123;</span><br><span class="line">    console.log(&quot;home: updated&quot;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="组件的v-model"><a href="#组件的v-model" class="headerlink" title="组件的v-model"></a>组件的v-model</h2><p>前面我们在input中可以使用v-model来完成双向绑定：</p>
<p>这个时候往往会非常方便，因为v-model默认帮助我们完成了两件事；</p>
<p>v-bind:value的数据绑定和@input的事件监听； </p>
<p>n如果我们现在封装了一个组件，其他地方在使用这个组件时，是否也可以使用v-model来同时完成这两个功能呢？</p>
<p>也是可以的，vue也支持在组件上使用v-model； </p>
<p><strong>当我们在组件上使用的时候，等价于如下的操作：</strong></p>
<p>我们会发现和input元素不同的只是属性的名称和事件触发的名称而已；</p>
<p><strong>那么，为了我们的HyInput组件可以正常的工作，这个组件内的 <input> 必须：</strong></p>
<p>将其 value attribute 绑定到一个名叫 modelValue 的 prop 上；</p>
<p>在其 input 事件被触发时，将新的值通过自定义的 update:modelValue 事件抛出；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line">//HyInput</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 默认绑定和事件处理 --&gt;</span><br><span class="line">    &lt;!-- &lt;button @click=&quot;btnClick&quot;&gt;点击&lt;/button&gt; --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 通过input --&gt;</span><br><span class="line">    &lt;!-- &lt;input type=&quot;text&quot; :value=&quot;modelValue&quot; @input=&quot;btnClick&quot; /&gt; --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 绑定到props里面是不对的，不要乱修改props里面的值 --&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;value&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    modelValue: String,</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&quot;update:model-value&quot;],</span><br><span class="line">  computed: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      set(value) &#123;</span><br><span class="line">        this.$emit(&quot;update:model-value&quot;, value);</span><br><span class="line">      &#125;,</span><br><span class="line">      //把value绑定到input里面的时候，:value，相当于调用get，然后input发生改变的时候就会调用set设置值，让后通过发射事件把value传出去</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.modelValue;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    btnClick(event) &#123;</span><br><span class="line">      this.$emit(&quot;update:model-value&quot;, event.target.value);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- &lt;input</span><br><span class="line">      type=&quot;text&quot;</span><br><span class="line">      :value=&quot;message&quot;</span><br><span class="line">      @input=&quot;message = $event.target.value&quot;</span><br><span class="line">    /&gt; --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;hy-input v-model=&quot;message&quot;&gt;&lt;/hy-input&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 里面相当于做了： --&gt;</span><br><span class="line">    &lt;!-- &lt;hy-input :modelValue=&quot;message&quot; @update:model-value=&quot;message = $event&quot;&gt;&lt;/hy-input&gt; --&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HyInput from &quot;./HyIput.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HyInput,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;hello&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<p>我们现在通过v-model是直接绑定了一个属性，如果我们<strong>希望绑定多个属性</strong>呢？ </p>
<p>也就是我们希望在一个组件上使用多个v-model是否可以实现呢？</p>
<p>p我们知道，默认情况下的v-model其实是绑定了 modelValue 属性和 @update:modelValue的事件；</p>
<p>如果我们希望绑定更多，可以给v-model传入一个参数，那么这个参数的名称就是我们绑定属性的名称； </p>
<p>注意：这里我是绑定了两个属性的</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><span class="line">//HyInput2</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;value&quot; /&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;hqz&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    modelValue: String,</span><br><span class="line">    title: String,</span><br><span class="line">  &#125;,</span><br><span class="line">  emits: [&quot;update:model-value&quot;, &quot;update:title&quot;],</span><br><span class="line">  computed: &#123;</span><br><span class="line">    value: &#123;</span><br><span class="line">      set(value) &#123;</span><br><span class="line">        this.$emit(&quot;update:model-value&quot;, value);</span><br><span class="line">      &#125;,</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.modelValue;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    hqz: &#123;</span><br><span class="line">      set(hqz) &#123;</span><br><span class="line">        console.log(hqz);</span><br><span class="line">        this.$emit(&quot;update:title&quot;, hqz);</span><br><span class="line">      &#125;,</span><br><span class="line">      get() &#123;</span><br><span class="line">        return this.title;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">//App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;hy-input2 v-model=&quot;message&quot; v-model:title=&quot;title&quot;&gt;&lt;/hy-input2&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    &#123;&#123; title &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HyInput from &quot;./HyIput.vue&quot;;</span><br><span class="line">import HyInput2 from &quot;./HyIput2.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    HyInput,</span><br><span class="line">    HyInput2,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: &quot;hello&quot;,</span><br><span class="line">      title: &quot;haha&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h1 id="Vue动画"><a href="#Vue动画" class="headerlink" title="Vue动画"></a>Vue动画</h1><h2 id="动画的基本使用"><a href="#动画的基本使用" class="headerlink" title="动画的基本使用"></a>动画的基本使用</h2><h3 id="vue的transition动画"><a href="#vue的transition动画" class="headerlink" title="vue的transition动画"></a>vue的transition动画</h3><p>在开发中，我们想要给一个组件的<strong>显示和消失添加某种过渡动画</strong>，可以很好的<strong>增加用户体验</strong>： </p>
<p>React框架本身并没有提供任何动画相关的API，所以在React中使用过渡动画我们需要使用一个第三方库</p>
<p>react-transition-group； </p>
<p>Vue中为我们提供一些内置组件和对应的API来完成动画，利用它们我们可以方便的实现过渡动画效果； </p>
<p>Hello World的显示和隐藏；</p>
<p>没有动画的情况下，整个内容的显示和隐藏会非常的生硬： </p>
<p>如果我们希望给单元素或者组件实现过渡动画，可以使用 transition 内置组件来完成动画；</p>
<p>Vue提供了 transition 的封装组件，在下列情形中，可以给任何元素和组件添加进入/离开过渡：</p>
<p>条件渲染 (使用 v-if)条件展示 (使用 v-show)</p>
<p>动态组件</p>
<p>组件根节点</p>
<h3 id="transition实现动画"><a href="#transition实现动画" class="headerlink" title="transition实现动画"></a>transition实现动画</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;transition name=&quot;hqz&quot;&gt;</span><br><span class="line">      &lt;h2 v-if=&quot;isshow&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.hqz-enter-from,</span><br><span class="line">.hqz-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line">.hqz-enter-to,</span><br><span class="line">.hqz-leave-from &#123;</span><br><span class="line">  opacity: 1;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-active,</span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  transition: opacity 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="transition组件的原理"><a href="#transition组件的原理" class="headerlink" title="transition组件的原理"></a>transition组件的原理</h3><p><strong>我们会发现，Vue自动给h2元素添加了动画，这是什么原因呢？</strong></p>
<p> <strong>当插入或删除包含在 transition 组件中的元素时，Vue 将会做以下处理：</strong></p>
<p>1.自动嗅探目标元素是否应用了CSS过渡或者动画，如果有，那么在恰当的时机添加/删除 CSS类名； </p>
<p>2.如果 transition 组件提供了JavaScript钩子函数，这些钩子函数将在恰当的时机被调用；</p>
<p>3.如果没有找到JavaScript钩子并且也没有检测到CSS过渡/动画，DOM插入、删除操作将会立即执行；</p>
<h3 id="过渡动画class"><a href="#过渡动画class" class="headerlink" title="过渡动画class"></a>过渡动画class</h3><p><strong>我们会发现上面提到了很多个class，事实上Vue就是帮助我们在这些class之间来回切换完成的动画：</strong></p>
<p>v-enter-from：定义进入过渡的开始状态。在元素被插入之前生效，在元素被插入之后的下一帧移除。</p>
<p>v-enter-active：定义进入过渡生效时的状态。在整个进入过渡的阶段中应用，在元素被插入之前生效，在过渡/动画完成之后移除。这个类可以被用来定义进入过渡的过程时间，延迟和曲线函数。</p>
<p>v-enter-to：定义进入过渡的结束状态。在元素被插入之后下一帧生效 (与此同时 v-enter-from 被移除)，在过渡/动画完成之后移除。</p>
<p>v-leave-from：定义离开过渡的开始状态。在离开过渡被触发时立刻生效，下一帧被移除。</p>
<p>v-leave-active：定义离开过渡生效时的状态。在整个离开过渡的阶段中应用，在离开过渡被触发时立刻生效，在过渡/动画完成之后移除。这个类可以被用来定义离开过渡的过程时间，延迟和曲线函数。</p>
<p>v-leave-to：离开过渡的结束状态。在离开过渡被触发之后下一帧生效 (与此同时 v-leave-from 被删除)，在过渡/动画完成之后移除</p>
<p><img src="C:\Users\黄千智\Desktop\vue3学习\image-20210818143223542.png" alt="image-20210818143223542"></p>
<p><strong>class的name命名规则如下：</strong></p>
<p>如果我们使用的是一个没有name的transition，那么所有的class是以 v- 作为默认前缀；</p>
<p>如果我们添加了一个name属性，比如 <transtion name="why">，那么所有的class会以 why- 开头；</p>
<p>animation实现动画</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition name=&quot;hqz&quot;&gt;</span><br><span class="line">      &lt;h2 v-if=&quot;isshow&quot; class=&quot;title&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.title &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.hqz-enter-active &#123;</span><br><span class="line">  animation: bounce 0.5s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  animation: bounce 0.5s ease reverse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes bounce &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: scale(0);</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    transform: scale(1.2);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: scale (1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="transition和animation一起使用"><a href="#transition和animation一起使用" class="headerlink" title="transition和animation一起使用"></a>transition和animation一起使用</h3><p>Vue为了<strong>知道过渡的完成</strong>，内部是<strong>在监听 transitionend 或 animationend</strong>，到底使用哪一个取决于元素应用的CSS规则： </p>
<p>如果我们只是使用了其中的一个，那么Vue能自动识别类型并设置监听； </p>
<p><strong>但是如果我们同时使用了过渡和动画呢？</strong></p>
<p>并且在这个情况下可能某一个动画执行结束时，另外一个动画还没有结束</p>
<p>在这种情况下，我们可以设置 type 属性为 animation 或者 transition 来明确的告知Vue监听的类型；</p>
<p>要注意的是这里面动画的时候得一样，时间不一样对于vue来说，vue是用过transition组件里面包裹的元素添加class，在某一时刻再移除calss，但是时间要是不一样，待会移除的时候到底根据哪个时间去移除，这样就会存在问题，所以通过设置type这个属性可以告诉vue应该通过哪个去看时间，我们可以选择哪个时间长选哪个</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition name=&quot;hqz&quot; type=&quot;transition&quot;&gt;</span><br><span class="line">      &lt;h2 v-if=&quot;isshow&quot; class=&quot;title&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.title &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.hqz-enter-active &#123;</span><br><span class="line">  animation: bounce 1s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  animation: bounce 1s ease reverse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-from,</span><br><span class="line">.hqz-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-active,</span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  transition: opacity 1s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes bounce &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: scale(0);</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    transform: scale(1.2);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: scale (1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>我们也可以显示的来<strong>指定过渡的时间</strong>，通过 <strong>duration 属性</strong>。 </p>
<p><strong>duration可以设置两种类型的值：</strong></p>
<p>number类型：同时设置进入和离开的过渡时间；</p>
<p>object类型：分别设置进入和离开的过渡时间；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  name=&quot;hqz&quot;</span><br><span class="line">  type=&quot;transition&quot;</span><br><span class="line">  :duration=&quot;&#123; enter: 800, leave: 1000 &#125;&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;h2 v-if=&quot;isshow&quot; class=&quot;title&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>



<h3 id="过渡的模式mode"><a href="#过渡的模式mode" class="headerlink" title="过渡的模式mode"></a>过渡的模式mode</h3><p>一般再说transition组件包裹一个元素，如果有两个元素用v-if在同一时间只显示一个，但是当来回进行切换的时候，这个过程得等一个消失后另外一个才能占据它的位置，界面两个就是同时存在，同时执行动画，那么如果在开发里面遇到两个元素进行来回切换要么显示它要么显示它需要设置一个mode属性可以设置两个值</p>
<p>in-out: 新元素先进行过渡，完成之后当前元素过渡离开；(进入动画结束再开始离开动画)</p>
<p>out-in: 当前元素先进行过渡，完成之后新元素过渡进入；(离开动画结束再开始进入动画)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition name=&quot;hqz&quot; mode=&quot;out-in&quot;&gt;</span><br><span class="line">      &lt;h2 v-if=&quot;isshow&quot; class=&quot;title&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">      &lt;h2 v-else=&quot;isshow&quot; class=&quot;title&quot;&gt;你好&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.app &#123;</span><br><span class="line">  width: 100px;</span><br><span class="line">  height: 100px;</span><br><span class="line">  margin: 0 auto;</span><br><span class="line">&#125;</span><br><span class="line">.title &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.hqz-enter-active &#123;</span><br><span class="line">  animation: bounce 1s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  animation: bounce 1s ease reverse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-from,</span><br><span class="line">.hqz-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-active,</span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  transition: opacity 1s ease;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">@keyframes bounce &#123;</span><br><span class="line">  0% &#123;</span><br><span class="line">    transform: scale(0);</span><br><span class="line">  &#125;</span><br><span class="line">  50% &#123;</span><br><span class="line">    transform: scale(1.2);</span><br><span class="line">  &#125;</span><br><span class="line">  100% &#123;</span><br><span class="line">    transform: scale (1);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="动态组件的切换"><a href="#动态组件的切换" class="headerlink" title="动态组件的切换"></a>动态组件的切换</h3><p>如果想浏览器刷新后就出现动画效果可以增加appear这个属性</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div class=&quot;app&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition name=&quot;hqz&quot; mode=&quot;out-in&quot; :appear=&quot;true&quot;&gt;</span><br><span class="line">      &lt;component :is=&quot;isshow ? &#x27;home&#x27; : &#x27;about&#x27;&quot;&gt;&lt;/component&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">import About from &quot;./About.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">    About,</span><br><span class="line">  &#125;,</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="animate-css"><a href="#animate-css" class="headerlink" title="animate.css"></a>animate.css</h2><p>如果我们手动一个个来编写这些动画，那么效率是比较低的，所以在开发中我们可能会引用一些第三方库的动画库，比如animate.css。 </p>
<p><strong>什么是animate.css呢？</strong></p>
<p><strong>Animate.css</strong> is a library of ready-to-use, cross-browser animations for use in your web projects. Great </p>
<p>for emphasis, home pages, sliders, and attention-guiding hints.</p>
<p><strong>Animate.css</strong>是一个已经准备好的、跨平台的动画库为我们的web项目，对于强调、主页、滑动、注意力引导非常有用；</p>
<p> <strong>如何使用Animate库呢？</strong></p>
<p>第一步：需要安装animate.css库；npm install animate.css</p>
<p>第二步：导入animate.css库的样式； </p>
<p>第三步：使用animation动画或者animate提供的类；</p>
<p><a target="_blank" rel="noopener" href="https://animate.style/">https://animate.style/</a>  到这个网址可以直接看样式</p>
<p>使用代码如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition name=&quot;hqz&quot;&gt;</span><br><span class="line">      &lt;h2 class=&quot;title&quot; v-if=&quot;isshow&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.title &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-active &#123;</span><br><span class="line">  animation: bounceInUp 1s ease-in;</span><br><span class="line">&#125;</span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  animation: bounceInUp 1s ease-in reverse;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="自定义过渡class"><a href="#自定义过渡class" class="headerlink" title="自定义过渡class"></a>自定义过渡class</h2><p><strong>我们可以通过以下 attribute 来自定义过渡类名：</strong></p>
<p>enter-from-class</p>
<p>enter-active-class</p>
<p>enter-to-class</p>
<p>leave-from-class</p>
<p>leave-active-class</p>
<p>leave-to-class</p>
<p>他们的优先级高于普通的类名，这对于 <strong>Vue 的过渡系统和其他第三方 CSS 动画库</strong>，如 Animate.css. 结合使用十分有用</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;button @click=&quot;isshow = !isshow&quot;&gt;切换&lt;/button&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line"></span><br><span class="line">    &lt;transition</span><br><span class="line">      name=&quot;hqz&quot;</span><br><span class="line">      enter-active-class=&quot;animate__flash animate__animated&quot;</span><br><span class="line">      leave-active-class=&quot;animate__backInUp animate__animated&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;h2 class=&quot;title&quot; v-if=&quot;isshow&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">    &lt;/transition&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      isshow: true,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.title &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">&#125;</span><br><span class="line">.animate__backInUp &#123;</span><br><span class="line">  animation-direction: reverse;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="gsap库"><a href="#gsap库" class="headerlink" title="gsap库"></a>gsap库</h2><p>某些情况下我们希望通过JavaScript来实现一些动画的效果，这个时候我们可以选择使用gsap库来完成。</p>
<p> <strong>什么是gsap呢？</strong></p>
<p>GSAP是The GreenSock Animation Platform（GreenSock动画平台）的缩写； </p>
<p>它可以通过JavaScript为CSS属性、SVG、Canvas等设置动画，并且是浏览器兼容的；</p>
<p> <strong>这个库应该如何使用呢？</strong></p>
<p>第一步：需要安装gsap库；</p>
<p>第二步：导入gsap库； </p>
<p>第三步：使用对应的api即可；</p>
<p> <strong>我们可以先安装一下gsap库：</strong></p>
<p>npm install gsap</p>
<p>官网可以直接查看文档<a target="_blank" rel="noopener" href="https://greensock.com/get-started/">https://greensock.com/get-started/</a></p>
<h3 id="javaScript钩子"><a href="#javaScript钩子" class="headerlink" title="javaScript钩子"></a>javaScript钩子</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;transition</span><br><span class="line">  name=&quot;hqz&quot;</span><br><span class="line">  @click=&quot;isshow = !isshow&quot;</span><br><span class="line">  @before-enter=&quot;beforeEnter&quot;</span><br><span class="line">  @enter=&quot;enter&quot;</span><br><span class="line">  @after-enter=&quot;afterEnter&quot;</span><br><span class="line">  @enter-cancelled=&quot;enterCancelled&quot;</span><br><span class="line">  @leave=&quot;leave&quot;</span><br><span class="line">  @after-leave=&quot;leave&quot;</span><br><span class="line">  @leave-cancelled=&quot;leaveCancelled&quot;</span><br><span class="line">&gt;</span><br><span class="line">  &lt;h2 class=&quot;title&quot; v-if=&quot;isshow&quot;&gt;hello&lt;/h2&gt;</span><br><span class="line">&lt;/transition&gt;</span><br></pre></td></tr></table></figure>



<p>当只用 JavaScript 过渡的时候，在 enter 和 leave钩中必须使用 <code>done</code> 进行回调。否则，它们将被同步调用，过渡会立即完成。添加 :css=”false”，也会让 Vue 会跳过 CSS 的检测，除了性能略高之外，这可以避免过渡过程中 CSS 规则的影响。</p>
<p>done就是告诉transition这里js这动画什么时候执行完了，比如说进入执行得执行完了，再点击离开才会执行离开动画，:css=”flase”，就是跳过class的检测，提高性能</p>
<h3 id="gsap实现数字变化"><a href="#gsap实现数字变化" class="headerlink" title="gsap实现数字变化"></a>gsap实现数字变化</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;number&quot; v-model=&quot;counter&quot; step=&quot;100&quot; /&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; showCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; showNumber.toFixed(0) &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import gsap from &quot;gsap&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter: 0,</span><br><span class="line">      showNumber: 0,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    showCounter() &#123;</span><br><span class="line">      return this.showNumber.toFixed(0);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    counter(newValue) &#123;</span><br><span class="line">      gsap.to(this, &#123; duration: 1, showNumber: newValue &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="列表的过渡与移动动画"><a href="#列表的过渡与移动动画" class="headerlink" title="列表的过渡与移动动画"></a>列表的过渡与移动动画</h2><p>目前为止，过渡动画我们只要是<strong>针对单个元素或者组件</strong>的：</p>
<p>要么是单个节点； </p>
<p>要么是同一时间渲染多个节点中的一个； </p>
<p>那么如果希望渲染的是<strong>一个列表</strong>，并且<strong>该列表中添加删除数据也希望有动画执行</strong>呢？</p>
<p>这个时候我们要使用 <transition-group> 组件来完成；</p>
<p> <strong>使用<transition-group> 有如下的特点：</strong></p>
<p>默认情况下，它不会渲染一个元素的包裹器，但是你可以指定一个元素并以 tag attribute 进行渲染； </p>
<p>过渡模式不可用，因为我们不再相互切换特有的元素；</p>
<p>内部元素总是需要提供唯一的 key attribute 值； </p>
<p>CSS 过渡的类将会应用在内部的元素中，而不是这个组/容器本身；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;transition-group name=&quot;list&quot; tag=&quot;p&quot;&gt;</span><br><span class="line">      &lt;span v-for=&quot;item in items&quot; :key=&quot;item&quot; class=&quot;item-list&quot; name=&quot;list&quot;&gt;</span><br><span class="line">        &#123;&#123; item &#125;&#125;</span><br><span class="line">      &lt;/span&gt;</span><br><span class="line">    &lt;/transition-group&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;添加&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;sub&quot;&gt;删除&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;shuffle&quot;&gt;打乱&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import gsap from &quot;gsap&quot;;</span><br><span class="line">import shuffle from &quot;lodash&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      items: [1, 2, 3, 4, 5, 6, 7, 8, 9],</span><br><span class="line">      nextNum: 10,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    randomIndex() &#123;</span><br><span class="line">      return Math.random() * this.items.length;</span><br><span class="line">    &#125;,</span><br><span class="line">    add() &#123;</span><br><span class="line">      this.items.splice(this.randomIndex(), 0, this.nextNum++);</span><br><span class="line">    &#125;,</span><br><span class="line">    sub() &#123;</span><br><span class="line">      this.items.splice(this.randomIndex(), 1);</span><br><span class="line">    &#125;,</span><br><span class="line">    shuffle() &#123;</span><br><span class="line">      this.items = _.shuffle(this.items);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.item-list &#123;</span><br><span class="line">  display: inline-block;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line">.list-enter-from,</span><br><span class="line">.list-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">  transform: translateY(30px);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list-enter-active,</span><br><span class="line">.list-leave-active &#123;</span><br><span class="line">  transition: all 1s ease;</span><br><span class="line">&#125;</span><br><span class="line">.list-leave-active &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.list-move &#123;</span><br><span class="line">  transition: transform 1s ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>我们可以通过使用一个新增的 v-move 的class来完成动画；</p>
<p>它会在元素改变位置的过程中应用；</p>
<p>像之前的名字一样，我们可以通过name来自定义前缀；</p>
<p>增加的时候没问题，但是发现在离开的过程中有问题:原因是当离开的时候动画已经开始，但是默认还是占着位置的，这时候要加使元素脱离标准流</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">.list-leave-active &#123;</span><br><span class="line">  position: absolute;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>通过npm install lodash</p>
<p>import shuffle from “lodash”</p>
<p>或者import _ from “lodash”;</p>
<p>这样可以打乱items的排序，通过也会有动画</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">shuffle() &#123;</span><br><span class="line">  this.items = _.shuffle(this.items);</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h2 id="列表的交替动画"><a href="#列表的交替动画" class="headerlink" title="列表的交替动画"></a>列表的交替动画</h2><p> <strong>我们来通过gsap的延迟delay属性，做一个交替消失的动画</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;keyword&quot; /&gt;</span><br><span class="line">    &lt;transition-group</span><br><span class="line">      name=&quot;hqz&quot;</span><br><span class="line">      tag=&quot;ul&quot;</span><br><span class="line">      @beforeEnter=&quot;beforeEnter&quot;</span><br><span class="line">      @enter=&quot;enter&quot;</span><br><span class="line">      @leave=&quot;leave&quot;</span><br><span class="line">    &gt;</span><br><span class="line">      &lt;li</span><br><span class="line">        v-for=&quot;(name, index) in showNames&quot;</span><br><span class="line">        :key=&quot;name&quot;</span><br><span class="line">        class=&quot;name&quot;</span><br><span class="line">        :data-index=&quot;index&quot;</span><br><span class="line">      &gt;</span><br><span class="line">        &#123;&#123; name &#125;&#125;</span><br><span class="line">      &lt;/li&gt;</span><br><span class="line">    &lt;/transition-group&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import gsap from &quot;gsap&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      names: [&quot;kobe&quot;, &quot;acb&quot;, &quot;jmes&quot;, &quot;hqz&quot;, &quot;hly&quot;, &quot;abc&quot;],</span><br><span class="line">      keyword: &quot;&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    showNames() &#123;</span><br><span class="line">      return this.names.filter((item) =&gt; &#123;</span><br><span class="line">        return item.indexOf(this.keyword) !== -1;</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    beforeEnter(el) &#123;</span><br><span class="line">      el.style.height = 0;</span><br><span class="line">      el.style.opacity = 0;</span><br><span class="line">    &#125;,</span><br><span class="line">    enter(el, done) &#123;</span><br><span class="line">      gsap.to(el, &#123;</span><br><span class="line">        opacity: 1,</span><br><span class="line">        height: &quot;1.6em&quot;,</span><br><span class="line">        delay: el.dataset.index * 0.15,</span><br><span class="line">        onComplete: done,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">    leave(el, done) &#123;</span><br><span class="line">      gsap.to(el, &#123;</span><br><span class="line">        opacity: 0,</span><br><span class="line">        height: 0,</span><br><span class="line">        delay: el.dataset.index * 0.15,</span><br><span class="line">        onComplete: done,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.name &#123;</span><br><span class="line">  margin-right: 10px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/* .hqz-enter-from,</span><br><span class="line">.hqz-leave-to &#123;</span><br><span class="line">  opacity: 0;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.hqz-enter-active,</span><br><span class="line">.hqz-leave-active &#123;</span><br><span class="line">  transition: opacity 1s ease;</span><br><span class="line">&#125; */</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>:data-index=”index”这个可以通过el.dataset.index拿到对应元素的index</p>
<h1 id="composition-API"><a href="#composition-API" class="headerlink" title="composition API"></a>composition API</h1><h2 id="Mixin的知识"><a href="#Mixin的知识" class="headerlink" title="Mixin的知识"></a>Mixin的知识</h2><p>目前我们是使用组件化的方式在开发整个Vue的应用程序，但是组件和组件之间有时候会存在相同的代码逻辑，我们希望对相同的代码逻辑进行抽取。 </p>
<p>在Vue2和Vue3中都支持的一种方式就是使用Mixin来完成： </p>
<p>Mixin提供了一种非常灵活的方式，来分发Vue组件中的可复用功能； </p>
<p>一个Mixin对象可以包含任何组件选项； </p>
<p>当组件使用Mixin对象时，所有Mixin对象的选项将被 混合 进入该组件本身的选项中；</p>
<h3 id="基本使用-局部和全局"><a href="#基本使用-局部和全局" class="headerlink" title="基本使用(局部和全局)"></a>基本使用(局部和全局)</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line">App.vue</span><br><span class="line"></span><br><span class="line">&lt;template&gt;</span><br><span class="line">  <span class="xml"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">h2</span>&gt;</span>&#123;&#123; message &#125;&#125;<span class="tag">&lt;/<span class="name">h2</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;foo&quot;</span>&gt;</span>局部按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">    <span class="tag">&lt;<span class="name">button</span> @<span class="attr">click</span>=<span class="string">&quot;doclick&quot;</span>&gt;</span>全局按钮<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span></span><br><span class="line"><span class="xml">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span></span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">import</span> &#123; demoMixin &#125; <span class="keyword">from</span> <span class="string">&quot;./mixin/demomaxin&quot;</span>;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">    <span class="keyword">return</span> &#123; <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span> &#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  &#125;,</span></span></span><br><span class="line"><span class="javascript"><span class="xml">  <span class="attr">mixins</span>: [demoMixin],</span></span></span><br><span class="line"><span class="javascript"><span class="xml">&#125;;</span></span></span><br><span class="line"><span class="javascript"><span class="xml"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="xml"><span class="tag">&lt;<span class="name">style</span> <span class="attr">scoped</span>&gt;</span></span></span><br><span class="line"><span class="xml"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span></span><br><span class="line"></span><br><span class="line">demoMixin.js(局部)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">const</span> demoMixin = &#123;</span><br><span class="line">  <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">message</span>: <span class="string">&quot;hello Demomixin&quot;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">foo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;demo mixin foo&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;执行了 demo mixin create&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">main.js(全局)</span><br><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./01_maxin局部和全局混入/App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.mixin(&#123;</span><br><span class="line">  <span class="attr">methods</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">doclick</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;全局的点击&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;全局的生命周期&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br></pre></td></tr></table></figure>



<h3 id="合并规则"><a href="#合并规则" class="headerlink" title="合并规则"></a>合并规则</h3><p><strong>如果Mixin对象中的选项和组件对象中的选项发生了冲突，那么Vue会如何操作呢？</strong></p>
<p>这里分成不同的情况来进行处理；</p>
<p> <strong>情况一：如果是data函数的返回值对象</strong></p>
<p>返回值对象默认情况下会进行合并； </p>
<p>如果data返回值对象的属性发生了冲突，那么会保留组件自身的数据； </p>
<p> <strong>情况二：如何生命周期钩子函数</strong></p>
<p>生命周期的钩子函数会被合并到数组中，都会被调用；</p>
<p> <strong>情况三：值为对象的选项，例如 methods、components 和 directives，将被合并为同一个对象。</strong></p>
<p>比如都有methods选项，并且都定义了方法，那么它们都会生效； </p>
<p>但是如果对象的key相同，那么会取组件对象的键值对；</p>
<h2 id="认识Composition-API"><a href="#认识Composition-API" class="headerlink" title="认识Composition API"></a>认识Composition API</h2><p>为了开始使用Composition API，我们需要有一个可以实际使用它（编写代码）的地方； </p>
<p>在Vue组件中，这个位置就是 setup 函数； </p>
<p> <strong>setup其实就是组件的另外一个选项：</strong></p>
<p>只不过这个选项强大到我们可以用它来替代之前所编写的大部分其他选项； </p>
<p>比如methods、computed、watch、data、生命周期等等； </p>
<h2 id="setup函数的参数"><a href="#setup函数的参数" class="headerlink" title="setup函数的参数"></a>setup函数的参数</h2><p>setup函数的参数，它主要<strong>有两个参数</strong>： </p>
<p> 第一个参数：props</p>
<p> 第二个参数：context</p>
<p>props非常好理解，它其实就是<strong>父组件传递过来的属性</strong>会被<strong>放到props对象</strong>中，我们在<strong>setup中如果需要使用</strong>，那么就可</p>
<p>以直接<strong>通过props参数获取：</strong></p>
<p>对于定义props的类型，我们还是和之前的规则是一样的，在props选项中定义； </p>
<p>并且在template中依然是可以正常去使用props中的属性，比如message； </p>
<p>如果我们在setup函数中想要使用props，那么不可以通过 this 去获取（后面我会讲到为什么）；</p>
<p>因为props有直接作为参数传递到setup函数中，所以我们可以直接通过参数来使用即可；</p>
<p>另外一个参数是context，我们也称之为是一个<strong>SetupContext</strong>，它里面<strong>包含三个属性</strong>： </p>
<p>attrs：所有的非prop的attribute； </p>
<p>slots：父组件传递过来的插槽（这个在以渲染函数返回时会有作用，后面会讲到）；</p>
<p>emit：当我们组件内部需要发出事件时会用到emit（因为我们不能访问this，所以不可以通过 this.$emit发出事件）；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">//App.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;home :message=&quot;message&quot; @fn=&quot;fn&quot; class=&quot;aaa&quot;&gt;&lt;/home&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const message = &quot;hello&quot;;</span><br><span class="line">    const fn = () =&gt; &#123;</span><br><span class="line">      console.log(&quot;aa&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      fn,</span><br><span class="line">      message,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br><span class="line">//Home.vue</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;btnclick&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  emits: [&quot;fn&quot;],</span><br><span class="line">  props: &#123;</span><br><span class="line">    message: &#123;</span><br><span class="line">      type: String,</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup(props, &#123; attrs, emit, slots &#125;) &#123;</span><br><span class="line">    console.log(props.message);</span><br><span class="line">    const btnclick = () =&gt; &#123;</span><br><span class="line">      emit(&quot;fn&quot;);</span><br><span class="line">    &#125;;</span><br><span class="line">    console.log(attrs.class);</span><br><span class="line">    console.log(slots);</span><br><span class="line">    return &#123;</span><br><span class="line">      btnclick,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="setup参数的返回值"><a href="#setup参数的返回值" class="headerlink" title="setup参数的返回值"></a>setup参数的返回值</h2><p>setup既然是一个函数，那么它也可以有<strong>返回值</strong>，<strong>它的返回值用来做什么呢？</strong></p>
<p>setup的返回值可以在模板template中被使用； </p>
<p>也就是说我们可以通过setup的返回值来替代data选项； </p>
<p>甚至是我们可以返回一个执行函数来代替在methods中定义的方法： </p>
<p>但是，如果我们将 counter 在 increment 或者 decrement进行操作时，是否可以实现界面的响应式呢？</p>
<p>答案是不可以； </p>
<p>这是因为对于一个定义的变量来说，默认情况下，Vue并不会跟踪它的变化，来引起界面的响应式操作；</p>
<h2 id="ReactiveAPI"><a href="#ReactiveAPI" class="headerlink" title="ReactiveAPI"></a>ReactiveAPI</h2><p>如果想为在setup中定义的数据提供响应式的特性，那么我们可以<strong>使用reactive的函数</strong>： </p>
<p> <strong>那么这是什么原因呢？为什么就可以变成响应式的呢？</strong></p>
<p>这是因为当我们使用reactive函数处理我们的数据之后，数据再次被使用时就会进行依赖收集； </p>
<p>当数据发生改变时，所有收集到的依赖都是进行对应的响应式操作（比如更新界面）；</p>
<p>事实上，我们编写的data选项，也是在内部交给了reactive函数将其编程响应式对象的；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;当前计数:&lt;/h2&gt;</span><br><span class="line">    &#123;&#123; state.counter &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;➕1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const state = reactive(&#123; counter: 0 &#125;);</span><br><span class="line">    function add() &#123;</span><br><span class="line">      state.counter;</span><br><span class="line">    &#125;</span><br><span class="line">    return &#123;</span><br><span class="line">      state,</span><br><span class="line">      add,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="RefAPI"><a href="#RefAPI" class="headerlink" title="RefAPI"></a>RefAPI</h2><p>reactive API对<strong>传入的类型是有限制的</strong>，它要求我们必须传入的是一个对象或者数组类型如果我们传入一个基本数据类型（String、Number、Boolean）会报一个警告 </p>
<p>这个时候Vue3给我们提供了<strong>另外一个API：ref API</strong></p>
<p>ref 会返回一个可变的响应式对象，该对象作为一个响应式的引用维护着它内部的值,这就是ref名称的来源； </p>
<p>内部的值是在ref的 value 属性中被维护的；</p>
<p><strong>这里有两个注意事项：</strong></p>
<p>在模板中引入ref的值时，Vue会自动帮助我们进行解包操作，所以我们并不需要在模板中通过 ref.value 的方式来使用；</p>
<p>但是在 setup 函数内部，它依然是一个 ref引用， 所以对其进行操作时，我们依然需要使用 ref.value的方式；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;!-- 按道理来说counter是ref对象，所以应该写counter.value</span><br><span class="line">    但是vue帮助我们做了一些操作，当在模板里面使用ref对象时会自动进行解包操作，省略.value --&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;➕1&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">    &#123;&#123; info.counter &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    // counter已经变成ref可响应式的引用</span><br><span class="line">    let counter = ref(100);</span><br><span class="line">    function add() &#123;</span><br><span class="line">      counter.value++; //在这里没有解包，得加.value</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    const info = &#123;</span><br><span class="line">      counter,</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      add,</span><br><span class="line">      info,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="readonly"><a href="#readonly" class="headerlink" title="readonly"></a>readonly</h2><p>我们通过<strong>reactive或者ref可以获取到一个响应式的对象</strong>，但是某些情况下，我们<strong>传入给其他地方（组件）</strong>的这个</p>
<p>响应式对象希望<strong>在另外一个地方（组件）被使用</strong>，但是<strong>不能被修改</strong>，这个时候<strong>如何防止这种情况的出现</strong>呢？</p>
<p>Vue3为我们提供了readonly的方法； </p>
<p>readonly会返回原生对象的只读代理（也就是它依然是一个Proxy，这是一个proxy的set方法被劫持，并且不能对其进行修改)</p>
<p>原理:就是在返回的proxy对象，代理了set方法，当去调用set的时候作一个劫持，报出一个警告</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> infoProxy = <span class="keyword">new</span> <span class="built_in">Proxy</span>(info,&#123;</span><br><span class="line">    <span class="function"><span class="title">get</span>(<span class="params">target,key</span>)</span>&#123;<span class="keyword">return</span> target[key]&#125;</span><br><span class="line">    <span class="function"><span class="title">set</span>(<span class="params">target,key,value</span>)</span>&#123;warning(<span class="string">&quot;不允许修改可变的值&quot;</span>)&#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> name = infoProxy.name <span class="comment">//这里用的是get方法 infoProxy.name</span></span><br><span class="line">infoProxy.name = <span class="string">&quot;hqz&quot;</span> <span class="comment">//这里用的是set方法 infoProxy.name=&quot;xx&quot;</span></span><br></pre></td></tr></table></figure>



<p>应用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;updateState&quot;&gt;修改状态&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, readonly &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    //普通对象</span><br><span class="line">    const info1 = &#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">    const readonlyInfo = readonly(info1);</span><br><span class="line"></span><br><span class="line">    //响应式对象 reactive</span><br><span class="line">    const info2 = reactive(&#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    const info3 = ref(&quot;why&quot;);</span><br><span class="line">    const readonlyInfo3 = readonly(info3);</span><br><span class="line"></span><br><span class="line">    const readonlyInfo2 = readonly(info2);</span><br><span class="line"></span><br><span class="line">    const updateState = () =&gt; &#123;</span><br><span class="line">      readonlyInfo2.name = &quot;why&quot;;</span><br><span class="line">      //readonly.value=&quot;why&quot;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      updateState,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="关于Reactive判断的API"><a href="#关于Reactive判断的API" class="headerlink" title="关于Reactive判断的API"></a>关于Reactive判断的API</h2><p><strong>isProxy</strong>检查对象是否是由 reactive 或 readonly创建的 proxy。 </p>
<p><strong>isReactive</strong>检查对象是否是由 reactive创建的响应式代理： 如果该代理是 readonly 建的，但包裹了由 reactive 创建的另一个代理，它也会返回 true； </p>
<p><strong>isReadonly</strong>检查对象是否是由 readonly 创建的只读代理</p>
<p><strong>toRaw</strong>返回 reactive 或 readonly 代理的原始对象（<strong>不</strong>建议保留对原始对象的持久引用。请谨慎使用）</p>
<p> <strong>shallowReactive</strong>创建一个响应式代理，它跟踪其自身 property 的响应性，但不执行嵌套对象的深层响应式转换 (深层还是原生对象)</p>
<p><strong>shallowReadonly</strong>创建一个 proxy，使其自身的 property 为只读，但不执行嵌套对象的深度只读转换（深层还是可读、可写的）</p>
<h2 id="RefAPI的一些补充"><a href="#RefAPI的一些补充" class="headerlink" title="RefAPI的一些补充"></a>RefAPI的一些补充</h2><h3 id="toRefs"><a href="#toRefs" class="headerlink" title="toRefs"></a>toRefs</h3><p>如果我们使用ES6的解构语法，对reactive返回的对象进行解构获取值，那么之后无论是修改结构后的变量，还是修改reactive返回的state对象<strong>，</strong>数据都不再是响应式的</p>
<p>那么有没有办法让我们解构出来的属性是响应式的呢？</p>
<p><strong>Vue为我们提供了一个toRefs的函数，可以将reactive返回的对象中的属性都转成ref；</strong> </p>
<p>那么我们再次进行结构出来的 name 和 age 本身都是 ref的； </p>
<p>这种做法相当于已经在state.name和ref.value之间建立了 链接，任何一个修改都会引起另外一个变化</p>
<p>如果我们只希望转换一个<strong>reactive对象中的属性为ref</strong>, 那么可以<strong>使用toRef的方法</strong>：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &#123;&#123; name &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;➕1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, toRefs, toRef &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    //将reactive中对象中的所有属性都转换成ref，相当于建立了链接</span><br><span class="line">    const info = reactive(&#123; counter: 0, name: &quot;hqz&quot; &#125;);</span><br><span class="line">    //相当于做了  let counter = 0 ; let name = &quot;why&quot;</span><br><span class="line">    // let &#123; counter,name &#125; = toRefs(info);</span><br><span class="line">    let &#123; name &#125; = info;</span><br><span class="line">    let counter = toRef(info, &quot;counter&quot;); //上面是因为返回的是对象，所以用&#123;&#125;进行结构，这里直接返回一个ref的值</span><br><span class="line">    console.log(toRef(info, &quot;counter&quot;));</span><br><span class="line">    const add = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">      name = &quot;why&quot;;</span><br><span class="line">      // info.counter++;//也是会改变的</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      name,</span><br><span class="line">      add,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="ref其他的API"><a href="#ref其他的API" class="headerlink" title="ref其他的API"></a>ref其他的API</h3><p> <strong>unref</strong>：如果我们想要<strong>获取一个ref引用中的value</strong>，那么也可以<strong>通过unref方法</strong>： </p>
<p>如果参数是一个 ref，则返回内部值，否则返回参数本身； </p>
<p>这是 val = isRef(val) ? val.value : val 的语法糖函数；</p>
<p> <strong>isRef</strong>：判断值是否是一个ref对象。 </p>
<p> <strong>shallowRef</strong>：创建一个浅层的ref对象； </p>
<p> <strong>triggerRef</strong>：手动触发和 shallowRef 相关联的副作用</p>
<h3 id="shallowRef"><a href="#shallowRef" class="headerlink" title="shallowRef"></a>shallowRef</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;&#123;&#123; info &#125;&#125;&lt;/div&gt;</span><br><span class="line">  &lt;button @click=&quot;changeInfo&quot;&gt;修改&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; shallowRef, ref, isRef &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const info = shallowRef(&#123; name: &quot;hqz&quot; &#125;);</span><br><span class="line"></span><br><span class="line">    const changeInfo = () =&gt; &#123;</span><br><span class="line">      info.name = &quot;why&quot;;</span><br><span class="line">      console.log(isRef(info));</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      info,</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="toRefs的使用"><a href="#toRefs的使用" class="headerlink" title="toRefs的使用"></a>toRefs的使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &#123;&#123; name &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;➕1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, toRefs, toRef &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    //将reactive中对象中的所有属性都转换成ref，相当于建立了链接</span><br><span class="line">    const info = reactive(&#123; counter: 0, name: &quot;hqz&quot; &#125;);</span><br><span class="line">    //相当于做了  let counter = 0 ; let name = &quot;why&quot;</span><br><span class="line">    // let &#123; counter,name &#125; = toRefs(info);</span><br><span class="line">    let &#123; name &#125; = info;</span><br><span class="line">    let counter = toRef(info, &quot;counter&quot;); //上面是因为返回的是对象，所以用&#123;&#125;进行结构，这里直接返回一个ref的值</span><br><span class="line">    console.log(toRef(info, &quot;counter&quot;));</span><br><span class="line">    const add = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">      name = &quot;why&quot;;</span><br><span class="line">      // info.counter++;//也是会改变的</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      name,</span><br><span class="line">      add,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="customRef"><a href="#customRef" class="headerlink" title="customRef"></a>customRef</h2><p>创建一个<strong>自定义的ref</strong>，并<strong>对其依赖项跟踪和更新触发</strong>进行<strong>显示控制</strong>： </p>
<p>它需要一个工厂函数，该函数接受 track 和 trigger 函数作为参数；</p>
<p>并且应该返回一个带有 get 和 set 的对象； </p>
<p> <strong>这里我们使用一个的案例：</strong></p>
<p>对双向绑定的属性进行debounce(节流)的操作；</p>
<p>useDebounceRef.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; customRef &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> timer = <span class="literal">null</span></span><br><span class="line">  <span class="keyword">return</span> customRef(<span class="function">(<span class="params">track, trigger</span>) =&gt;</span> &#123;<span class="comment">//调用track决定什么时候收集，调用trigger决定什么时候触发依赖来更新</span></span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="function"><span class="title">get</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        track();</span><br><span class="line">        <span class="keyword">return</span> value;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">set</span>(<span class="params">newValue</span>)</span> &#123;</span><br><span class="line">        <span class="built_in">clearTimeout</span>(timer)<span class="comment">//因为要做到的是输入完毕后响应，如果不清楚会间断性的响应，意思就是反复创建定时器，就最后一次会执行</span></span><br><span class="line">        timer = <span class="built_in">setTimeout</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">          value = newValue;</span><br><span class="line">          trigger();</span><br><span class="line">        &#125;, <span class="number">1000</span>);</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-model=&quot;message&quot; /&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; message &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import useDebounceRef from &quot;./hook/useDebounceRef&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      message: useDebounceRef(&quot;hello&quot;),</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="computed计算属性"><a href="#computed计算属性" class="headerlink" title="computed计算属性"></a>computed计算属性</h2><p>在前面我们讲解过计算属性computed：当我们的某些属性是依赖其他状态时，我们可以使用计算属性来处理</p>
<p>在前面的Options API中，我们是使用computed选项来完成的；</p>
<p>在Composition API中，我们可以在 setup 函数中使用 computed 方法来编写一个计算属性；</p>
<p> 如何使用computed呢？</p>
<p>方式一：接收一个getter函数，并为 getter 函数返回的值，返回一个不变的 ref 对象；</p>
<p>方式二：接收一个具有 get 和 set 的对象，返回一个可变的（可读写）ref 对象；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; fullName &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;changeName&quot;&gt;修改名字&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; computed, ref &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const firstName = ref(&quot;kobe&quot;);</span><br><span class="line">    const lastName = ref(&quot;Bryant&quot;);</span><br><span class="line">    // const fullName = computed(() =&gt; firstName.value + &quot; &quot; + lastName.value);//传入一个getter函数，返回值是一个ref对象</span><br><span class="line">    //传入一个对象</span><br><span class="line">    const fullName = computed(&#123;</span><br><span class="line">      get() &#123;</span><br><span class="line">        return firstName.value + &quot; &quot; + lastName.value;</span><br><span class="line">      &#125;,</span><br><span class="line">      set(Newvalue) &#123;</span><br><span class="line">        const NewName = Newvalue.split(&quot; &quot;);</span><br><span class="line">        firstName.value = NewName[0];</span><br><span class="line">        lastName.value = NewName[1];</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    const changeName = () =&gt; &#123;</span><br><span class="line">      fullName.value = &quot;hqz zqh&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      fullName,</span><br><span class="line">      changeName,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="watchEffect的使用-停止监听和副作用"><a href="#watchEffect的使用-停止监听和副作用" class="headerlink" title="watchEffect的使用(停止监听和副作用)"></a>watchEffect的使用(停止监听和副作用)</h2><p>当侦听到某些响应式数据变化时，我们希望执行某些操作，这个时候可以使用 watchEffect。 </p>
<p>我们来看一个案例：首先：watchEffect传入的函数会被立即执行一次，并且在执行的过程中会收集依赖；</p>
<p>其次：只有收集的依赖发生变化时，watchEffect传入的函数才会再次执行；</p>
<p>watchEffect停止监听：</p>
<p>如果在发生某些情况下，我们希望停止侦听，这个时候我们可以获取watchEffect的返回值函数，调用该函数即可。</p>
<p>在上面的案例中，我们age达到20的时候就停止侦听</p>
<p>watchEffect清除副作用</p>
<p>什么是清除副作用呢？</p>
<p>比如在开发中我们需要在侦听函数中执行网络请求，但是在网络请求还没有达到的时候，我们停止了侦听器，或者侦听器侦听函数被再次执行了。</p>
<p>那么上一次的网络请求应该被取消掉，这个时候我们就可以清除上一次的副作用；</p>
<p>给watchEffect传入的函数被回调时，其实可以获取到一个参数：onInvalidate</p>
<p>当<strong>副作用即将重新执行</strong> 或者 <strong>侦听器被停止</strong> 时会执行该函数传入的回调函数；</p>
<p>我们可以在传入的回调函数中，执行一些清楚工作</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; message &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;changeMessage&quot;&gt;修改信息&lt;/button&gt;</span><br><span class="line">    &lt;br /&gt;</span><br><span class="line">    &#123;&#123; age &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;changeAge&quot;&gt;修改年纪&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const message = ref(&quot;message&quot;);</span><br><span class="line">    const age = ref(0);</span><br><span class="line">    const stop = watchEffect((oninvalidate) =&gt; &#123;</span><br><span class="line">      console.log(&quot;watchEffect执行&quot;, message.value, age.value); //在这里第一次执行的时候收集依赖，当message被修改的时候，会自动再执行一次</span><br><span class="line"></span><br><span class="line">      const timer = setTimeout(() =&gt; &#123;</span><br><span class="line">        console.log(&quot;网络请求成功&quot;);</span><br><span class="line">      &#125;, 2000);</span><br><span class="line"></span><br><span class="line">      oninvalidate(() =&gt; &#123;</span><br><span class="line">        clearTimeout(timer);</span><br><span class="line">        console.log(&quot;oninvalidate&quot;); //在watchEffect传入函数，在被回调后传入函数中写对应的操作，清除副作用</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;);</span><br><span class="line">    const changeMessage = () =&gt; &#123;</span><br><span class="line">      message.value = &quot;hello&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    const changeAge = () =&gt; &#123;</span><br><span class="line">      age.value++;</span><br><span class="line">      if (age.value &gt; 5) &#123;</span><br><span class="line">        stop(); //watchaEffect返回的stop函数可以停止监听</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      message,</span><br><span class="line">      changeMessage,</span><br><span class="line">      changeAge,</span><br><span class="line">      age,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="watchEffect执行时机"><a href="#watchEffect执行时机" class="headerlink" title="watchEffect执行时机"></a>watchEffect执行时机</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 ref=&quot;title&quot;&gt;获取元素&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, watchEffect &#125; from &quot;@vue/runtime-core&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const title = ref(null);</span><br><span class="line"></span><br><span class="line">    watchEffect(</span><br><span class="line">      () =&gt; &#123;</span><br><span class="line">        console.log(&quot;watchEffect的执行时机&quot;, title.value);</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        // flush: &quot;pre&quot;,//默认是pre，变成post可以使得元素在挂载或者更新前执行</span><br><span class="line">        flush: &quot;post&quot;,</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line">    return &#123;</span><br><span class="line">      title,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="watch的使用"><a href="#watch的使用" class="headerlink" title="watch的使用"></a>watch的使用</h2><h3 id="watch侦听的数据源类型"><a href="#watch侦听的数据源类型" class="headerlink" title="watch侦听的数据源类型"></a>watch侦听的数据源类型</h3><p>watch的API完全等同于组件watch选项的Property： </p>
<p>watch需要侦听特定的数据源，并在回调函数中执行副作用；</p>
<p>默认情况下它是惰性的，只有当被侦听的源发生变化时才会执行回调；与watchEffect的比较，watch允许我们：</p>
<p>懒执行副作用（第一次不会直接执行）；</p>
<p>更具体的说明当哪些状态发生变化时，触发侦听器的执行；</p>
<p>访问侦听状态变化前后的值；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; info.name &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;changeInfo&quot;&gt;修改infoName&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;changeRefInfo&quot;&gt;修改ref值&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const info = reactive(&#123; name: &quot;hqz&quot; &#125;);</span><br><span class="line"></span><br><span class="line">    const refinfo = ref(&quot;hqz&quot;);</span><br><span class="line"></span><br><span class="line">    watch(refinfo, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">      //这里得这么写 不能用getter函数返回refinfo</span><br><span class="line">      console.log(newValue, oldValue);</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line">    // 1.传入一个getter函数,在监听对象中某一个属性的时候使用</span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; info.name,</span><br><span class="line">      (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        console.log(newValue, oldValue);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    // 2.传入可响应对象,reactive/ref</span><br><span class="line">    watch(info, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">      console.log(newValue, oldValue); //响应式对象结构后应该涉及浅拷贝，新旧值一样</span><br><span class="line">    &#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    //3.用getter函数返回一个结构后的普通对象</span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; (&#123; ...info &#125;), //结构后为普通对象&quot; 新旧值不一样</span><br><span class="line">      (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        console.log(newValue, oldValue);</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const changeInfo = () =&gt; &#123;</span><br><span class="line">      info.name = &quot;why&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    const changeRefInfo = () =&gt; &#123;</span><br><span class="line">      refinfo.value = &quot;kobe&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      info,</span><br><span class="line">      changeInfo,</span><br><span class="line">      changeRefInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>总结:所以可以传入两种，第一种是getter函数，可以说是用于侦听某一个属性，也可以解构可响应对象，第二种就是传入一个可响应对象</p>
<p>ref对象返回的是加上.value的，而reactive返回的是reactive对象</p>
<h3 id="watch侦听多个数据源"><a href="#watch侦听多个数据源" class="headerlink" title="watch侦听多个数据源"></a>watch侦听多个数据源</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;change&quot;&gt;修改&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, ref, watch &#125; from &quot;vue&quot;;</span><br><span class="line"></span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const info = reactive(&#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">      friend: &#123;</span><br><span class="line">        name: &quot;hly&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    const age = ref(0);</span><br><span class="line"></span><br><span class="line">    // watch([info, age], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    //   console.log(newValue, oldValue);</span><br><span class="line">    // &#125;);</span><br><span class="line"></span><br><span class="line">    watch([() =&gt; (&#123; ...info &#125;), age], (newValue, oldValue) =&gt; &#123;</span><br><span class="line">      //这样写可以吧reactive返回的proxy对象变为普通对象，并且新旧值不同</span><br><span class="line">      console.log(newValue, oldValue);</span><br><span class="line">    &#125;);</span><br><span class="line">    const change = () =&gt; &#123;</span><br><span class="line">      info.name = &quot;xiaozhi&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      change,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="watch选项-深度监听，立即执行"><a href="#watch选项-深度监听，立即执行" class="headerlink" title="watch选项(深度监听，立即执行)"></a>watch选项(深度监听，立即执行)</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;changeInfo&quot;&gt;修改&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; reactive, watch &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const info = reactive(&#123;</span><br><span class="line">      name: &quot;hqz&quot;,</span><br><span class="line">      friend: &#123;</span><br><span class="line">        name: &quot;hly&quot;,</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;);</span><br><span class="line">    //当直接传入info时，在源码里面可以看出，默认把deep属性设置成true，所以可以进行深度监听</span><br><span class="line">    // watch(info, (newValue, oldValue) =&gt; &#123;</span><br><span class="line">    //   console.log(newValue, oldValue);</span><br><span class="line">    // &#125;);</span><br><span class="line"></span><br><span class="line">    watch(</span><br><span class="line">      () =&gt; info.friend.name, //()=&gt;&#123;(&#123;...info&#125;)&#125;</span><br><span class="line">      (newValue, oldValue) =&gt; &#123;</span><br><span class="line">        console.log(newValue, oldValue);</span><br><span class="line">      &#125;,</span><br><span class="line">      &#123;</span><br><span class="line">        deep: true,</span><br><span class="line">        immediate: true,</span><br><span class="line">      &#125;</span><br><span class="line">    );</span><br><span class="line"></span><br><span class="line">    const changeInfo = () =&gt; &#123;</span><br><span class="line">      info.friend.name = &quot;kobe&quot;;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      changeInfo,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="生命周期钩子-setup"><a href="#生命周期钩子-setup" class="headerlink" title="生命周期钩子(setup)"></a>生命周期钩子(setup)</h2><p>我们前面说过 setup 可以用来替代 data 、 methods 、 computed 、watch 等等这些选项，也可以替代 生命周期钩子。</p>
<p>那么setup中如何使用生命周期函数呢？</p>
<p>可以使用直接导入的 onX 函数注册生命周期钩子；</p>
<p>不过少了之前的beforeCreate和created因为setup的执行都在这两个生命周期函数之前执行，所以可以在setup里面做这两个生命周期做的事情</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;changeNum&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, onMounted, onUpdated &#125; from &quot;vue&quot;;//</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      console.log(&quot;App Mounted&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">    const counter = ref(0);</span><br><span class="line">    const changeNum = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">    &#125;;</span><br><span class="line">    onUpdated(() =&gt; &#123;</span><br><span class="line">      console.log(&quot;App Updated&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      changeNum,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="provide和inject-setup"><a href="#provide和inject-setup" class="headerlink" title="provide和inject(setup)"></a>provide和inject(setup)</h2><p>事实上我们之前还学习过Provide和Inject，Composition API也可以替代之前的 Provide 和 Inject 的选项。</p>
<p>我们可以通过 provide来提供数据：</p>
<p>可以通过 provide 方法来定义每个 Property； </p>
<p>provide可以传入两个参数：</p>
<p>name：提供的属性名称；</p>
<p>value：提供的属性值；</p>
<p>在 后代组件 中可以通过 inject 来注入需要的属性和对应的值：</p>
<p>可以通过 inject 来注入需要的内容；</p>
<p>inject可以传入两个参数：</p>
<p>要 inject 的 property 的 name； </p>
<p>默认值；</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home&gt;&lt;/home&gt;</span><br><span class="line">    &lt;button @click=&quot;addInApp&quot;&gt;App+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; provide, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const name = ref(&quot;hqz&quot;);</span><br><span class="line">    let counter = ref(100);</span><br><span class="line">    provide(&quot;name&quot;, name);</span><br><span class="line">    provide(&quot;counter&quot;, counter);</span><br><span class="line">    const addInApp = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      addInApp,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>Home.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; name &#125;&#125;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &lt;button @click=&quot;addInHome&quot;&gt;Home+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; inject &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const name = inject(&quot;name&quot;);</span><br><span class="line">    const counter = inject(&quot;counter&quot;);</span><br><span class="line">    const addInHome = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      name,</span><br><span class="line">      counter,</span><br><span class="line">      addInHome,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id=""><a href="#" class="headerlink" title=""></a></h2><p>在上面的案例里，父组件和子组件都能对counter进行加操作，这是不符合单数据流规范的，因为如果一旦子组件也能修改，那么一旦发现错误，很难找到哪个地方出错，所以在目前这个案例子组件能进行修改，这是就需要readonly了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;home&gt;&lt;/home&gt;</span><br><span class="line">    &lt;button @click=&quot;addInApp&quot;&gt;App+1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; provide, ref, readonly &#125; from &quot;vue&quot;;</span><br><span class="line">import Home from &quot;./Home.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Home,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const name = ref(&quot;hqz&quot;);</span><br><span class="line">    let counter = ref(100);</span><br><span class="line">    provide(&quot;name&quot;, readonly(name));</span><br><span class="line">    provide(&quot;counter&quot;, readonly(counter));</span><br><span class="line">    const addInApp = () =&gt; &#123;</span><br><span class="line">      counter.value++;</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      addInApp,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="compositionAPI练习"><a href="#compositionAPI练习" class="headerlink" title="compositionAPI练习"></a>compositionAPI练习</h2><p> useCounter,计数器</p>
<p> useTitle,更新网页名称</p>
<p> useScrollPosition,获取滚动XY</p>
<p> useMousemove,获取鼠标位置</p>
<p> useLocalStorage,缓存数据</p>
<p>用hooks封装这几个函数，然后通过一个公用的index.js导出</p>
<p>useCounter</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, computed &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> counter = ref(<span class="number">100</span>);</span><br><span class="line">  <span class="keyword">const</span> doubleCounter = computed(<span class="function">() =&gt;</span> counter.value * <span class="number">2</span>)</span><br><span class="line">  <span class="keyword">const</span> increment = <span class="function">() =&gt;</span> counter.value++</span><br><span class="line">  <span class="keyword">const</span> decrement = <span class="function">() =&gt;</span> counter.value--</span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    counter,</span><br><span class="line">    doubleCounter,</span><br><span class="line">    increment,</span><br><span class="line">    decrement</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>useTitle</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">title</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> refTitle = ref(title)</span><br><span class="line"></span><br><span class="line">  watch(refTitle, <span class="function">(<span class="params">newValue</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">document</span>.title = newValue;</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attr">immediate</span>: <span class="literal">true</span></span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> refTitle</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>useScrollPosition</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> scrollX = ref(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> scrollY = ref(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">document</span>.addEventListener(<span class="string">&quot;scroll&quot;</span>, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    scrollX.value = <span class="built_in">parseInt</span>(<span class="built_in">window</span>.scrollX);</span><br><span class="line">    scrollY.value = <span class="built_in">parseInt</span>(<span class="built_in">window</span>.scrollY);</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    scrollX,</span><br><span class="line">    scrollY</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>useMousemove</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> mouseX = ref(<span class="number">0</span>);</span><br><span class="line">  <span class="keyword">const</span> mouseY = ref(<span class="number">0</span>);</span><br><span class="line"></span><br><span class="line">  addEventListener(<span class="string">&quot;mousemove&quot;</span>, <span class="function">(<span class="params">event</span>) =&gt;</span> &#123;</span><br><span class="line">    mouseX.value = event.pageX;</span><br><span class="line">    mouseY.value = event.pageY;</span><br><span class="line">  &#125;)</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> &#123;</span><br><span class="line">    mouseX,</span><br><span class="line">    mouseY</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>useLocalStorage</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; ref, watch &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">key, value</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> data = ref(value);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (value) &#123;</span><br><span class="line">    <span class="built_in">window</span>.localStorage.setItem(key, <span class="built_in">JSON</span>.stringify(value));</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    data.value = <span class="built_in">window</span>.localStorage.getItem(key)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  watch(data, <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">window</span>.localStorage.setItem(key, <span class="built_in">JSON</span>.stringify(value));</span><br><span class="line">  &#125;)</span><br><span class="line">  <span class="keyword">return</span> data;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>index.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> useCounter <span class="keyword">from</span> <span class="string">&quot;./useCounter&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useTitle <span class="keyword">from</span> <span class="string">&quot;./useTitle&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useScrollPosition <span class="keyword">from</span> <span class="string">&quot;./useScrollPosition&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useMousemove <span class="keyword">from</span> <span class="string">&quot;./useMousemove&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> useLocalStorage <span class="keyword">from</span> <span class="string">&quot;./useLocalStorage&quot;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123;</span><br><span class="line">  useCounter,</span><br><span class="line">  useTitle,</span><br><span class="line">  useScrollPosition,</span><br><span class="line">  useMousemove,</span><br><span class="line">  useLocalStorage</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; counter &#125;&#125;</span><br><span class="line">    &#123;&#123; doubleCounter &#125;&#125;</span><br><span class="line"></span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; data &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;p class=&quot;content&quot;&gt;&lt;/p&gt;</span><br><span class="line">    &lt;div class=&quot;scroll&quot;&gt;</span><br><span class="line">      &lt;div&gt;scrollX:&#123;&#123; scrollX &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;scrollY:&#123;&#123; scrollY &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;mouseX:&#123;&#123; mouseX &#125;&#125;&lt;/div&gt;</span><br><span class="line">      &lt;div&gt;mouseY:&#123;&#123; mouseY &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;@vue/reactivity&quot;;</span><br><span class="line">import &#123;</span><br><span class="line">  useCounter,</span><br><span class="line">  useTitle,</span><br><span class="line">  useScrollPosition,</span><br><span class="line">  useMousemove,</span><br><span class="line">  useLocalStorage,</span><br><span class="line">&#125; from &quot;./hooks/index&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const &#123; counter, doubleCounter, increment, decrement &#125; = useCounter();</span><br><span class="line">    const refTitle = useTitle(&quot;hqz&quot;);</span><br><span class="line">    setTimeout(() =&gt; &#123;</span><br><span class="line">      refTitle.value = &quot;kobe&quot;;</span><br><span class="line">    &#125;, 1000);</span><br><span class="line"></span><br><span class="line">    const &#123; scrollX, scrollY &#125; = useScrollPosition();</span><br><span class="line">    const &#123; mouseX, mouseY &#125; = useMousemove();</span><br><span class="line"></span><br><span class="line">    const data = useLocalStorage(&quot;info&quot;, &#123; name: &quot;hqz&quot; &#125;);</span><br><span class="line">    console.log(data);</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">      doubleCounter,</span><br><span class="line">      increment,</span><br><span class="line">      decrement,</span><br><span class="line">      scrollX,</span><br><span class="line">      scrollY,</span><br><span class="line">      mouseX,</span><br><span class="line">      mouseY,</span><br><span class="line">      data,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.content &#123;</span><br><span class="line">  width: 3000px;</span><br><span class="line">  height: 5000px;</span><br><span class="line">&#125;</span><br><span class="line">.scroll &#123;</span><br><span class="line">  position: fixed;</span><br><span class="line">  right: 30px;</span><br><span class="line">  bottom: 20px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h1 id="other-components"><a href="#other-components" class="headerlink" title="other components"></a>other components</h1><h2 id="h函数"><a href="#h函数" class="headerlink" title="h函数"></a>h函数</h2><p> Vue推荐在绝大数情况下使用模板来创建你的HTML，然后一些特殊的场景，你真的需要JavaScript的完全编程的能力，这个时候你可以使用 <strong>渲染函数</strong> ，它<strong>比模板更接近编译器</strong>； </p>
<p>前面我们讲解过VNode和VDOM的改变：</p>
<p>Vue在生成真实的DOM之前，会将我们的节点转换成VNode，而VNode组合在一起形成一颗树结构，就是虚 拟DOM（VDOM）； </p>
<p>事实上，我们之前编写的 template 中的HTML 最终也是使用<strong>渲染函数</strong>生成对应的VNode； </p>
<p>那么，如果你想充分的利用JavaScript的编程能力，我们可以自己来编写 createVNode 函数，生成对应的VNode； </p>
<p>那么我们应该怎么来做呢？<strong>使用 h()函数：</strong></p>
<p>h() 函数是一个用于创建 vnode 的一个函数； </p>
<p>其实更准备的命名是 createVNode() 函数，但是为了简便在Vue将之简化为 h() 函数；</p>
<p><strong>template -&gt;vNode -&gt;真实元素</strong></p>
<p><strong>而template其实是通过compile转成render函数，调用render函数返回vNode</strong></p>
<h3 id="render函数实现计数器"><a href="#render函数实现计数器" class="headerlink" title="render函数实现计数器"></a>render函数实现计数器</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; h, ref &#125; from &quot;vue&quot;;</span><br><span class="line">// export default &#123;</span><br><span class="line">//   data() &#123;</span><br><span class="line">//     return &#123; counter: 0 &#125;;</span><br><span class="line">//   &#125;,</span><br><span class="line">//   render() &#123;</span><br><span class="line">//     return h(&quot;div&quot;, &#123; class: &quot;title&quot; &#125;, [</span><br><span class="line">//       h(&quot;h2&quot;, null, `当前计数$&#123;this.counter&#125;`),</span><br><span class="line">//       h(</span><br><span class="line">//         &quot;button&quot;,</span><br><span class="line">//         &#123;</span><br><span class="line">//           onclick: () =&gt; &#123;</span><br><span class="line">//             this.counter++;</span><br><span class="line">//           &#125;,</span><br><span class="line">//         &#125;,</span><br><span class="line">//         &quot;+1&quot;</span><br><span class="line">//       ),</span><br><span class="line">//       h(</span><br><span class="line">//         &quot;button&quot;,</span><br><span class="line">//         &#123;</span><br><span class="line">//           onclick: () =&gt; &#123;</span><br><span class="line">//             this.counter--;</span><br><span class="line">//           &#125;,</span><br><span class="line">//         &#125;,</span><br><span class="line">//         &quot;-1&quot;</span><br><span class="line">//       ),</span><br><span class="line">//     ]);</span><br><span class="line">//   &#125;,</span><br><span class="line">// &#125;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const counter = ref(0);</span><br><span class="line">    return () =&gt; &#123;</span><br><span class="line">      return h(&quot;div&quot;, &#123; class: &quot;title&quot; &#125;, [</span><br><span class="line">        h(&quot;h2&quot;, null, `当前计数$&#123;counter.value&#125;`),</span><br><span class="line">        h(</span><br><span class="line">          &quot;button&quot;,</span><br><span class="line">          &#123;</span><br><span class="line">            onclick: () =&gt; &#123;</span><br><span class="line">              counter.value++;</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;+1&quot;</span><br><span class="line">        ),</span><br><span class="line">        h(</span><br><span class="line">          &quot;button&quot;,</span><br><span class="line">          &#123;</span><br><span class="line">            onclick: () =&gt; &#123;</span><br><span class="line">              counter.value--;</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">          &quot;-1&quot;</span><br><span class="line">        ),</span><br><span class="line">      ]);</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="render函数-组件和插槽"><a href="#render函数-组件和插槽" class="headerlink" title="render函数(组件和插槽)"></a>render函数(组件和插槽)</h3><p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; h, ref &#125; from &quot;vue&quot;;</span><br><span class="line">import HelloWorld from &quot;./render函数(组件和插槽)/HelloWorld.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return h(&quot;div&quot;, null, [</span><br><span class="line">      h(HelloWorld, null, &#123;</span><br><span class="line">        default: (prop) =&gt;</span><br><span class="line">          h(&quot;span&quot;, null, `app传过去的helloworld中的内容:$&#123;prop&#125;`),</span><br><span class="line">      &#125;),</span><br><span class="line">    ]);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>HelloWorle.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; h &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return h(&quot;h2&quot;, null, [</span><br><span class="line">      h(&quot;h2&quot;, null, &quot;helloworld&quot;),</span><br><span class="line">      this.$slots.default</span><br><span class="line">        ? this.$slots.default(&quot;hqz&quot;)</span><br><span class="line">        : h(&quot;span&quot;, null, &quot;我是helloworld的插槽默认值&quot;),</span><br><span class="line">    ]);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="jsx的使用"><a href="#jsx的使用" class="headerlink" title="jsx的使用"></a>jsx的使用</h2><p>之前有需要配置，现在脚手架默认不用配置babel</p>
<p>如果我们希望<strong>在项目中使用jsx</strong>，那么我们<strong>需要添加对jsx的支持</strong>： </p>
<p>pjsx我们通常会通过Babel来进行转换（React编写的jsx就是通过babel转换的）；</p>
<p>对于Vue来说，我们只需要在Babel中配置对应的插件即可；</p>
<p>安装<strong>Babel支持Vue的jsx插件</strong>： npm install @vue/babel-plugin-jsx -D</p>
<p>在<strong>babel.config.js配置文件</strong>中配置插件</p>
<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import HelloWorld from &quot;./HelloWorld.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123; counter: 0 &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">  render() &#123;</span><br><span class="line">    const increment = () =&gt; this.counter++;</span><br><span class="line">    const decrement = () =&gt; this.counter--;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;当前计数：&#123;this.counter&#125;&lt;/h2&gt;</span><br><span class="line">        &lt;button onClick=&#123;increment&#125;&gt;+1&lt;/button&gt;</span><br><span class="line">        &lt;button onClick=&#123;decrement&#125;&gt;-1&lt;/button&gt;</span><br><span class="line">        &lt;HelloWorld&gt;&#123;&#123; default: (prop) =&gt; &quot;我是helloworld&quot; &#125;&#125;&lt;/HelloWorld&gt;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>HelloWorld.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  render() &#123;</span><br><span class="line">    return (</span><br><span class="line">      &lt;div&gt;</span><br><span class="line">        &lt;h2&gt;我是hello&#123;this.$props.message&#125;&lt;/h2&gt;</span><br><span class="line">        &#123;this.$slots.default ? this.$slots.default() : &quot;我是默认值&quot;&#125;</span><br><span class="line">      &lt;/div&gt;</span><br><span class="line">    );</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="自定义指令"><a href="#自定义指令" class="headerlink" title="自定义指令"></a>自定义指令</h2><p>在Vue的模板语法中我们学习过各种各样的指令：v-show、v-for、v-model等等，除了使用这些指令之外，<strong>Vue</strong>也允许我们来自定义自己的指令。</p>
<p>注意：在Vue中，代码的复用和抽象主要还是通过组件； </p>
<p>通常在某些情况下，你需要对DOM元素进行底层操作，这个时候就会用到自定义指令； </p>
<p> <strong>自定义指令分为两种：</strong></p>
<p>自定义局部指令：组件中通过 directives 选项，只能在当前组件中使用；</p>
<p>自定义全局指令：app的 directive 方法，可以在任意组件中被使用；</p>
<p> <strong>比如我们来做一个非常简单的案例：当某个元素挂载完成后可以自定获取焦点</strong></p>
<p>实现方式一：如果我们使用默认的实现方式； </p>
<p>实现方式二：自定义一个 v-focus 的局部指令； </p>
<p>实现方式三：自定义一个 v-focus 的全局指令；</p>
<p>默认实现:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; ref=&quot;input&quot; /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const input = ref(0);</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      input.value.focus();</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      input,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>方式二：定义v-focus的局部指令</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;input type=&quot;text&quot; v-focus /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  //局部定义</span><br><span class="line">  // directives: &#123;</span><br><span class="line">  //   focus: &#123;</span><br><span class="line">  //     mounted(el, bindings, vnode, preVnode) &#123;</span><br><span class="line">  //       el.focus();</span><br><span class="line">  //     &#125;,</span><br><span class="line">  //   &#125;,</span><br><span class="line">  // &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<p>方式三:自定义一个v-focus全局指令</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./03_自定义指令/App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> app = createApp(App)</span><br><span class="line">app.directive(<span class="string">&quot;focus&quot;</span>, &#123;</span><br><span class="line">  <span class="function"><span class="title">mounted</span>(<span class="params">el</span>)</span> &#123;</span><br><span class="line">    el.focus()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line">app.mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="自定义指令练习"><a href="#自定义指令练习" class="headerlink" title="自定义指令练习"></a>自定义指令练习</h3><p>在开发中，大多数情况下从服务器获取到的都是时间戳； </p>
<p>我们需要将时间戳转换成具体格式化的时间来展示； </p>
<p>在Vue2中我们可以通过过滤器来完成；</p>
<p>在Vue3中我们可以通过 计算属性（computed） 或者 自定义一个方法（methods） 来完成；</p>
<p>其实我们还可以通过一个自定义的指令来完成； </p>
<p>我们来实现一个可以自动对<strong>时间格式化的指令v-format-time</strong>： </p>
<p>这里我封装了一个函数，在首页中我们只需要调用这个函数并且传入app即可；</p>
<p>实现从服务器拿到一个时间戳，然后通过自定义指令，转换成正常格式</p>
<p>编写一个index,js统一出口在App.vue接收app，然后再导入各种指令传入app</p>
<p>index.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> registerFormatTime <span class="keyword">from</span> <span class="string">&quot;./format-time&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">registerDirective</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  registerFormatTime(app)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>format-time.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&quot;dayjs&quot;</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> <span class="title">registerFromatTime</span>(<span class="params">app</span>) </span>&#123;</span><br><span class="line">  app.directive(<span class="string">&quot;format-time&quot;</span>, &#123;</span><br><span class="line">    <span class="function"><span class="title">mounted</span>(<span class="params">el, bindings</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">const</span> textContent = el.textContent</span><br><span class="line">      <span class="keyword">let</span> timeStamp = <span class="built_in">parseInt</span>(textContent)</span><br><span class="line">      <span class="keyword">if</span> (textContent.length == <span class="number">10</span>) timeStamp = timeStamp * <span class="number">1000</span></span><br><span class="line">      <span class="keyword">const</span> formatTime = <span class="string">&quot;YYYY-MM-DD HH-mm-ss&quot;</span></span><br><span class="line">      <span class="keyword">if</span> (!bindings.value) &#123;</span><br><span class="line">        el.textContent = dayjs(timeStamp).format(formatTime)</span><br><span class="line">      &#125; <span class="keyword">else</span> el.textContent = dayjs(timeStamp).format(bindings.value)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2 v-format-time=&quot;&#x27;YYYY-MM-DD&#x27;&quot;&gt;&#123;&#123; timestamp &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  data() &#123;</span><br><span class="line">    return &#123;</span><br><span class="line">      timestamp: &quot;1631365667&quot;,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="内置组件teleport"><a href="#内置组件teleport" class="headerlink" title="内置组件teleport"></a>内置组件teleport</h2><p>在组件化开发中，我们<strong>封装一个组件A</strong>，在<strong>另外一个组件B中使用</strong>： </p>
<p>那么组件A中template的元素，会被挂载到组件B中template的某个位置；</p>
<p>最终我们的应用程序会形成<strong>一颗DOM树结构</strong>； </p>
<p>但是某些情况下，我们希望<strong>组件不是挂载在这个组件树上</strong>的，可能是<strong>移动到Vue app之外的其他位置</strong>： </p>
<p>比如移动到body元素上，或者我们有其他的div#app之外的元素上；</p>
<p>这个时候我们就可以通过teleport来完成； </p>
<p> <strong>Teleport是什么呢？</strong></p>
<p>它是一个Vue提供的内置组件，类似于react的Portals； </p>
<p>teleport翻译过来是心灵传输、远距离运输的意思；</p>
<p>它有两个属性：</p>
<p>to：指定将其中的内容移动到的目标元素，可以使用选择器；</p>
<p>disabled：是否禁用 teleport 的功能；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;teleport to=&quot;#hqz&quot;&gt;</span><br><span class="line">      &lt;h2&gt;&#123;&#123; counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">      &lt;button&gt;+1&lt;/button&gt;</span><br><span class="line">      &lt;hello-world&gt;&lt;/hello-world&gt;</span><br><span class="line">    &lt;/teleport&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- 默认和上面合并 --&gt;</span><br><span class="line">    &lt;teleport to=&quot;#hqz&quot;&gt;</span><br><span class="line">      &lt;h2&gt;ainiai&lt;/h2&gt;</span><br><span class="line">    &lt;/teleport&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref &#125; from &quot;vue&quot;;</span><br><span class="line">import HelloWorld from &quot;./HelloWorld.vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  components: &#123; HelloWorld &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const counter = ref(0);</span><br><span class="line">    return &#123;</span><br><span class="line">      counter,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="vue插件"><a href="#vue插件" class="headerlink" title="vue插件"></a>vue插件</h2><p>通常我们<strong>向Vue全局添加一些功能</strong>时，会采用<strong>插件的模式，它有两种编写方式</strong>： </p>
<p>对象类型：一个对象，但是必须包含一个 install 的函数，该函数会在安装插件时执行；</p>
<p>函数类型：一个function，这个函数会在安装插件时自动执行； </p>
<p>插件可以<strong>完成的功能没有限制</strong>，比如下面的几种都是可以的：</p>
<p>添加全局方法或者 property，通过把它们添加到 config.globalProperties 上实现； </p>
<p>添加全局资源：指令/过滤器/过渡等；</p>
<p>通过全局 mixin 来添加一些组件选项； </p>
<p>一个库，提供自己的 API，同时提供上面提到的一个或多个功能；</p>
<p>plugin_object.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="function"><span class="title">install</span>(<span class="params">app</span>)</span> &#123;</span><br><span class="line">    app.config.globalProperties.$name = <span class="string">&quot;hqz&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>plugin_function.js</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="function"><span class="keyword">function</span> (<span class="params">app</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(app);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>App.vue</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;foo&quot;&gt;点击&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; getCurrentInstance &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  created() &#123;</span><br><span class="line">    console.log(this.$name);</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    foo() &#123;</span><br><span class="line">      console.log(this.$name);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const instance = getCurrentInstance();</span><br><span class="line">    console.log(instance.appContext.config.globalProperties.$name);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style  scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h1 id="Vue3源码的学习"><a href="#Vue3源码的学习" class="headerlink" title="Vue3源码的学习"></a>Vue3源码的学习</h1><h2 id="虚拟DOM的渲染过程"><a href="#虚拟DOM的渲染过程" class="headerlink" title="虚拟DOM的渲染过程"></a>虚拟DOM的渲染过程</h2><p>template经过compiler编译器编译成render函数，render函数返回的就是一个个VNode虚拟结点，然后通过渲染器转成真实的元素，被浏览器解析显示出来</p>
<h2 id="虚拟DOM的优势"><a href="#虚拟DOM的优势" class="headerlink" title="虚拟DOM的优势"></a>虚拟DOM的优势</h2><p><strong>目前框架都会引入虚拟DOM来对真实的DOM进行抽象，这样做有很多的好处：</strong></p>
<p>首先是可以对真实的元素节点进行抽象，抽象成VNode（虚拟节点），这样方便后续对其进行各种操作：</p>
<p>因为对于直接操作DOM来说是有很多的限制的，比如diff、clone等等，但是使用JavaScript编程语言来操作这些，就变得非常的简单；</p>
<p>我们可以使用JavaScript来表达非常多的逻辑，而对于DOM本身来说是非常不方便的；</p>
<p>其次是方便实现跨平台，包括你可以将VNode节点渲染成任意你想要的节点</p>
<p>如渲染在canvas、WebGL、SSR、Native（iOS、Android）上；</p>
<p>并且Vue允许你开发属于自己的渲染器（renderer），在其他的平台上渲染；</p>
<h2 id="实现一个Mini-Vue"><a href="#实现一个Mini-Vue" class="headerlink" title="实现一个Mini-Vue"></a>实现一个Mini-Vue</h2><p>这里我们实现一个简洁版的Mini-Vue框架，该Vue包括三个模块：</p>
<p>渲染系统模块；runtime  vNode-&gt;真实dom</p>
<p>可响应式系统模块；reactive</p>
<p>应用程序入口模块；createApp(rootComponent).mount(‘#app’)</p>
<h1 id="vueRouter"><a href="#vueRouter" class="headerlink" title="vueRouter"></a>vueRouter</h1><h2 id="认识前端路由"><a href="#认识前端路由" class="headerlink" title="认识前端路由"></a>认识前端路由</h2><p><strong>路由其实是网络工程中的一个术语：</strong> </p>
<p>在架构一个网络时，非常重要的两个设备就是路由器和交换机。 </p>
<p>当然，目前在我们生活中路由器也是越来越被大家所熟知，因为我们生活中都会用到路由器： </p>
<p>事实上，路由器主要维护的是一个映射表； </p>
<p>映射表会决定数据的流向；</p>
<p>路由的概念在软件工程中出现，最早是在后端路由中实现的，原因是web的发展主要经历了这样一些阶段：</p>
<p>后端路由阶段；</p>
<p>前后端分离阶段；</p>
<p>单页面富应用（SPA）；</p>
<h2 id="SPA开发"><a href="#SPA开发" class="headerlink" title="SPA开发"></a>SPA开发</h2><p>前端映射关系</p>
<p>路径-组件</p>
<p>/home- Home.vue</p>
<p>/about- About.vue</p>
<p>/category-Category.vue</p>
<p>假设有这样地址</p>
<p><a target="_blank" rel="noopener" href="http://baidu.com/home">http://baidu.com/home</a></p>
<p><a target="_blank" rel="noopener" href="http://baidu.com/about">http://baidu.com/about</a></p>
<p>当我每次点击切换了路径后都会从服务器重新请求静态资源，那么如果不想重新请求有两种方式</p>
<p>第一种就是在路径后面跟上哈希值，<a target="_blank" rel="noopener" href="http://baidu.com/#home%E8%BF%99%E6%A0%B7%E4%B8%8D%E4%BC%9A%E5%8E%BB%E5%86%8D%E6%AC%A1%E8%AF%B7%E6%B1%82%E8%B5%84%E6%BA%90%E8%B5%84%E6%BA%90">http://baidu.com/#home这样不会去再次请求资源资源</a></p>
<p>第二种是在用history模式改变URL</p>
<h2 id="URL的hash"><a href="#URL的hash" class="headerlink" title="URL的hash"></a>URL的hash</h2><p>前端路由是如何做到URL和内容进行映射呢？监听URL的改变。 </p>
<p> <strong>URL的hash</strong></p>
<p>URL的hash也就是锚点(#), 本质上是改变window.location的href属性； </p>
<p>我们可以通过直接赋值location.hash来改变href, 但是页面不发生刷新；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=&quot;en&quot;&gt;</span><br><span class="line"></span><br><span class="line">&lt;head&gt;</span><br><span class="line">  &lt;meta charset=&quot;UTF-8&quot;&gt;</span><br><span class="line">  &lt;meta http-equiv=&quot;X-UA-Compatible&quot; content=&quot;IE=edge&quot;&gt;</span><br><span class="line">  &lt;meta name=&quot;viewport&quot; content=&quot;width=device-width, initial-scale=1.0&quot;&gt;</span><br><span class="line">  &lt;title&gt;Document&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"></span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;a href=&quot;#/home&quot;&gt;home&lt;/a&gt;</span><br><span class="line">    &lt;a href=&quot;#/about&quot;&gt;about&lt;/a&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">  &lt;div class=&quot;content&quot;&gt;default&lt;/div&gt;</span><br><span class="line">  &lt;script&gt;</span><br><span class="line">    const contentEl = document.querySelector(&quot;.content&quot;)</span><br><span class="line">    window.addEventListener(&quot;hashchange&quot;, () =&gt; &#123;</span><br><span class="line">      switch (location.hash) &#123;</span><br><span class="line">        case &quot;#/home&quot;:</span><br><span class="line">          contentEl.innerHTML = &quot;home&quot;; break;</span><br><span class="line">        case &quot;#/about&quot;:</span><br><span class="line">          contentEl.innerHTML = &quot;about&quot;; break;</span><br><span class="line">        default: contentEl.innerHTML = &quot;default&quot;; break;</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;)</span><br><span class="line">  &lt;/script&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line"></span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>



<h2 id="HTML5的history"><a href="#HTML5的history" class="headerlink" title="HTML5的history"></a>HTML5的history</h2><p>当我按下面这么写的时候</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>default<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>这样<strong>默认情况下</strong>点击链接后路径是会被修改的，当我开启一个本地服务器地址</p>
<p>127.0.0.1:5000时点击后路径变成127.0.0.1:5000/home这样浏览器会根据修改后的路径去请求新的静态资源，然后返回了新的资源后浏览器是不解析新的地址127.0.0.1:5000/home，所以点击后获取不到资源</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span>Document<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>home<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/about&quot;</span>&gt;</span>about<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;content&quot;</span>&gt;</span>default<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> aEls = <span class="built_in">document</span>.getElementsByTagName(<span class="string">&quot;a&quot;</span>);</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> contentEl = <span class="built_in">document</span>.querySelector(<span class="string">&quot;.content&quot;</span>)</span></span><br><span class="line"><span class="javascript">    <span class="keyword">const</span> changecontent = <span class="function">() =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">      <span class="keyword">switch</span> (location.pathname) &#123;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">case</span> <span class="string">&quot;/home&quot;</span>: contentEl.innerHTML = <span class="string">&quot;home&quot;</span>; <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">case</span> <span class="string">&quot;/about&quot;</span>: contentEl.innerHTML = <span class="string">&quot;about&quot;</span>; <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">        <span class="keyword">default</span>: contentEl.innerHTML = <span class="string">&quot;default&quot;</span>; <span class="keyword">break</span>;</span></span><br><span class="line"><span class="javascript">      &#125;</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript">    <span class="keyword">for</span> (<span class="keyword">let</span> aEl <span class="keyword">of</span> aEls) &#123;</span></span><br><span class="line"><span class="javascript">      aEl.addEventListener(<span class="string">&quot;click&quot;</span>, <span class="function"><span class="params">e</span> =&gt;</span> &#123;</span></span><br><span class="line"><span class="javascript">        e.preventDefault();  <span class="comment">//阻止了默认行为，加了下面的pushState操作后地址发生了变化，服务器也不会再去请求资源</span></span></span><br><span class="line"><span class="javascript">        <span class="keyword">const</span> href = aEl.getAttribute(<span class="string">&quot;href&quot;</span>)</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        <span class="comment">//加了这一行后面的路径就变成 /home ，压栈思想</span></span></span><br><span class="line"><span class="javascript">        <span class="comment">// history.pushState(&#123;&#125;, &quot;&quot;, href)</span></span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">        history.replaceState(&#123;&#125;, <span class="string">&quot;&quot;</span>, href) <span class="comment">//相当于作替换页面，当点击路径改变的时候，返回键禁止</span></span></span><br><span class="line"><span class="javascript">        changecontent()</span></span><br><span class="line"><span class="javascript">      &#125;)</span></span><br><span class="line"><span class="javascript">    &#125;</span></span><br><span class="line"><span class="javascript"></span></span><br><span class="line"><span class="javascript">    <span class="built_in">window</span>.addEventListener(<span class="string">&quot;popstate&quot;</span>, changecontent)<span class="comment">//后退操作</span></span></span><br><span class="line"><span class="javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="路由的简单使用步骤"><a href="#路由的简单使用步骤" class="headerlink" title="路由的简单使用步骤"></a>路由的简单使用步骤</h2><p>安装路由 npm install vue-router@4</p>
<p>使用vue-router的步骤: </p>
<p>第一步：创建路由组件的组件；</p>
<p>第二步：配置路由映射: 组件和路径映射关系的routes数组； </p>
<p>第三步：通过createRouter创建路由对象，并且传入routes和history模式；</p>
<p>第四步：使用路由: 通过<router-link>和<router-view>；</p>
<p>router-link 和router-view是组件</p>
<p>内部做法</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app.use(router)</span><br><span class="line">router.install = function(app)&#123;</span><br><span class="line">app.component(&quot;router-link&quot;,&#123;&#125;)</span><br><span class="line">app.component(&quot;router-view&quot;,&#123;&#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>第二三步：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&quot;../pages/Home.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> About <span class="keyword">from</span> <span class="string">&quot;../pages/About.vue&quot;</span></span><br><span class="line"><span class="keyword">import</span> &#123; createRouter, createWebHistory, createWebHashHistory &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//1.配置映射关系</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// &#123; path: &quot;/&quot;, component: Home &#125;,</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: Home &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>, <span class="attr">component</span>: About &#125;]</span><br><span class="line"></span><br><span class="line"><span class="comment">//2.创建一个路由对象router</span></span><br><span class="line"><span class="keyword">const</span> router = createRouter(&#123;</span><br><span class="line">  routes,</span><br><span class="line">  <span class="attr">history</span>: createWebHashHistory()</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> router</span><br></pre></td></tr></table></figure>



<p>第四步:</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;/home&quot;</span>&gt;</span>首页<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-link</span> <span class="attr">to</span>=<span class="string">&quot;about&quot;</span>&gt;</span>关于<span class="tag">&lt;/<span class="name">router-link</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>



<h2 id="路由的默认路径"><a href="#路由的默认路径" class="headerlink" title="路由的默认路径"></a>路由的默认路径</h2><p>就是当我进入网页时，怎么默认调到首页</p>
<p>默认情况下, 进入网站的首页, 我们希望<router-view>渲染首页的内容；</p>
<p>但是我们的实现中, 默认没有显示首页组件, 必须让用户点击才可以；</p>
<p>如何可以让<strong>路径</strong>默认跳到到<strong>首页</strong>, 并且<router-view>渲染首页组件呢? </p>
<p>我们在routes中又配置了一个映射：</p>
<p>path配置的是根路径: /</p>
<p>redirect是重定向, 也就是我们将根路径重定向到/home的路径下, 这样就可以得到我们想要的结果了</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  <span class="comment">// &#123; path: &quot;/&quot;, component: Home &#125;,</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: Home &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>, <span class="attr">component</span>: About &#125;]</span><br></pre></td></tr></table></figure>



<h2 id="router-link属性"><a href="#router-link属性" class="headerlink" title="router-link属性"></a>router-link属性</h2><p>to属性： 是一个字符串，或者是一个对象 </p>
<p>replace属性： 设置 replace 属性的话，当点击时，会调用 router.replace()，而不是 router.push()； </p>
<p>active-class属性： 设置激活a元素后应用的class，默认是router-link-active</p>
<p>exact-active-class属性： 链接精准激活时，应用于渲染的 <a> 的 class，默认是router-link-exact-active；</p>
<h2 id="路由的懒加载"><a href="#路由的懒加载" class="headerlink" title="路由的懒加载"></a>路由的懒加载</h2><p>当打包构建应用时，JavaScript 包会变得非常大，影响页面加载： </p>
<p>如果我们能把不同路由对应的组件分割成不同的代码块，然后当路由被访问的时候才加载对应组件，这样就会更加高效； </p>
<p>也可以提高首屏的渲染效率； </p>
<p>其实这里还是我们前面讲到过的webpack的分包知识，而Vue Router默认就支持动态来导入组件：</p>
<p>这是因为component可以传入一个组件，也可以接收一个函数，该函数 需要放回一个Promise； 而import函数就是返回一个Promise；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//2.路由懒加载</span></span><br><span class="line"><span class="keyword">const</span> routes = [</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="comment">/*webpackChunkName:&quot;home-chunk&quot; */</span><span class="string">&quot;../pages/Home.vue&quot;</span>) &#125; &#125;, <span class="comment">//返回一个promise对象</span></span><br><span class="line">  &#123; <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="comment">/*webpackChunkName:&quot;about-chunk&quot; */</span><span class="string">&quot;../pages/About.vue&quot;</span>) &#125; &#125;]</span><br></pre></td></tr></table></figure>



<h2 id="动态路由的基本匹配"><a href="#动态路由的基本匹配" class="headerlink" title="动态路由的基本匹配"></a>动态路由的基本匹配</h2><p>很多时候我们需要将给定匹配模式的路由映射到同一个组件：</p>
<p>例如，我们可能有一个 User 组件，它应该对所有用户进行渲染，但是用户的ID是不同的；</p>
<p>在Vue Router中，我们可以在路径中使用一个动态字段来实现，我们称之为 路径参数；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/users/:username/id/:id&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/users.vue&quot;</span>) &#125; &#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div id=&quot;app&quot;&gt;</span><br><span class="line">    &lt;router-link to=&quot;/home&quot;&gt;首页&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link to=&quot;/about&quot;&gt;关于&lt;/router-link&gt;</span><br><span class="line">    &lt;router-link :to=&quot;name&quot;&gt;用户&lt;/router-link&gt;</span><br><span class="line">    &lt;router-view /&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const name = &quot;/users/hqz/id/111&quot;;</span><br><span class="line">    return &#123; name &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h3 id="获取动态路由的值"><a href="#获取动态路由的值" class="headerlink" title="获取动态路由的值"></a>获取动态路由的值</h3><p>那么在User中如何获取到对应的值呢？</p>
<p>在template中，直接通过 $route.params获取值； </p>
<p>在created中，通过 this.$route.params获取值； </p>
<p>在setup中，我们要使用 vue-router库给我们提供的一个hook useRoute； </p>
<p>该Hook会返回一个Route对象，对象中保存着当前路由相关的值；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;user:&#123;&#123; $route.params.username &#125;&#125;-&#123;&#123; $route.params.id &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; useRoute &#125; from &quot;vue-router&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const route = useRoute();</span><br><span class="line">    console.log(route.params.username);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="NotFound"><a href="#NotFound" class="headerlink" title="NotFound"></a>NotFound</h2><p>对于哪些没有匹配到的路由，我们通常会匹配到固定的某个页面</p>
<p>比如NotFound的错误页面中，这个时候我们可编写一个动态路由用于匹配所有的页面；</p>
<p>我们可以通过 $route.params.pathMatch获取到传入的参数</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/:patchMatch(.*)&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/NotFound.vue&quot;</span>) &#125; &#125;]</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Page Not Found&lt;/h2&gt;</span><br><span class="line">    &lt;div&gt;您当前打开的页面离家出走了&lt;/div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; $route.params.patchMatch &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br></pre></td></tr></table></figure>



<p>在匹配规则加*</p>
<p>在/:pathMatch(.*)后面又加了一个 *；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/:patchMatch(.*)*&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/NotFound.vue&quot;</span>) &#125; &#125;]</span><br></pre></td></tr></table></figure>

<p>这样在通过获取值按数组保存的</p>
<p>[ “home”, “asdasd” ]</p>
<h2 id="路由的嵌套"><a href="#路由的嵌套" class="headerlink" title="路由的嵌套"></a>路由的嵌套</h2><p>什么是路由的嵌套呢？</p>
<p>目前我们匹配的Home、About、User等都属于底层路由，我们在它们之间可以来回进行切换；</p>
<p>但是呢，我们Home页面本身，也可能会在多个组件之间来回切换：比如Home中包括Product、Message，它们可以在Home内部来回切换；</p>
<p>这个时候我们就需要使用嵌套路由，在Home中也使用 router-view 来占位之后需要渲染的组件；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home&quot;</span> &#125;,</span><br><span class="line">&#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/home&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="comment">/*webpackChunkName:&quot;home-chunk&quot; */</span><span class="string">&quot;../pages/Home.vue&quot;</span>) &#125;,</span><br><span class="line">  <span class="attr">children</span>: [</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;/&quot;</span>, <span class="attr">redirect</span>: <span class="string">&quot;/home/message&quot;</span> &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;message&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/HomeMessage.vue&quot;</span>) &#125; &#125;,</span><br><span class="line">    &#123; <span class="attr">path</span>: <span class="string">&quot;shop&quot;</span>, <span class="attr">component</span>: <span class="function">() =&gt;</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/HomeShops.vue&quot;</span>) &#125; &#125;</span><br><span class="line">  ]</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-link to=&quot;/home/message&quot;&gt;消息&lt;/router-link&gt;</span><br><span class="line">&lt;router-link to=&quot;/home/shop&quot;&gt;商品&lt;/router-link&gt;</span><br><span class="line"></span><br><span class="line">&lt;router-view /&gt;</span><br></pre></td></tr></table></figure>



<h2 id="编程式导航"><a href="#编程式导航" class="headerlink" title="编程式导航"></a>编程式导航</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; uesRouter, useRouter &#125; <span class="keyword">from</span> <span class="string">&quot;vue-router&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  <span class="comment">// methods: &#123;</span></span><br><span class="line">  <span class="comment">//   jumpToAbout() &#123;</span></span><br><span class="line">  <span class="comment">//     this.$router.push(&quot;/about&quot;);</span></span><br><span class="line">  <span class="comment">//   &#125;,</span></span><br><span class="line">  <span class="comment">// &#125;,</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="title">setup</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> router = useRouter();</span><br><span class="line">    <span class="keyword">const</span> jumpToAbout = <span class="function">() =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// router.push(&quot;/about&quot;);</span></span><br><span class="line">      router.push(&#123;</span><br><span class="line">        <span class="attr">path</span>: <span class="string">&quot;/about&quot;</span>,</span><br><span class="line">        <span class="attr">query</span>: &#123; <span class="comment">//通过$route.query.的方式可以获取</span></span><br><span class="line">          <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">          <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">        &#125;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    <span class="keyword">const</span> name = <span class="string">&quot;/users/hqz/id/111&quot;</span>;</span><br><span class="line">    <span class="keyword">return</span> &#123; name, jumpToAbout &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="router-link的v-slot"><a href="#router-link的v-slot" class="headerlink" title="router-link的v-slot"></a>router-link的v-slot</h2><p>在vue-router3.x的时候，router-link有一个tag属性，可以决定router-link到底渲染成什么元素：</p>
<p> 但是在vue-router4.x开始，该属性被移除了；</p>
<p> 而给我们提供了更加具有灵活性的v-slot的方式来定制渲染的内容；</p>
<p> <strong>v-slot如何使用呢？</strong></p>
<p> 首先，我们需要使用custom表示我们整个元素要自定义</p>
<p> 如果不写，那么自定义的内容会被包裹在一个 a 元素中；</p>
<p> 其次，我们使用v-slot来作用域插槽来获取内部传给我们的值： </p>
<p> href：解析后的 URL； </p>
<p> route：解析后的规范化的route对象； </p>
<p> navigate：触发导航的函数；</p>
<p> isActive：是否匹配的状态； </p>
<p> isExactActive：是否是精准匹配的状态；</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- props:href 跳转的目标地址 --&gt;</span><br><span class="line">&lt;!-- props:route对象 --&gt;</span><br><span class="line">&lt;!-- props:navigate导航函数 --&gt;</span><br><span class="line">&lt;!-- props:isActive是否处于当前活跃状态 --&gt;</span><br><span class="line">&lt;!-- props：isExactActive是否处于当前精准状态 --&gt;</span><br><span class="line">&lt;!-- 可以用解构的方法，直接解构出全部 --&gt;</span><br><span class="line">&lt;!-- v-slot=&quot;&#123;href,route,navigate&#125;&quot; --&gt;</span><br><span class="line">&lt;router-link to=&quot;/home&quot; v-slot=&quot;props&quot; custom&gt;</span><br><span class="line">  &lt;!-- &lt;nav-bar title=&quot;首页&quot; /&gt; --&gt;</span><br><span class="line">  &lt;!-- &lt;button&gt;&#123;&#123; props.href &#125;&#125;&lt;/button&gt; --&gt;</span><br><span class="line">  &lt;!-- &lt;p&gt;&#123;&#123; props.route &#125;&#125;&lt;/p&gt; --&gt;</span><br><span class="line">  &lt;button @click=&quot;props.navigate&quot;&gt;1&lt;/button&gt;</span><br><span class="line">  &lt;button @click=&quot;props.navigate&quot;&gt;2&lt;/button&gt;</span><br><span class="line">  &lt;!-- &lt;span&gt;&#123;&#123; props.isActive &#125;&#125;&lt;/span&gt;</span><br><span class="line">  &lt;span&gt;&#123;&#123; props.isExactActive &#125;&#125;&lt;/span&gt; --&gt;</span><br><span class="line">&lt;/router-link&gt;</span><br></pre></td></tr></table></figure>



<h2 id="router-view的v-slot"><a href="#router-view的v-slot" class="headerlink" title="router-view的v-slot"></a>router-view的v-slot</h2><p>n router-view也提供给我们一个插槽，可以用于 <transition> 和 <keep-alive> 组件来包裹你的路由组件：</p>
<p>Component：要渲染的组件；</p>
<p>route：解析出的标准化路由对象</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;router-view v-slot=&quot;props&quot;&gt;</span><br><span class="line">  &lt;transition name=&quot;hqz&quot;&gt;</span><br><span class="line">    &lt;div&gt;</span><br><span class="line">      &lt;keep-alive&gt;&lt;component :is=&quot;props.Component&quot;&gt;&lt;/component&gt;&lt;/keep-alive&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/transition&gt;</span><br><span class="line">&lt;/router-view&gt;</span><br></pre></td></tr></table></figure>

<p>transition里要加根组件包裹，不然每次切换都会报警告    </p>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&lt;style scoped&gt;</span><br><span class="line"><span class="selector-class">.router-link-active</span> &#123;</span><br><span class="line">  <span class="attribute">color</span>: red;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hqz-enter-from</span>,</span><br><span class="line"><span class="selector-class">.hqz-leave-to</span> &#123;</span><br><span class="line">  <span class="attribute">opacity</span>: <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="selector-class">.hqz-enter-active</span>,</span><br><span class="line"><span class="selector-class">.hqz-leave-active</span> &#123;</span><br><span class="line">  <span class="attribute">transition</span>: opacity <span class="number">1s</span> ease;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h2 id="动态添加路由"><a href="#动态添加路由" class="headerlink" title="动态添加路由"></a>动态添加路由</h2><p>某些情况下我们可能需要动态的来添加路由：</p>
<p>比如根据用户不同的权限，注册不同的路由；</p>
<p>这个时候我们可以使用一个方法 addRoute； </p>
<p>如果我们是为route添加一个children路由，那么可以传入对应的name：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//动态添加路由</span></span><br><span class="line"><span class="keyword">const</span> Category = &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;/Category&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">component</span>(<span class="params"></span>)</span> &#123; <span class="keyword">return</span> <span class="keyword">import</span>(<span class="string">&quot;../pages/Category.vue&quot;</span>) &#125;</span><br><span class="line">&#125;</span><br><span class="line">router.addRoute(Category)</span><br><span class="line"></span><br><span class="line"><span class="comment">//动态添加二级路由</span></span><br><span class="line"><span class="comment">// const HomeMoment = (&quot;home&quot;, &#123;</span></span><br><span class="line"><span class="comment">//   path: &quot;/moment&quot;,</span></span><br><span class="line"><span class="comment">//   component: () =&gt; import(&quot;../pages/HomeMoment.vue&quot;)</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">//需要给对应的一级路由添加name属性，然后二级路由的path前面不要加/</span></span><br><span class="line">router.addRoute(<span class="string">&quot;home&quot;</span>, &#123;</span><br><span class="line">  <span class="attr">path</span>: <span class="string">&quot;moment&quot;</span>,</span><br><span class="line">  <span class="attr">component</span>: HomeMoment</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="动态删除路由"><a href="#动态删除路由" class="headerlink" title="动态删除路由"></a>动态删除路由</h2><p><strong>删除路由有以下三种方式：</strong></p>
<p>方式一：添加一个name相同的路由；</p>
<p>方式二：通过removeRoute方法，传入路由的名称； </p>
<p>方式三：通过addRoute方法的返回值回调；</p>
<p>路由的其他方法补充： </p>
<p>router.hasRoute()：检查路由是否存在。</p>
<p>router.getRoutes()：获取一个包含所有路由记录的数组。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//删除路由</span></span><br><span class="line"><span class="comment">//第一种</span></span><br><span class="line"><span class="comment">// router.removeRoute(&quot;moment&quot;)</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第二种</span></span><br><span class="line"><span class="comment">// const removeRoute = router.addRoute(&quot;home&quot;, &#123;</span></span><br><span class="line"><span class="comment">//   path: &quot;moment&quot;,</span></span><br><span class="line"><span class="comment">//   component: HomeMoment</span></span><br><span class="line"><span class="comment">// &#125;)</span></span><br><span class="line"><span class="comment">// removeRoute()</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//第三章 添加一个相同name的路由覆盖</span></span><br></pre></td></tr></table></figure>



<h2 id="路由导航守卫"><a href="#路由导航守卫" class="headerlink" title="路由导航守卫"></a>路由导航守卫</h2><p>vue-router 提供的导航守卫主要用来通过跳转或取消的方式守卫导航。</p>
<p><strong>全局的前置守卫beforeEach是在导航触发时会被回调的：</strong></p>
<p>它有两个参数：</p>
<p>to：即将进入的路由Route对象；</p>
<p>from：即将离开的路由Route对象；</p>
<p>它有返回值：</p>
<p>false：取消当前导航；</p>
<p>不返回或者undefined：进行默认导航；</p>
<p>返回一个路由地址：</p>
<p>可以是一个string类型的路径；</p>
<p>可以是一个对象，对象中包含path、query、params等信息；</p>
<p>可选的第三个参数：next</p>
<p>在Vue2中我们是通过next函数来决定如何进行跳转的；</p>
<p>但是在Vue3中我们是通过返回值来控制的，不再推荐使用next函数，这是因为开发中很容易调用多次next；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> token = <span class="built_in">window</span>.localStorage.getItem(<span class="string">&quot;token&quot;</span>)</span><br><span class="line">  <span class="keyword">if</span> (to.path !== (<span class="string">&quot;/login&quot;</span>)) &#123;</span><br><span class="line">    <span class="keyword">if</span> (!token) &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123; <span class="attr">path</span>: <span class="string">&quot;/login&quot;</span> &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// return false</span></span><br><span class="line">&#125;)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;login&quot;&gt;登入&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; useRouter &#125; from &quot;vue-router&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const router = useRouter();</span><br><span class="line">    const login = () =&gt; &#123;</span><br><span class="line">      window.localStorage.setItem(&quot;token&quot;, &quot;why&quot;);</span><br><span class="line">      router.push(&#123;</span><br><span class="line">        path: &quot;/home&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line">    return &#123;</span><br><span class="line">      login,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="historyApiFallback"><a href="#historyApiFallback" class="headerlink" title="historyApiFallback"></a><strong>historyApiFallback</strong></h2><p>前端路由，当我们在浏览器输入网址的时候，例如zhige98.cn，这是个域名，域名通过DNS解析得到服务器ip地址，服务器里面存放这页面所需要的静态资源，html/css/js之类的，这时服务器会给我们返回静态资源，当我们输入后通过重定向可以直接拿到例如zhige98.cn/home，对应着一个组件，组件转换为js代码被渲染出来，但是假设我现在输入zhige98.cn/home/message，刷新后浏览器会怎么样，其实是返回404错误的，因为通过这个地址刷新后浏览器就再次以目前这个地址向服务器请求对应的资源，但是服务器不认识这个地址，就会返回404错误，请求不到资源，一般来说会给服务器nginx配置，会在里面配置try_flie，意思就是先去根路径index.html里面找，这样如果我们输入zhige98.cn/home找不到就会返回index.html，之后渲染对应的组件</p>
<p>但是在案例里，为啥点击刷新还是会返回对应的资源，那个因为webpak里 vue-cli-&gt;webpack-&gt;historyAPIFallback:true,这也配置后，如果找不到就会默认返回根路径index.html，这样就可以找到了</p>
<p>historyApiFallback是开发中一个非常常见的属性，它主要的作用是解决SPA页面在路由跳转之后，进行页面刷新时，返回404的错误。 </p>
<p>boolean值：默认是false</p>
<p>如果设置为true，那么在刷新时，返回404错误时，会自动返回 index.html 的内容；</p>
<p>object类型的值，可以配置rewrites属性：</p>
<p>可以配置from来匹配路径，决定要跳转到哪一个页面；</p>
<p>事实上devServer中实现historyApiFallback功能是通过connect-history-api-fallback库的：</p>
<p>可以查看connect-history-api-fallback 文档</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">module.exports = &#123;</span><br><span class="line">  configureWebpack: &#123;</span><br><span class="line">    devServer: &#123;</span><br><span class="line">      historyApiFallback: false</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>





<h1 id="vueX"><a href="#vueX" class="headerlink" title="vueX"></a>vueX</h1><h2 id="什么是状态管理"><a href="#什么是状态管理" class="headerlink" title="什么是状态管理"></a>什么是状态管理</h2><p>在开发中，我们会的应用程序需要处理各种各样的数据，这些数据需要保存在我们应用程序中的某一个位置，对于这些数据的管理我们就称之为是 <strong>状态管理</strong>。 </p>
<p>在前面我们是如何管理自己的状态呢？</p>
<p>在Vue开发中，我们使用组件化的开发方式；而在组件中我们定义data或者在setup中返回使用的数据，这些数据我们称之为state； </p>
<p>在模块template中我们可以使用这些数据，模块最终会被渲染成DOM，我们称之为View； </p>
<p>在模块中我们会产生一些行为事件，处理这些行为事件时，有可能会修改state，这些行为事件我们称之为actions；</p>
<p>安装: npm install vuex@next</p>
<h2 id="Vue-devtool的安装"><a href="#Vue-devtool的安装" class="headerlink" title="Vue devtool的安装"></a>Vue devtool的安装</h2><p>vue其实提供了一个devtools，方便我们对组件或者vuex进行调试： </p>
<p>我们需要安装beta版本支持vue3，目前是6.0.0 beta15； </p>
<p>它有两种常见的安装方式：</p>
<p>方式一：通过chrome的商店； </p>
<p>方式二：手动下载代码，编译、安装； </p>
<p>方式一：通过Chrome商店安装： </p>
<p>由于某些原因我们可能不能正常登录Chrome商店，所以可以选择第二种</p>
<p>方式二：手动下载代码，编译、安装</p>
<p><a target="_blank" rel="noopener" href="https://github.com/vuejs/devtools/tree/v6.0.0-beta.15%E4%B8%8B%E8%BD%BD%E4%BB%A3%E7%A0%81%EF%BC%9B">https://github.com/vuejs/devtools/tree/v6.0.0-beta.15下载代码；</a> </p>
<p>执行 yarn install 安装相关的依赖；</p>
<p>执行 yarn run build 打包；</p>
<p>然后选择已解压的拓展程序，将shell-chrome选中就行</p>
<h2 id="创建store与组件中使用store"><a href="#创建store与组件中使用store" class="headerlink" title="创建store与组件中使用store"></a>创建store与组件中使用store</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">counter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.counter--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createApp &#125; <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span></span><br><span class="line"><span class="keyword">import</span> store <span class="keyword">from</span> <span class="string">&#x27;./store&#x27;</span></span><br><span class="line"><span class="keyword">import</span> App <span class="keyword">from</span> <span class="string">&#x27;./App.vue&#x27;</span></span><br><span class="line"></span><br><span class="line">createApp(App).use(store).mount(<span class="string">&#x27;#app&#x27;</span>)</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;当前计数:&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      this.$store.commit(&quot;increment&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement() &#123;</span><br><span class="line">      this.$store.commit(&quot;decrement&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style lang=&quot;scss&quot; scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="组件获取状态"><a href="#组件获取状态" class="headerlink" title="组件获取状态"></a>组件获取状态</h2><p>通过这种方法太过繁琐了</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;h2&gt;Home:&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br></pre></td></tr></table></figure>



<h2 id="辅助函数mapState"><a href="#辅助函数mapState" class="headerlink" title="辅助函数mapState"></a>辅助函数mapState</h2><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;Home:&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;Home:&#123;&#123; sCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState &#125; from &quot;vuex&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">  //第一种通过数组方法</span><br><span class="line">    ...mapState([&quot;counter&quot;, &quot;name&quot;, &quot;age&quot;]),</span><br><span class="line">    //第二种通过对象的方法</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      sCounter: (state) =&gt; state.counter,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="setup里面使用拿到状态state"><a href="#setup里面使用拿到状态state" class="headerlink" title="setup里面使用拿到状态state"></a>setup里面使用拿到状态state</h2><p>思路</p>
<p>第一种：从useStore()方法拿到store后通过store.state.的方法</p>
<p>第二种：通过mapState</p>
<p>因为mapState([])拿到的是一个对象，结构出来是一个个函数，这样使得在结构出来的时候直接展现的话是一个个函数对象</p>
<p>所以 需要通过storeStateFn接受拿到的对象，通过遍历对象拿到对象的key，也就是name这样的，通过storeStateFn[item]可以拿到value，也就是一个个函数体，保存在fn中，放入计算属性，计算属性返回的的ref对象，所以通过创建一个空对象</p>
<p>storeState[item]保存拿到的ref对象，这样storeState为{name:ref}，这样就可以返回…storeState,拿到一个个想要的数据，但是还有一点就是计算属性在读…mapState[]的时候本质上也是this.$store.state来读取的，但是setup里面没有绑定this，这时就需要通过bind({$store:store})得到类似这样给storeStateFn绑定一个this，这也fn也有这个this</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapState, useStore &#125; from &quot;vuex&quot;;</span><br><span class="line">import &#123; computed &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const store = useStore();</span><br><span class="line">    const sCounter = computed(() =&gt; store.state.counter);</span><br><span class="line">    const storeStateFn = mapState([&quot;counter&quot;, &quot;name&quot;, &quot;age&quot;]);</span><br><span class="line">    const storeState = &#123;&#125;;</span><br><span class="line">    Object.keys(storeStateFn).forEach((item) =&gt; &#123;</span><br><span class="line">      const fn = storeStateFn[item].bind(&#123; $store: store &#125;);</span><br><span class="line">      storeState[item] = computed(fn);</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      sCounter,</span><br><span class="line">      ...storeState,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>



<h2 id="Getters"><a href="#Getters" class="headerlink" title="Getters"></a>Getters</h2><h3 id="getters在computed里面使用"><a href="#getters在computed里面使用" class="headerlink" title="getters在computed里面使用"></a>getters在computed里面使用</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &#123;&#123; $store.getters.totalPrice &#125;&#125;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &#123;&#123; $store.getters.totalPriceCounter(1) &#125;&#125;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &#123;&#123; nameInfo &#125;&#125;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &#123;&#123; ageInfo &#125;&#125;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapgetter, mapGetters &#125; from &quot;vuex&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    // nameInfo() &#123;</span><br><span class="line">    //   return this.$store.getters.nameInfo;</span><br><span class="line">    // &#125;,</span><br><span class="line">    // ageInfo() &#123;</span><br><span class="line">    //   return this.$store.getters.ageInfo;</span><br><span class="line">    // &#125;,</span><br><span class="line">    // ...mapGetters([&quot;nameInfo&quot;, &quot;ageInfo&quot;]),</span><br><span class="line"></span><br><span class="line">    ...mapGetters(&#123;</span><br><span class="line">      nameInfo: &quot;nameInfo&quot;,</span><br><span class="line">      ageInfo: &quot;ageInfo&quot;,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;&#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">  getters: &#123;</span><br><span class="line">    <span class="function"><span class="title">totalPrice</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">let</span> totalPrice = <span class="number">0</span></span><br><span class="line">      <span class="keyword">for</span> (<span class="keyword">const</span> book <span class="keyword">of</span> state.books) &#123;</span><br><span class="line">        totalPrice += book.price * book.count</span><br><span class="line">      &#125;</span><br><span class="line">      <span class="keyword">return</span> totalPrice * getters.currentDiscount</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">currentDiscount</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> state.discount * <span class="number">0.6</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">totalPriceCounter</span>(<span class="params">state, getters</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="function"><span class="keyword">function</span> (<span class="params">n</span>) </span>&#123;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">let</span> totalPrice = <span class="number">0</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">const</span> book <span class="keyword">of</span> state.books) &#123;</span><br><span class="line">          <span class="keyword">if</span> (book.count &gt; n) &#123;</span><br><span class="line">            totalPrice += book.price * book.count</span><br><span class="line">          &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> totalPrice * getters.currentDiscount</span><br><span class="line">      &#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">nameInfo</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`name:<span class="subst">$&#123;state.name&#125;</span>`</span></span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">ageInfo</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="string">`age:<span class="subst">$&#123;state.age&#125;</span>`</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="mutations"><a href="#mutations" class="headerlink" title="mutations"></a>mutations</h2><h3 id="mutations的基本使用加辅助函数"><a href="#mutations的基本使用加辅助函数" class="headerlink" title="mutations的基本使用加辅助函数"></a>mutations的基本使用加辅助函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;$store.commit(&#x27;increment&#x27;)&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;$store.commit(&#x27;decrement&#x27;)&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;increment_n(&#123; n: 10 &#125;)&quot;&gt;+10&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapMutations &#125; from &quot;vuex&quot;;</span><br><span class="line">import &#123; INCREMENT_N &#125; from &quot;../store/mutation-type&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    // addTen() &#123;</span><br><span class="line">    //   // return this.$store.commit(&quot;incrementN&quot;, 10);</span><br><span class="line">    //   //另外写法</span><br><span class="line">    //   return this.$store.commit(&#123;</span><br><span class="line">    //     type: &quot;incrementN&quot;,</span><br><span class="line">    //     n: 10,</span><br><span class="line">    //   &#125;);</span><br><span class="line">    // &#125;,</span><br><span class="line">    // ...mapMutations([&quot;increment&quot;, &quot;decrement&quot;, &quot;incrementN()&quot;])</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const stateMutation = mapMutations([&quot;increment&quot;, &quot;decrement&quot;, INCREMENT_N]);</span><br><span class="line">    return &#123;</span><br><span class="line">      ...stateMutation,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">mutations: &#123;</span><br><span class="line">  <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    state.counter++</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">    state.counter--</span><br><span class="line">  &#125;,</span><br><span class="line">  [INCREMENT_N](state, payload) &#123;</span><br><span class="line">    state.counter += payload.n</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="function"><span class="title">addBannerData</span>(<span class="params">state, payload</span>)</span> &#123;</span><br><span class="line">    state.banner = payload</span><br><span class="line">  &#125;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>



<h2 id="actions"><a href="#actions" class="headerlink" title="actions"></a>actions</h2><h3 id="action的基本使用和辅助函数"><a href="#action的基本使用和辅助函数" class="headerlink" title="action的基本使用和辅助函数"></a>action的基本使用和辅助函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">actions: &#123;</span><br><span class="line">  //context可以用对象解构来写</span><br><span class="line">  incrementAction(context, payload) &#123;</span><br><span class="line">    // console.log(payload);//当我没有传数据过来时，默认打印出鼠标事件</span><br><span class="line">    setTimeout(() =&gt; &#123; context.commit(&quot;increment&quot;) &#125;, 1000)</span><br><span class="line">  &#125;,</span><br><span class="line">  decrementAction(context) &#123;</span><br><span class="line">    context.commit(&quot;decrement&quot;)</span><br><span class="line">  &#125;,</span><br><span class="line">  BannerDataAction(context, payload) &#123;</span><br><span class="line">    // axios.get(&quot;http://127.0.0.1:5500/home/multidata&quot;).then((res) =&gt; &#123;</span><br><span class="line">    //   context.commit(&quot;addBannerData&quot;, res.data.data.banner.lsit)</span><br><span class="line">    // &#125;)</span><br><span class="line">    // console.log(payload);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>基本使用：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import axios from &quot;axios&quot;;</span><br><span class="line">import &#123; onMounted &#125; from &quot;vue&quot;;</span><br><span class="line">import &#123; useStore &#125; from &quot;vuex&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      // this.$store.dispatch(&quot;incrementAction&quot;);</span><br><span class="line">      // 写法二</span><br><span class="line">      this.$store.dispatch(&#123;</span><br><span class="line">        type: &quot;incrementAction&quot;,</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">  mounted() &#123;</span><br><span class="line">    this.$store.dispatch(&quot;BannerDataAction&quot;, 111);</span><br><span class="line">  &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const store = useStore();</span><br><span class="line">    onMounted(() =&gt; &#123;</span><br><span class="line">      store.dispatch(&quot;BannerDataAction&quot;);</span><br><span class="line">    &#125;);</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="辅助函数"><a href="#辅助函数" class="headerlink" title="辅助函数"></a>辅助函数</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;hr /&gt;</span><br><span class="line">    &lt;h2&gt;Home:&#123;&#123; $store.state.counter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;!-- &lt;button @click=&quot;incrementAction&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrementAction&quot;&gt;-1&lt;/button&gt; --&gt;</span><br><span class="line">    &lt;button @click=&quot;add&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;sub&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; mapActions &#125; from &quot;vuex&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  // methods: &#123;</span><br><span class="line">  // ...mapActions([&quot;incrementAction&quot;, &quot;decrementAction&quot;]),</span><br><span class="line">  // ...mapActions(&#123;</span><br><span class="line">  //   add: &quot;incrementAction&quot;,</span><br><span class="line">  //   sub: &quot;decrementAction&quot;,</span><br><span class="line">  // &#125;),</span><br><span class="line">  // &#125;,</span><br><span class="line">  setup() &#123;</span><br><span class="line">    //因为...stateAction里面对象存放的是function，而点击可以执行函数，而不是展示，所以直接在click调用就行</span><br><span class="line">    // const stateAction = mapActions([&quot;incrementAction&quot;, &quot;decrementAction&quot;]);</span><br><span class="line">    const stateAction1 = mapActions(&#123;</span><br><span class="line">      add: &quot;incrementAction&quot;,</span><br><span class="line">      sub: &quot;decrementAction&quot;,</span><br><span class="line">    &#125;);</span><br><span class="line">    return &#123;</span><br><span class="line">      // ...stateAction,</span><br><span class="line">      ...stateAction1,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h3 id="action的异步操作"><a href="#action的异步操作" class="headerlink" title="action的异步操作"></a>action的异步操作</h3><p>Action 通常是异步的，那么如何知道 action 什么时候结束呢？</p>
<p>我们可以通过让action返回Promise，在Promise的then中来处理完成后的操作；</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="keyword">const</span> promise = <span class="built_in">this</span>.$store.dispatch(<span class="string">&quot;BannerDataAction&quot;</span>, <span class="number">111</span>);</span><br><span class="line">  promise</span><br><span class="line">    .then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(res);</span><br><span class="line">    &#125;)</span><br><span class="line">    .catch(<span class="function">(<span class="params">err</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(err);</span><br><span class="line">    &#125;);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="function"><span class="title">BannerDataAction</span>(<span class="params">context, payload</span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">new</span> <span class="built_in">Promise</span>(<span class="function">(<span class="params">reslove, reject</span>) =&gt;</span> &#123;</span><br><span class="line">      axios.get(<span class="string">&quot;http://127.0.0.1:5500/home/multidata&quot;</span>).then(<span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">        context.commit(<span class="string">&quot;addBannerData&quot;</span>, res.data.data.banner.lsit)</span><br><span class="line">      &#125;)</span><br><span class="line">      <span class="built_in">console</span>.log(payload);</span><br><span class="line">      reslove(<span class="string">&quot;res&quot;</span>)</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br></pre></td></tr></table></figure>



<h2 id="modules"><a href="#modules" class="headerlink" title="modules"></a>modules</h2><h3 id="modules的基本使用加命名空间"><a href="#modules的基本使用加命名空间" class="headerlink" title="modules的基本使用加命名空间"></a>modules的基本使用加命名空间</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; createStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span></span><br><span class="line"><span class="keyword">import</span> home <span class="keyword">from</span> <span class="string">&quot;./modules/Home&quot;</span></span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&quot;./modules/User&quot;</span></span><br><span class="line"><span class="keyword">const</span> store = createStore(&#123;</span><br><span class="line">  <span class="function"><span class="title">state</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      <span class="attr">rootCounter</span>: <span class="number">0</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">mutations</span>: &#123;</span><br><span class="line">    <span class="function"><span class="title">increment</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.rootCounter++</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="function"><span class="title">decrement</span>(<span class="params">state</span>)</span> &#123;</span><br><span class="line">      state.rootCounter--</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">modules</span>: &#123;</span><br><span class="line">    home,</span><br><span class="line">    user</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> store</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;root:&#123;&#123; $store.state.rootCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;Home:&#123;&#123; $store.state.home.homeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; $store.state.user.userCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; $store.getters[&quot;home/doubleHomeCounter&quot;] &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">export default &#123;</span><br><span class="line">  methods: &#123;</span><br><span class="line">    increment() &#123;</span><br><span class="line">      this.$store.commit(&quot;home/increment&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">    decrement() &#123;</span><br><span class="line">      this.$store.dispatch(&quot;home/decrementAction&quot;);</span><br><span class="line">    &#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h3 id="modules辅助函数在optionAIP和setup中使用（三种写法）"><a href="#modules辅助函数在optionAIP和setup中使用（三种写法）" class="headerlink" title="modules辅助函数在optionAIP和setup中使用（三种写法）"></a>modules辅助函数在optionAIP和setup中使用（三种写法）</h3><p>推荐第一种</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; homeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;h2&gt;&#123;&#123; doubleHomeCounter &#125;&#125;&lt;/h2&gt;</span><br><span class="line">    &lt;button @click=&quot;increment&quot;&gt;+1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrement&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">    &lt;button @click=&quot;decrementAction&quot;&gt;-1&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">// import &#123; createNamespacedHelpers &#125; from &quot;vuex&quot;;</span><br><span class="line">// const &#123; mapState, mapGetters, mapMutations, mapActions &#125; =</span><br><span class="line">//   createNamespacedHelpers(&quot;home&quot;);</span><br><span class="line">import &#123; mapState, mapGetters, mapMutations, mapActions &#125; from &quot;vuex&quot;;</span><br><span class="line">import useState from &quot;../hooks/useState&quot;;</span><br><span class="line">import useGetters from &quot;../hooks/useGetters&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  computed: &#123;</span><br><span class="line">    //写法一：通过createNamespaceHelpers()从哪一个模块中拿出map。。使用</span><br><span class="line">    // ...mapState([&quot;homeCounter&quot;]),</span><br><span class="line">    // ...mapGetters([&quot;doubleHomeCounter&quot;]),</span><br><span class="line">    //写法二</span><br><span class="line">    // ...mapState(&quot;home&quot;, [&quot;homeCounter&quot;]),</span><br><span class="line">    // ...mapGetters(&quot;home&quot;, [&quot;doubleHomeCounter&quot;]),</span><br><span class="line">    // 写法三</span><br><span class="line">    ...mapState(&#123;</span><br><span class="line">      homeCounter: (state) =&gt; state.home.homeCounter,</span><br><span class="line">    &#125;),</span><br><span class="line">    ...mapGetters(&#123;</span><br><span class="line">      doubleHomeCounter: [&quot;home/doubleHomeCounter&quot;],</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    //写法一</span><br><span class="line">    // ...mapMutations([&quot;increment&quot;, &quot;decrement&quot;]),</span><br><span class="line">    // ...mapActions([&quot;decrementAction&quot;]),</span><br><span class="line">    //写法二</span><br><span class="line">    // ...mapMutations(&quot;home&quot;, [&quot;increment&quot;, &quot;decrement&quot;]),</span><br><span class="line">    // ...mapActions([&quot;home&quot;, &quot;decrementAction&quot;]),</span><br><span class="line"></span><br><span class="line">    //写法三</span><br><span class="line">    ...mapMutations(&#123;</span><br><span class="line">      increment: &quot;home/increment&quot;,</span><br><span class="line">      decrement: &quot;home/decrement&quot;,</span><br><span class="line">    &#125;),</span><br><span class="line">    ...mapActions(&#123;</span><br><span class="line">      decrementAction: &quot;home/decrementAction&quot;,</span><br><span class="line">    &#125;),</span><br><span class="line">  &#125;,</span><br><span class="line">  // setup() &#123;</span><br><span class="line">  //   const mapState = useState(&quot;home&quot;, [&quot;homeCounter&quot;]);</span><br><span class="line">  //   const mapGetter = useGetters(&quot;home&quot;, [&quot;doubleHomeCounter&quot;]);</span><br><span class="line"></span><br><span class="line">  //   //需要用createNamespacedHelpers导出的mapMutations，mapActions</span><br><span class="line">  //   const mutation = mapMutations([&quot;increment&quot;, &quot;decrement&quot;]);</span><br><span class="line">  //   const action = mapActions([&quot;decrementAction&quot;]);</span><br><span class="line">  //   return &#123;</span><br><span class="line">  //     ...mapState,</span><br><span class="line">  //     ...mapGetter,</span><br><span class="line">  //     ...mutation,</span><br><span class="line">  //     ...action,</span><br><span class="line">  //   &#125;;</span><br><span class="line">  // &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> &#123; mapGetters, useStore &#125; <span class="keyword">from</span> <span class="string">&quot;vuex&quot;</span>;</span><br><span class="line"><span class="keyword">import</span> &#123; computed &#125; <span class="keyword">from</span> <span class="string">&quot;vue&quot;</span>;</span><br><span class="line"><span class="keyword">export</span> <span class="function"><span class="keyword">function</span> <span class="title">useMapper</span>(<span class="params">mapper, fn</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">const</span> store = useStore();</span><br><span class="line">  <span class="keyword">const</span> stateFn = fn(mapper);</span><br><span class="line">  <span class="keyword">const</span> stategetters = &#123;&#125;;</span><br><span class="line">  <span class="built_in">Object</span>.keys(stateFn).forEach(<span class="function">(<span class="params">key</span>) =&gt;</span> &#123;</span><br><span class="line">    stategetters[key] = computed(stateFn[key].bind(&#123; <span class="attr">$store</span>: store &#125;));</span><br><span class="line">  &#125;);</span><br><span class="line">  <span class="keyword">return</span> stategetters</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h2 id="nextTict"><a href="#nextTict" class="headerlink" title="nextTict"></a>nextTict</h2><p>官方解释：将回调推迟到下一个 DOM 更新周期之后执行。在更改了一些数据以等待 DOM 更新后立即使用它。 </p>
<p>比如我们有下面的需求： </p>
<p>点击一个按钮，我们会修改在h2中显示的message； </p>
<p>message被修改后，获取h2的高度； </p>
<p>实现上面的案例我们有三种方式：</p>
<p>方式一：在点击按钮后立即获取到h2的高度（错误的做法）</p>
<p>方式二：在updated生命周期函数中获取h2的高度（但是其他数据更新，也会执行该操作） </p>
<p>方式三：使用nexttick函数；</p>
<p>nexttick是如何做到的呢？</p>
<p>这涉及到微任务队列和宏任务队列</p>
<p>宏任务队列优先级比微任务队列低，在执行宏任务队列任务前会看下有没有微任务队列，如果有先执行微任务队列的</p>
<p>在这个案例里如果这么写</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">const addMessage = () =&gt; &#123;</span><br><span class="line">  message.value += &quot;哈哈哈&quot;;</span><br><span class="line">  console.log(content.value.offsetHeight);</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>打印出的高度会是0，因为默认点击事件时宏任务，在它执行的时候，微任务队列里面是没有任务的，执行这两句后 watch，组件的更新，生命周期的回调才执行，这样代表还没更新的时候，高度就返回了，所以是0，但是加了nextTick后，它的操作是把打印这句放到微任务就那些watch之后，这样在更新后就才打印，就可以获得正确高度</p>
<p>例如 这一段代码，难道是等它加一次就更新一次吗，肯定不是，是加到了100后，只更新一次</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> increment  = <span class="function">() =&gt;</span>&#123;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">let</span> i = <span class="number">0</span> ; i&lt;<span class="number">100</span> ; i++)&#123;</span><br><span class="line">        counter.value ++;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;div ref=&quot;content&quot; class=&quot;content&quot;&gt;&#123;&#123; message &#125;&#125;&lt;/div&gt;</span><br><span class="line">    &lt;button @click=&quot;addMessage&quot;&gt;+&lt;/button&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">import &#123; ref, nextTick &#125; from &quot;vue&quot;;</span><br><span class="line">export default &#123;</span><br><span class="line">  setup() &#123;</span><br><span class="line">    const message = ref(&quot;&quot;);</span><br><span class="line">    let content = ref(null);</span><br><span class="line">    const addMessage = () =&gt; &#123;</span><br><span class="line">      message.value += &quot;哈哈哈&quot;;</span><br><span class="line">      nextTick(() =&gt; &#123;</span><br><span class="line">        console.log(content.value.offsetHeight);</span><br><span class="line">      &#125;);</span><br><span class="line">    &#125;;</span><br><span class="line"></span><br><span class="line">    return &#123;</span><br><span class="line">      content,</span><br><span class="line">      addMessage,</span><br><span class="line">      message,</span><br><span class="line">    &#125;;</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.content &#123;</span><br><span class="line">  width: 70px;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>



<h1 id="TypeScript"><a href="#TypeScript" class="headerlink" title="TypeScript"></a>TypeScript</h1><h2 id="typescript编译运行环境"><a href="#typescript编译运行环境" class="headerlink" title="typescript编译运行环境"></a>typescript编译运行环境</h2><p>第一种：</p>
<p>全局安装：npm install typescript -g      tsc –version</p>
<p>这种是编写了tsc代码后，在终端编译 tsc xxx.ts然后编译成js文件后在index.html使用</p>
<p>第二种:</p>
<p>ts-node的安装 会作编译，并且让ts代码跑在node上面</p>
<p>安装ts-node</p>
<p> 另外ts-node需要依赖 tslib 和 @types/node 两个包： </p>
<p>现在，我们可以直接通过 ts-node 来运行TypeScript的代码：</p>
<p>第三种：</p>
<p>首先先创建webpack文件夹</p>
<p>npm install webpack webpack-cli  安装webpack 与 npm init安装依赖</p>
<p>编写webpack.config.js</p>
<p>有再安装 typescrpit 与 ts -loader </p>
<p>然后安装devServer与HtmlWebpackPlugin插件</p>
<p>因为写ts代码，所以需要一个文件 tsconfig.json 用tsc init指令可以生成</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&quot;path&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&quot;html-webpack-plugin&quot;</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  <span class="attr">mode</span>: <span class="string">&quot;development&quot;</span>,</span><br><span class="line">  <span class="attr">entry</span>: <span class="string">&quot;./src/main.ts&quot;</span>,</span><br><span class="line">  <span class="attr">output</span>: &#123;</span><br><span class="line">    <span class="attr">path</span>: path.resolve(__dirname, <span class="string">&quot;./dist&quot;</span>),</span><br><span class="line">    <span class="attr">filename</span>: <span class="string">&quot;bundle.js&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">devServer</span>: &#123;&#125;,</span><br><span class="line">  <span class="attr">resolve</span>: &#123;</span><br><span class="line">    <span class="attr">extensions</span>: [<span class="string">&quot;.ts&quot;</span>, <span class="string">&quot;.js&quot;</span>, <span class="string">&quot;.cjs&quot;</span>, <span class="string">&quot;.json&quot;</span>]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">module</span>: &#123;</span><br><span class="line">    <span class="attr">rules</span>: [</span><br><span class="line">      &#123;</span><br><span class="line">        <span class="attr">test</span>: <span class="regexp">/\.ts$/</span>,</span><br><span class="line">        loader: <span class="string">&quot;ts-loader&quot;</span></span><br><span class="line">      &#125;</span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">plugins</span>: [</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123;</span><br><span class="line">      <span class="attr">template</span>: <span class="string">&quot;./index.html&quot;</span></span><br><span class="line">    &#125;)</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="变量的一些笔记"><a href="#变量的一些笔记" class="headerlink" title="变量的一些笔记"></a>变量的一些笔记</h2><h3 id="never的使用场景"><a href="#never的使用场景" class="headerlink" title="never的使用场景"></a>never的使用场景</h3><p>如果最初没有加boolean类型检测，那么在函数()中放boolean可以消除，调用函数传boolean类型的错误，但是没有对boolean进行对应的操作，这时在最下面加一行default的情况，表示永不赋值message给cheak，如果不加boolean的对应操作就会报错</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">handleMessage</span>(<span class="params">message: <span class="built_in">string</span> | <span class="built_in">number</span> | <span class="built_in">boolean</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (<span class="keyword">typeof</span> message) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;string&quot;</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;是字符串类型&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;number&quot;</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;是数字类型&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&quot;boolean&quot;</span>: &#123;</span><br><span class="line">      <span class="built_in">console</span>.log(<span class="string">&quot;boolean类型&quot;</span>);</span><br><span class="line">      <span class="keyword">break</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="attr">default</span>: &#123;</span><br><span class="line">      <span class="keyword">const</span> cheak: <span class="built_in">never</span> = message</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">handleMessage(<span class="literal">true</span>)</span><br><span class="line"><span class="keyword">export</span>&#123;&#125;</span><br></pre></td></tr></table></figure>



<h3 id="tuple的应用场景"><a href="#tuple的应用场景" class="headerlink" title="tuple的应用场景"></a>tuple的应用场景</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// function useState(state: any) &#123;</span></span><br><span class="line"><span class="comment">//   let currentState = state</span></span><br><span class="line"><span class="comment">//   const changeState = (newState: any) =&gt; &#123;</span></span><br><span class="line"><span class="comment">//     currentState = newState</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">//   const arr: [any, (newState: any) =&gt; void] = [currentState, changeState]</span></span><br><span class="line"><span class="comment">//   return arr</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const [counter, setCounter] = useState(200)</span></span><br><span class="line"><span class="comment">// setCounter(100)</span></span><br><span class="line"><span class="comment">// console.log(counter);</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">useState</span>&lt;<span class="title">T</span>&gt;(<span class="params">state: T</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">let</span> currentState = state</span><br><span class="line">  <span class="keyword">const</span> changeState = <span class="function">(<span class="params">newState: T</span>) =&gt;</span> &#123;</span><br><span class="line">    currentState = newState</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// const arr:[string,number]=[&quot;hqz&quot;,123]</span></span><br><span class="line">  <span class="keyword">const</span> arr: [T, <span class="function">(<span class="params">newState: T</span>) =&gt;</span> <span class="built_in">void</span>] = [currentState, changeState]</span><br><span class="line">  <span class="keyword">return</span> arr</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> [counter, setCounter] = useState(<span class="number">200</span>)</span><br><span class="line">setCounter(<span class="number">100</span>)</span><br><span class="line"><span class="built_in">console</span>.log(counter);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="联合函数和可选类型加类型别名"><a href="#联合函数和可选类型加类型别名" class="headerlink" title="联合函数和可选类型加类型别名"></a>联合函数和可选类型加类型别名</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Union = <span class="built_in">string</span> | <span class="built_in">number</span></span><br><span class="line"><span class="keyword">type</span> point = &#123; <span class="attr">x</span>: <span class="built_in">number</span>, <span class="attr">y</span>: <span class="built_in">number</span>, z?: <span class="built_in">number</span> &#125;</span><br><span class="line"><span class="comment">//z：undefine|string</span></span><br><span class="line"><span class="comment">// 联合类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">union</span>(<span class="params">message: Union</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> message == <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="comment">//如果没有上面的判断是否字符串，直接转化小写会报错</span></span><br><span class="line">    message.toLowerCase()</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line"></span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    message.toFixed(<span class="number">1</span>)</span><br><span class="line">    <span class="built_in">console</span>.log(message);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 可选类型</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">PointCoordinate</span>(<span class="params">point: point</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(point.x);</span><br><span class="line">  <span class="built_in">console</span>.log(point.y);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">union(<span class="number">1</span>)</span><br><span class="line">PointCoordinate(&#123; <span class="attr">y</span>: <span class="number">2</span>, <span class="attr">x</span>: <span class="number">3</span> &#125;)</span><br></pre></td></tr></table></figure>



<h3 id="类型断言as"><a href="#类型断言as" class="headerlink" title="类型断言as"></a>类型断言as</h3><p>有时候TypeScript无法获取具体的类型信息，这个我们需要使用类型断言（Type Assertions）。</p>
<p>比如我们通过 document.getElementById，TypeScript只知道该函数会返回 HTMLElement ，但并不知道它具体的类型：</p>
<p>TypeScript只允许类型断言转换为 更具体 或者 不太具体 的类型版本，此规则可防止不可能的强制转换：</p>
<figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> el = <span class="built_in">document</span>.getElementById(<span class="string">&quot;hqz&quot;</span>) <span class="keyword">as</span> HTMLImageElement</span><br><span class="line">el.src = <span class="string">&quot;&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//类型断言用的比较多的地方：把相对宽泛的类型转换为具体点的类型</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">studying</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">11</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sayHello</span>(<span class="params">p: Person</span>) </span>&#123;</span><br><span class="line">  (p <span class="keyword">as</span> Student).studying()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu = <span class="keyword">new</span> Student()</span><br><span class="line">sayHello(stu)</span><br><span class="line"></span><br><span class="line"><span class="comment">//最好不要这么用 可能会造成类型混乱</span></span><br><span class="line"><span class="keyword">const</span> message = <span class="string">&quot;hqz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> num: <span class="built_in">number</span> = (message <span class="keyword">as</span> <span class="built_in">any</span>) <span class="keyword">as</span> <span class="built_in">number</span></span><br></pre></td></tr></table></figure>



<h4 id="非空类型断言"><a href="#非空类型断言" class="headerlink" title="非空类型断言"></a>非空类型断言</h4><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//因为message是可选类型的，就是可不传，所以message: undefine|string </span></span><br><span class="line"><span class="comment">//但是 console.log(message.length)的话如果没有传就是undefine.length这样明显是不行的</span></span><br><span class="line"><span class="comment">//所以message!:string 加上!的意思就是，可以保证message肯定是有值得，不是空的</span></span><br><span class="line"><span class="keyword">const</span> PrintMessageLength = <span class="function"><span class="keyword">function</span> (<span class="params">message?: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(message!.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">PrintMessageLength(<span class="string">&quot;hello&quot;</span>)</span><br><span class="line"><span class="comment">// PrintMessageLength()</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="可选链的使用"><a href="#可选链的使用" class="headerlink" title="可选链的使用"></a>可选链的使用</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">type</span> Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  friend?: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">    age?: <span class="built_in">number</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info: Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">friend</span>: &#123;</span><br><span class="line">    <span class="attr">name</span>: <span class="string">&quot;hly&quot;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(info.name);</span><br><span class="line"><span class="comment">// console.log(info.friend.name);</span></span><br><span class="line"><span class="built_in">console</span>.log(info.friend?.name);</span><br><span class="line"><span class="comment">//age可以是undefine 因为 object.undefine 允许 但是undefine.name就不行</span></span><br><span class="line"><span class="built_in">console</span>.log(info.friend?.age);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="运算符和字面量的一些使用"><a href="#运算符和字面量的一些使用" class="headerlink" title="??运算符和字面量的一些使用"></a>??运算符和字面量的一些使用</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//左边为null/undefine时返回右边，否则左边</span></span><br><span class="line"><span class="comment">//和||有点像但||大部分用在if判断里面 ||是左边可以为falsef返回右边这样，但是??如果左边为false就返回false</span></span><br><span class="line"><span class="keyword">const</span> n1 = <span class="literal">false</span></span><br><span class="line"><span class="keyword">const</span> n2 = n1 ?? <span class="string">&quot;hqz&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(n2);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//字面量类型</span></span><br><span class="line"><span class="keyword">let</span> n3: <span class="string">&quot;hqz&quot;</span> = <span class="string">&quot;hqz&quot;</span> <span class="comment">//这样写的意思是let的值必须的&quot;hqz&quot;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">//大多数情况下和联合类型一起用</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Align = <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span> | <span class="string">&#x27;center&#x27;</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">changeAlgin</span>(<span class="params">algin: Align</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">&quot;修改方向&quot;</span>, algin);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">changeAlgin(<span class="string">&#x27;center&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">//字面量推理</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">request</span>(<span class="params">name: <span class="built_in">string</span>, changName: persons</span>) </span>&#123; &#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person = &#123; <span class="attr">name</span>: <span class="built_in">string</span>, <span class="attr">changName</span>: persons &#125;</span><br><span class="line"><span class="keyword">type</span> persons = <span class="string">&#x27;GET&#x27;</span> | <span class="string">&#x27;POST&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 如果我没有:Person默认changeName，但是changeName接受参数要persons字面量类型，这时候加了,就代表changeName也是persons类型</span></span><br><span class="line"><span class="keyword">const</span> person: Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">changName</span>: <span class="string">&#x27;GET&#x27;</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//这种方法也行</span></span><br><span class="line"><span class="comment">// const person = &#123;</span></span><br><span class="line"><span class="comment">//   name: &quot;hqz&quot;,</span></span><br><span class="line"><span class="comment">//   changName: &#x27;GET&#x27;</span></span><br><span class="line"><span class="comment">// &#125; as const</span></span><br><span class="line"></span><br><span class="line">request(person.name, person.changName)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="类型缩小"><a href="#类型缩小" class="headerlink" title="类型缩小"></a>类型缩小</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//1.typeof的类型缩小</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> IDtype = <span class="built_in">number</span> | <span class="built_in">string</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">printID</span>(<span class="params">id: IDtype</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> id == <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    id.toLowerCase()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(id);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">printID(<span class="number">123</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.平等缩小</span></span><br><span class="line"><span class="keyword">type</span> Direction = <span class="string">&#x27;left&#x27;</span> | <span class="string">&#x27;right&#x27;</span> | <span class="string">&#x27;center&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">currentDirection</span>(<span class="params">direction: Direction</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">switch</span> (direction) &#123;</span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;center&#x27;</span>: <span class="built_in">console</span>.log(<span class="string">&quot;center&quot;</span>); <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;left&#x27;</span>: <span class="built_in">console</span>.log(<span class="string">&quot;left&quot;</span>); <span class="keyword">break</span></span><br><span class="line">    <span class="keyword">case</span> <span class="string">&#x27;right&#x27;</span>: <span class="built_in">console</span>.log(<span class="string">&quot;right&quot;</span>); <span class="keyword">break</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">currentDirection(<span class="string">&#x27;left&#x27;</span>)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 3.instanceof</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">studying</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;在学习&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Teacher</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">teaching</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;在教书&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">work</span>(<span class="params">p: Student | Teacher</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (p <span class="keyword">instanceof</span> Student) &#123;</span><br><span class="line">    p.studying()</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    p.teaching()</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> stu = <span class="keyword">new</span> Student()</span><br><span class="line">work(stu)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// 4.in</span></span><br><span class="line"><span class="keyword">type</span> Fish = &#123;</span><br><span class="line">  <span class="attr">swimming</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">type</span> Dog = &#123;</span><br><span class="line">  <span class="attr">running</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> fish: Fish = &#123;</span><br><span class="line">  <span class="function"><span class="title">swimming</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">walk</span>(<span class="params">animal: Fish | Dog</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="string">&quot;swimming&quot;</span> <span class="keyword">in</span> animal) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;是鱼&quot;</span>);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="built_in">console</span>.log(<span class="string">&quot;有狗&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">walk(fish)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h2 id="函数"><a href="#函数" class="headerlink" title="函数"></a>函数</h2><h3 id="函数的类型"><a href="#函数的类型" class="headerlink" title="函数的类型"></a>函数的类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.函数作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">type</span> FooFnType = <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">fn: FooFnType</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">11</span>);</span><br><span class="line">&#125;</span><br><span class="line">bar(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.定义常量时，编写函数类型</span></span><br><span class="line"><span class="keyword">type</span> AddFnType = <span class="function">(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="函数的剩余参数"><a href="#函数的剩余参数" class="headerlink" title="函数的剩余参数"></a>函数的剩余参数</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 1.函数作为参数</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">foo</span>(<span class="params"></span>) </span>&#123; &#125;</span><br><span class="line"><span class="keyword">type</span> FooFnType = <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">bar</span>(<span class="params">fn: FooFnType</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="number">11</span>);</span><br><span class="line">&#125;</span><br><span class="line">bar(foo)</span><br><span class="line"></span><br><span class="line"><span class="comment">// 2.定义常量时，编写函数类型</span></span><br><span class="line"><span class="keyword">type</span> AddFnType = <span class="function">(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>) =&gt;</span> <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>): <span class="title">number</span> </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">sum(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="this问题"><a href="#this问题" class="headerlink" title="this问题"></a>this问题</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">// const info1 = &#123;</span></span><br><span class="line"><span class="comment">//   name: &quot;hqz&quot;,</span></span><br><span class="line"><span class="comment">//   sayHello() &#123;</span></span><br><span class="line"><span class="comment">//     console.log(this.name);</span></span><br><span class="line"><span class="comment">//   &#125;</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"><span class="comment">// info1.sayHello()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">// function add() &#123;</span></span><br><span class="line"><span class="comment">//   console.log(this.num);</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// const sum = &#123;</span></span><br><span class="line"><span class="comment">//   num: 1,</span></span><br><span class="line"><span class="comment">//   add</span></span><br><span class="line"><span class="comment">// &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// add()</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> ThisType = &#123; <span class="attr">name</span>: <span class="built_in">number</span> &#125;;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">eating</span>(<span class="params"><span class="built_in">this</span>: ThisType, message: <span class="built_in">string</span></span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot; eating&quot;</span>, message);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="number">123</span>,</span><br><span class="line">  <span class="attr">eating</span>: eating,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 隐式绑定</span></span><br><span class="line">info.eating(<span class="string">&quot;哈哈哈&quot;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="函数的重载"><a href="#函数的重载" class="headerlink" title="函数的重载"></a>函数的重载</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//如果联合函数有不同类型 需要很多if判断 这时候还得函数重载好用</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">sum</span>(<span class="params">n1: <span class="built_in">string</span> | <span class="built_in">number</span>, n2: <span class="built_in">string</span> | <span class="built_in">number</span></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (<span class="keyword">typeof</span> n1 == <span class="string">&quot;string&quot;</span> &amp;&amp; <span class="keyword">typeof</span> n2 == <span class="string">&quot;string&quot;</span>) &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(n1 + n2);</span><br><span class="line">  &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="keyword">typeof</span> n1 == <span class="string">&quot;number&quot;</span> &amp;&amp; <span class="keyword">typeof</span> n2 == <span class="string">&quot;number&quot;</span>) <span class="built_in">console</span>.log(n1 + n2);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//函数重载,这样看上去方便很多</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n1: <span class="built_in">string</span>, n2: <span class="built_in">string</span></span>): <span class="title">string</span></span></span><br><span class="line"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>): <span class="title">number</span></span></span></span><br><span class="line"><span class="function"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">add</span>(<span class="params">n1: <span class="built_in">any</span>, n2: <span class="built_in">any</span></span>): <span class="title">any</span> </span>&#123;//如果不是上面两种，这个不会被调用</span></span></span><br><span class="line"><span class="function"><span class="function">  <span class="title">return</span> <span class="title">n1</span> + <span class="title">n2</span></span></span></span><br><span class="line"><span class="function"><span class="function">&#125;</span></span></span><br><span class="line"><span class="function"><span class="function"></span></span></span><br><span class="line"><span class="function"><span class="function"><span class="title">console</span>.<span class="title">log</span>(<span class="params">add(<span class="string">&quot;123&quot;</span>, <span class="string">&quot;123&quot;</span>), add(<span class="number">1</span>, <span class="number">2</span>)</span>)</span>;</span></span><br><span class="line"><span class="function"></span></span><br><span class="line"><span class="function">//也不是都一直用重载函数</span></span><br><span class="line"><span class="function"><span class="function"><span class="keyword">function</span> <span class="title">getLength</span>(<span class="params">n1: <span class="built_in">string</span> | <span class="built_in">any</span>[]</span>) </span>&#123;</span></span><br><span class="line"><span class="function">  <span class="title">return</span> <span class="title">n1</span>.<span class="title">length</span></span></span><br><span class="line"><span class="function">&#125;</span></span><br><span class="line"><span class="function"><span class="title">console</span>.<span class="title">log</span>(<span class="params">getLength(<span class="string">&quot;hello&quot;</span>)</span>)</span>;</span><br><span class="line"><span class="built_in">console</span>.log(getLength([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>]));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h2 id="类"><a href="#类" class="headerlink" title="类"></a>类</h2><h3 id="类的普通定义"><a href="#类的普通定义" class="headerlink" title="类的普通定义"></a>类的普通定义</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span>, age: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.age = age</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">studying</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="built_in">this</span>.name + <span class="string">&quot;正在学习&quot;</span>);</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu = <span class="keyword">new</span> Student(<span class="string">&quot;hqz&quot;</span>, <span class="number">18</span>)</span><br><span class="line"><span class="built_in">console</span>.log(stu.name);</span><br><span class="line">stu.studying()</span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="类的继承与多态"><a href="#类的继承与多态" class="headerlink" title="类的继承与多态"></a>类的继承与多态</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//继承</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Penson</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&quot;hqz&quot;</span></span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span> = <span class="number">18</span></span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;行动:&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Stuent</span> <span class="keyword">extends</span> <span class="title">Penson</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>.action()</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我走路&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu = <span class="keyword">new</span> Stuent()</span><br><span class="line"><span class="built_in">console</span>.log(stu.name);</span><br><span class="line">stu.action()</span><br><span class="line"></span><br><span class="line"><span class="comment">//多态</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;行动&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Fish</span> <span class="keyword">extends</span> <span class="title">animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;游泳&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Dog</span> <span class="keyword">extends</span> <span class="title">animal</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;跑&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Action</span>(<span class="params">Animal: animal[]</span>) </span>&#123;</span><br><span class="line">  Animal.forEach(<span class="function"><span class="params">animal</span> =&gt;</span> &#123;</span><br><span class="line">    animal.action()</span><br><span class="line">  &#125;)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Action([<span class="keyword">new</span> Dog(), <span class="keyword">new</span> Fish()])</span><br></pre></td></tr></table></figure>



<h3 id="只读属性readonly"><a href="#只读属性readonly" class="headerlink" title="只读属性readonly"></a>只读属性readonly</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">readonly</span> name: <span class="built_in">string</span></span><br><span class="line">  <span class="keyword">readonly</span> friend?: Person</span><br><span class="line">  age?: <span class="built_in">number</span> = <span class="number">19</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span>, friend?: Person</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = name</span><br><span class="line">    <span class="built_in">this</span>.friend = friend</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> P = <span class="keyword">new</span> Person(<span class="string">&quot;hqz&quot;</span>, <span class="keyword">new</span> Person(<span class="string">&quot;kobe&quot;</span>))</span><br><span class="line"></span><br><span class="line"><span class="comment">// P.name = &quot;ss&quot;//只读不行</span></span><br><span class="line"><span class="comment">// 但是</span></span><br><span class="line"><span class="keyword">if</span> (P.friend) &#123;</span><br><span class="line">  P.friend.age = <span class="number">20</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="类的getter-setter"><a href="#类的getter-setter" class="headerlink" title="类的getter/setter"></a>类的getter/setter</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> _name: <span class="built_in">string</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">name: <span class="built_in">string</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>._name = name</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">// 访问器setter/getter</span></span><br><span class="line">  <span class="comment">// setter</span></span><br><span class="line">  <span class="keyword">set</span> <span class="title">name</span>(<span class="params">newName</span>) &#123;</span><br><span class="line">    <span class="built_in">this</span>._name = newName</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// getter</span></span><br><span class="line">  <span class="keyword">get</span> <span class="title">name</span>() &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>._name</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p = <span class="keyword">new</span> Person(<span class="string">&quot;why&quot;</span>)</span><br><span class="line">p.name = <span class="string">&quot;coderwhy&quot;</span></span><br><span class="line"><span class="built_in">console</span>.log(p.name)</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="静态成员"><a href="#静态成员" class="headerlink" title="静态成员"></a>静态成员</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="keyword">static</span> name1: <span class="built_in">string</span> = <span class="string">&quot;hqz&quot;</span></span><br><span class="line">  <span class="keyword">static</span> <span class="function"><span class="title">action</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="number">11</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line">Person.name1 = <span class="string">&quot;kobe&quot;</span></span><br><span class="line">Person.action()</span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="抽象类"><a href="#抽象类" class="headerlink" title="抽象类"></a>抽象类</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">AreaCompute</span>(<span class="params">shape: Shape</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span> shape.getArea()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">abstract</span> <span class="class"><span class="keyword">class</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">abstract</span> getArea(): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Rectangle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> length: <span class="built_in">number</span></span><br><span class="line">  <span class="keyword">private</span> width: <span class="built_in">number</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">length: <span class="built_in">number</span>, width: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">    <span class="built_in">this</span>.length = length</span><br><span class="line">    <span class="built_in">this</span>.width = width</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getArea</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.length * <span class="built_in">this</span>.width</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Circle</span> <span class="keyword">extends</span> <span class="title">Shape</span> </span>&#123;</span><br><span class="line">  <span class="keyword">private</span> r: <span class="built_in">number</span></span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">r: <span class="built_in">number</span></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">super</span>()</span><br><span class="line">    <span class="built_in">this</span>.r = r</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">getArea</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">3.14</span> * <span class="built_in">this</span>.r * <span class="built_in">this</span>.r</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> n1 = <span class="keyword">new</span> Rectangle(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> n2 = <span class="keyword">new</span> Circle(<span class="number">2</span>)</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(AreaCompute(n1));</span><br><span class="line"><span class="built_in">console</span>.log(AreaCompute(n2));</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="类的类型"><a href="#类的类型" class="headerlink" title="类的类型"></a>类的类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> </span>&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span> = <span class="string">&quot;hqz&quot;</span></span><br><span class="line">  <span class="function"><span class="title">walk</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;人走路&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> p1: Person = <span class="keyword">new</span> Person()</span><br><span class="line"><span class="comment">//对象作类型，参数要与上面Person一致</span></span><br><span class="line"><span class="keyword">const</span> p2: Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hly&quot;</span>,</span><br><span class="line">  <span class="attr">walk</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;走贼快&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h2 id="接口"><a href="#接口" class="headerlink" title="接口"></a>接口</h2><h3 id="声明接口对象类型"><a href="#声明接口对象类型" class="headerlink" title="声明接口对象类型"></a>声明接口对象类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// type Info = &#123; name: string, changeInfo: () =&gt; void &#125;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Info &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">changeInfo</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> info: Info = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">changeInfo</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.name = <span class="string">&quot;hly&quot;</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(info.name);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="索引类型"><a href="#索引类型" class="headerlink" title="索引类型"></a>索引类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> FrontLanguate &#123;</span><br><span class="line">  [index: <span class="built_in">number</span>]: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">const</span> frontend: FrontLanguate = &#123;</span><br><span class="line">  <span class="number">1</span>: <span class="string">&quot;HTML&quot;</span>,</span><br><span class="line">  <span class="number">2</span>: <span class="string">&quot;CSS&quot;</span>,</span><br><span class="line">  <span class="number">3</span>: <span class="string">&quot;JavaScript&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> LanguageBirth &#123;</span><br><span class="line">  [name: <span class="built_in">string</span>]: <span class="built_in">number</span></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> language: LanguageBirth = &#123;</span><br><span class="line">  <span class="string">&quot;java&quot;</span>: <span class="number">1995</span>,</span><br><span class="line">  <span class="string">&quot;javaScript&quot;</span>: <span class="number">1996</span>,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<h3 id="函数类型"><a href="#函数类型" class="headerlink" title="函数类型"></a>函数类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> CalcFun &#123;</span><br><span class="line">  (num1: <span class="built_in">number</span>, <span class="attr">num2</span>: <span class="built_in">number</span>): <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="comment">//推荐用类型别名定义函数</span></span><br><span class="line"><span class="keyword">const</span> add: CalcFun = <span class="function">(<span class="params">n1: <span class="built_in">number</span>, n2: <span class="built_in">number</span></span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">return</span> n1 + n2</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="接口的继承"><a href="#接口的继承" class="headerlink" title="接口的继承"></a>接口的继承</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">eating</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> animal &#123;</span><br><span class="line">  <span class="attr">running</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//接口可以多继承 类不行</span></span><br><span class="line"><span class="keyword">interface</span> Student <span class="keyword">extends</span> Person, animal &#123;</span><br><span class="line">  <span class="attr">sno</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu: Student = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">sno</span>: <span class="number">11</span>,</span><br><span class="line">  <span class="function"><span class="title">eating</span>(<span class="params"></span>)</span> &#123; &#125;,</span><br><span class="line">  <span class="function"><span class="title">running</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="交叉类型"><a href="#交叉类型" class="headerlink" title="交叉类型"></a>交叉类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="comment">//在开发中，我们进行交叉时，通常是对对象类型进行交叉的：</span></span><br><span class="line"><span class="keyword">interface</span> Student &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> Teacher &#123;</span><br><span class="line">  <span class="attr">studying</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person = Student &amp; Teacher</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> stu: Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="function"><span class="title">studying</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="接口的实现"><a href="#接口的实现" class="headerlink" title="接口的实现"></a>接口的实现</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> ISwim &#123;</span><br><span class="line">  <span class="attr">swimming</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">interface</span> IRun &#123;</span><br><span class="line">  <span class="attr">run</span>: <span class="function">() =&gt;</span> <span class="built_in">void</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Person</span> <span class="title">implements</span> <span class="title">ISwim</span>, <span class="title">IRun</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="title">swimming</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;人在游泳&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="function"><span class="title">run</span>(<span class="params"></span>)</span> &#123; &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">swim</span>(<span class="params">p: ISwim</span>) </span>&#123;</span><br><span class="line">  p.swimming()</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">swim(<span class="keyword">new</span> Person())</span><br><span class="line">swim(&#123;</span><br><span class="line">  <span class="attr">swimming</span>: <span class="function">() =&gt;</span> &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(<span class="string">&quot;我也在游泳&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h3 id="字面量的赋值"><a href="#字面量的赋值" class="headerlink" title="字面量的赋值"></a>字面量的赋值</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">const</span> info = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">1.88</span>,</span><br><span class="line">  <span class="attr">address</span>: <span class="string">&quot;xxx&quot;</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Person &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="built_in">number</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//freshness</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">person</span>(<span class="params">p: Person</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log();</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">person(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">18</span>,</span><br><span class="line">  <span class="attr">height</span>: <span class="number">1.88</span>,</span><br><span class="line">  <span class="comment">// address: &quot;xxx&quot;//这样子传，这里会过不了类型检测那一关</span></span><br><span class="line">&#125;)</span><br><span class="line">person(info)<span class="comment">//这样可以传，但是在里面拿不到address</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> &#123; &#125;</span><br></pre></td></tr></table></figure>



<h3 id="枚举类型"><a href="#枚举类型" class="headerlink" title="枚举类型"></a>枚举类型</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">enum</span> Direction &#123;</span><br><span class="line">  LEFT,<span class="comment">//可以给里面的赋值，默认0123</span></span><br><span class="line">  RIGHT,</span><br><span class="line">  TOP,</span><br><span class="line">  BUTTON</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">type</span> Person = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="built_in">string</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">direction</span>(<span class="params">direction: Direction</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(direction);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">direction(Direction.BUTTON)</span><br></pre></td></tr></table></figure>



<h2 id="泛型"><a href="#泛型" class="headerlink" title="泛型"></a>泛型</h2><h3 id="泛型参数化"><a href="#泛型参数化" class="headerlink" title="泛型参数化"></a>泛型参数化</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//  平时在开发中我们可能会看到一些常用的名称：</span></span><br><span class="line"><span class="comment">// T：Type的缩写，类型</span></span><br><span class="line"><span class="comment">// K、V：key和value的缩写，键值对</span></span><br><span class="line"><span class="comment">// E：Element的缩写，元素</span></span><br><span class="line"><span class="comment">// O：Object的缩写，对象</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Add</span>&lt;<span class="title">T</span>, <span class="title">O</span>&gt;(<span class="params">arg1: T, arg2: O, ...arg3: T[]</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">return</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">Add&lt;<span class="built_in">number</span>, <span class="built_in">Object</span>&gt;(<span class="number">1</span>, &#123; <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span> &#125;, <span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>)</span><br><span class="line"><span class="comment">// Add(1, &#123; name: &quot;hqz&quot; &#125;, 1, 2, 3)//不写&lt;&gt;会默认类型推导</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<h3 id="泛型接口"><a href="#泛型接口" class="headerlink" title="泛型接口"></a>泛型接口</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">interface</span> Person&lt;T = string, N = number&gt; &#123;<span class="comment">//可以加默认类型</span></span><br><span class="line">  <span class="attr">name</span>: T</span><br><span class="line">  <span class="attr">age</span>: N</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">//这里不会进行类型推导，要加&lt;&gt;</span></span><br><span class="line"><span class="keyword">const</span> p: Person&lt;<span class="built_in">string</span>, <span class="built_in">number</span>&gt; = &#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqzz&quot;</span>,</span><br><span class="line">  <span class="attr">age</span>: <span class="number">12</span></span><br><span class="line">&#125;</span><br><span class="line"><span class="keyword">export</span>&#123;&#125;</span><br></pre></td></tr></table></figure>



<h3 id="泛型类"><a href="#泛型类" class="headerlink" title="泛型类"></a>泛型类</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">Point</span>&lt;<span class="title">T</span>&gt;</span>&#123;</span><br><span class="line">  <span class="attr">x</span>: T</span><br><span class="line">  <span class="attr">y</span>: T</span><br><span class="line">  <span class="function"><span class="title">constructor</span>(<span class="params">x: T, y: T</span>)</span> &#123;</span><br><span class="line">    <span class="built_in">this</span>.x = x</span><br><span class="line">    <span class="built_in">this</span>.y = y</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> ponit = <span class="keyword">new</span> Point(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> ponit1 = <span class="keyword">new</span> Point&lt;<span class="built_in">number</span>&gt;(<span class="number">1</span>, <span class="number">2</span>)</span><br><span class="line"><span class="keyword">const</span> point3: Point&lt;<span class="built_in">string</span>&gt; = <span class="keyword">new</span> Point(<span class="string">&quot;123&quot;</span>, <span class="string">&quot;234&quot;</span>)</span><br><span class="line"><span class="keyword">const</span> point2: <span class="built_in">Array</span>&lt;<span class="built_in">string</span>&gt; = [<span class="string">&quot;123&quot;</span>]</span><br></pre></td></tr></table></figure>



<h3 id="泛型约束"><a href="#泛型约束" class="headerlink" title="泛型约束"></a>泛型约束</h3><figure class="highlight typescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">interface</span> Ilength &#123;</span><br><span class="line">  <span class="attr">length</span>: <span class="built_in">number</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getLength</span>&lt;<span class="title">T</span> <span class="title">extends</span> <span class="title">Ilength</span>&gt;(<span class="params">p: T</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">console</span>.log(p.length);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">getLength(<span class="string">&quot;123&quot;</span>)</span><br><span class="line">getLength([<span class="number">1</span>, <span class="number">2</span>, <span class="number">3</span>])</span><br><span class="line">getLength(&#123;</span><br><span class="line">  <span class="attr">name</span>: <span class="string">&quot;hqz&quot;</span>,</span><br><span class="line">  <span class="attr">length</span>: <span class="number">1</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>



<h2 id="类型的查找"><a href="#类型的查找" class="headerlink" title="类型的查找"></a>类型的查找</h2><p>之前我们所有的typescript中的类型，几乎都是我们自己编写的，但是我们也有用到一些其他的类型： </p>
<p>大家是否会奇怪，我们的HTMLImageElement类型来自哪里呢？甚至是document为什么可以有getElementById的方法呢？</p>
<p>其实这里就涉及到typescript对类型的管理和查找规则了。</p>
<p>我们这里先给大家介绍另外的一种typescript文件：.d.ts文件</p>
<p>我们之前编写的typescript文件都是 .ts 文件，这些文件最终会输出 .js 文件，也是我们通常编写代码的地方；</p>
<p>还有另外一种文件 .d.ts 文件，它是用来做类型的声明(declare)。 它仅仅用来做类型检测，告知typescript我们有哪些类型；那么typescript会在哪里查找我们的类型声明呢？</p>
<p>内置类型声明；</p>
<p>外部定义类型声明；</p>
<p>自己定义类型声明；</p>
<h3 id="内置类型声明"><a href="#内置类型声明" class="headerlink" title="内置类型声明"></a>内置类型声明</h3><p>内置类型声明是typescript自带的、帮助我们内置了JavaScript运行时的一些标准化API的声明文件；</p>
<p>包括比如Math、Date等内置类型，也包括DOM API，比如Window、Document等；</p>
<p>内置类型声明通常在我们安装typescript的环境中会带有的；</p>
<p><a target="_blank" rel="noopener" href="https://github.com/microsoft/TypeScript/tree/main/lib">https://github.com/microsoft/TypeScript/tree/main/lib</a></p>
<h3 id="外部定义类型声明和自定义声明"><a href="#外部定义类型声明和自定义声明" class="headerlink" title="外部定义类型声明和自定义声明"></a>外部定义类型声明和自定义声明</h3><p>外部类型声明通常是我们使用一些库（比如第三方库）时，需要的一些类型声明。</p>
<p><strong>这些库通常有两种类型声明方式：</strong></p>
<p>方式一：在自己库中进行类型声明（编写.d.ts文件），比如axios</p>
<p>方式二：通过社区的一个公有库DefinitelyTyped存放类型声明文件 </p>
<p>该库的GitHub地址：<a target="_blank" rel="noopener" href="https://github.com/DefinitelyTyped/DefinitelyTyped/">https://github.com/DefinitelyTyped/DefinitelyTyped/</a></p>
<p>该库查找声明安装方式的地址：<a target="_blank" rel="noopener" href="https://www.typescriptlang.org/dt/search?search=">https://www.typescriptlang.org/dt/search?search=</a> </p>
<p>比如我们安装react的类型声明： npm i @types/react –save-dev</p>
<p>什么情况下需要自己来定义声明文件呢？</p>
<p>情况一：我们使用的第三方库是一个纯的JavaScript库，没有对应的声明文件；比如lodash</p>
<p>情况二：我们给自己的代码中声明一些类型，方便在其他地方直接进行使用；</p>

    </div>

    
    
    

      <footer class="post-footer">
          <div class="post-tags">
              <a href="/tags/vue/" rel="tag"># vue</a>
          </div>

        


        
    <div class="post-nav">
      <div class="post-nav-item">
    <a href="/2021/09/16/js%E4%B9%8B%E7%BB%A7%E6%89%BF/" rel="prev" title="js之继承">
      <i class="fa fa-chevron-left"></i> js之继承
    </a></div>
      <div class="post-nav-item"></div>
    </div>
      </footer>
    
  </article>
  
  
  



          </div>
          

<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      let activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      let commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>

        </div>
          
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line toggle-line-first"></span>
    <span class="toggle-line toggle-line-middle"></span>
    <span class="toggle-line toggle-line-last"></span>
  </div>

  <aside class="sidebar">
    <div class="sidebar-inner">

      <ul class="sidebar-nav motion-element">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <!--noindex-->
      <div class="post-toc-wrap sidebar-panel">
          <div class="post-toc motion-element"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue%E5%88%9D%E4%BD%93%E9%AA%8C"><span class="nav-number">1.</span> <span class="nav-text">Vue初体验</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8vue"><span class="nav-number">1.1.</span> <span class="nav-text">如何使用vue</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vue%E7%9A%84%E5%BC%95%E5%85%A5%E6%A1%88%E4%BE%8B%EF%BC%88%E8%AE%A1%E6%95%B0%E5%99%A8%EF%BC%89"><span class="nav-number">1.1.1.</span> <span class="nav-text">vue的引入案例（计数器）</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#MVVM%E6%A8%A1%E5%9E%8B"><span class="nav-number">1.2.</span> <span class="nav-text">MVVM模型</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#template%E7%9A%84%E5%86%99%E6%B3%95%EF%BC%88%E8%AE%A1%E6%95%B0%E5%99%A8%E6%A1%88%E4%BE%8B%EF%BC%89"><span class="nav-number">1.3.</span> <span class="nav-text">template的写法（计数器案例）</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#data%E5%B1%9E%E6%80%A7"><span class="nav-number">1.4.</span> <span class="nav-text">data属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#methods%E5%B1%9E%E6%80%A7"><span class="nav-number">1.5.</span> <span class="nav-text">methods属性</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this%E7%9A%84%E6%8C%87%E5%90%91%E9%97%AE%E9%A2%98"><span class="nav-number">1.6.</span> <span class="nav-text">this的指向问题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#this%E7%9A%84%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="nav-number">1.7.</span> <span class="nav-text">this的面试题</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vscode%E7%94%9F%E6%88%90%E4%BB%A3%E7%A0%81%E7%89%87%E6%AE%B5"><span class="nav-number">1.8.</span> <span class="nav-text">vscode生成代码片段</span></a></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95"><span class="nav-number">2.</span> <span class="nav-text">基础语法</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#mustache%E8%AF%AD%E6%B3%95"><span class="nav-number">2.1.</span> <span class="nav-text">mustache语法</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-once%E6%8C%87%E4%BB%A4"><span class="nav-number">2.2.</span> <span class="nav-text">v-once指令</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-html"><span class="nav-number">2.3.</span> <span class="nav-text">v-html</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-pre"><span class="nav-number">2.4.</span> <span class="nav-text">v-pre</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-bind"><span class="nav-number">2.5.</span> <span class="nav-text">v-bind</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%91%E5%AE%9Astyle%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%95%B0%E7%BB%84%E5%86%99%E6%B3%95"><span class="nav-number">2.5.1.</span> <span class="nav-text">绑定style对象与数组写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%BB%91%E5%AE%9Aclass%E5%AF%B9%E8%B1%A1%E4%B8%8E%E6%95%B0%E7%BB%84%E5%86%99%E6%B3%95"><span class="nav-number">2.5.2.</span> <span class="nav-text">绑定class对象与数组写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-bind%E5%8A%A8%E6%80%81%E7%BB%91%E5%AE%9A%E5%B1%9E%E6%80%A7%E5%92%8C%E4%B8%80%E4%B8%AA%E5%AF%B9%E8%B1%A1"><span class="nav-number">2.5.3.</span> <span class="nav-text">v-bind动态绑定属性和一个对象</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-on%E7%BB%91%E5%AE%9A%E4%BA%8B%E4%BB%B6"><span class="nav-number">2.6.</span> <span class="nav-text">v-on绑定事件</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E7%9B%91%E5%90%AC%E4%BA%8B%E4%BB%B6%E5%86%99%E6%B3%95"><span class="nav-number">2.6.1.</span> <span class="nav-text">监听事件写法</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-on%E5%8F%82%E6%95%B0%E4%BC%A0%E9%80%92"><span class="nav-number">2.6.2.</span> <span class="nav-text">v-on参数传递</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-on%E7%9A%84%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">2.6.3.</span> <span class="nav-text">v-on的修饰符</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%9D%A1%E4%BB%B6%E6%B8%B2%E6%9F%93%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">2.7.</span> <span class="nav-text">条件渲染的基本使用</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#template%E4%B8%8Ev-if%E4%B8%80%E8%B5%B7%E4%BD%BF%E7%94%A8"><span class="nav-number">2.7.1.</span> <span class="nav-text">template与v-if一起使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-if%E4%B8%8Ev-show%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">2.7.2.</span> <span class="nav-text">v-if与v-show的区别</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%97%E8%A1%A8%E6%B8%B2%E6%9F%93-v-for"><span class="nav-number">2.8.</span> <span class="nav-text">列表渲染(v-for)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#v-for%E5%92%8Ctemplate"><span class="nav-number">2.8.1.</span> <span class="nav-text">v-for和template</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%95%B0%E7%BB%84%E7%9A%84%E6%9B%B4%E6%96%B0%E6%A3%80%E6%B5%8B"><span class="nav-number">2.8.2.</span> <span class="nav-text">数组的更新检测</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#VNode%E7%9A%84%E6%A6%82%E5%BF%B5"><span class="nav-number">2.8.3.</span> <span class="nav-text">VNode的概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%99%9A%E6%8B%9FDOM-%E5%85%88%E4%B8%8D%E8%80%83%E8%99%91%E7%BB%84%E4%BB%B6"><span class="nav-number">2.8.4.</span> <span class="nav-text">虚拟DOM(先不考虑组件)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#key%E6%A1%88%E4%BE%8B%E6%8F%92%E5%85%A5F%E5%85%83%E7%B4%A0"><span class="nav-number">2.8.5.</span> <span class="nav-text">key案例插入F元素</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#Vue3%E7%9A%84options-API"><span class="nav-number">3.</span> <span class="nav-text">Vue3的options-API</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7computed"><span class="nav-number">3.1.</span> <span class="nav-text">计算属性computed</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#methods%E4%B8%8Ecomputed%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="nav-number">3.1.1.</span> <span class="nav-text">methods与computed的区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%AE%A1%E7%AE%97%E5%B1%9E%E6%80%A7%E7%9A%84setter%E5%92%8Cgetter"><span class="nav-number">3.1.2.</span> <span class="nav-text">计算属性的setter和getter</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8watch"><span class="nav-number">3.2.</span> <span class="nav-text">侦听器watch</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="nav-number">3.2.1.</span> <span class="nav-text">侦听器的基本使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#computed%E5%92%8Cwatch%E6%9C%89%E4%BB%80%E4%B9%88%E5%8C%BA%E5%88%AB"><span class="nav-number">3.2.2.</span> <span class="nav-text">computed和watch有什么区别</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8watch%E7%9A%84%E9%85%8D%E7%BD%AE%E9%80%89%E9%A1%B9"><span class="nav-number">3.2.3.</span> <span class="nav-text">侦听器watch的配置选项</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E4%BE%A6%E5%90%AC%E5%99%A8%E7%9A%84%E5%85%B6%E4%BB%96%E6%96%B9%E5%BC%8F"><span class="nav-number">3.2.4.</span> <span class="nav-text">侦听器的其他方式</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BC%95%E7%94%A8-%E6%B5%85%E6%8B%B7%E8%B4%9D-%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="nav-number">3.3.</span> <span class="nav-text">对象的引用-浅拷贝-深拷贝</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#v-model"><span class="nav-number">3.4.</span> <span class="nav-text">v-model</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#v-model%E5%8E%9F%E7%90%86"><span class="nav-number">3.4.1.</span> <span class="nav-text">v-model原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-model%E7%BB%91%E5%AE%9A%E5%85%B6%E4%BB%96%E8%A1%A8%E5%8D%95"><span class="nav-number">3.4.2.</span> <span class="nav-text">v-model绑定其他表单</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#v-model%E4%BF%AE%E9%A5%B0%E7%AC%A6%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">3.4.3.</span> <span class="nav-text">v-model修饰符的使用</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#lazy%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">3.4.3.1.</span> <span class="nav-text">lazy修饰符</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#number%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">3.4.4.</span> <span class="nav-text">number修饰符</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#trim%E4%BF%AE%E9%A5%B0%E7%AC%A6"><span class="nav-number">3.4.5.</span> <span class="nav-text">trim修饰符</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E5%BC%80%E5%8F%91-%E4%BA%86%E8%A7%A3"><span class="nav-number">4.</span> <span class="nav-text">组件化开发(了解)</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%BB%84%E4%BB%B6%E5%8C%96%E6%80%9D%E6%83%B3"><span class="nav-number">4.1.</span> <span class="nav-text">组件化思想</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%B3%A8%E5%86%8C%E7%BB%84%E4%BB%B6%E7%9A%84%E6%96%B9%E5%BC%8F"><span class="nav-number">4.2.</span> <span class="nav-text">注册组件的方式</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E6%B3%A8%E5%86%8C"><span class="nav-number">4.2.1.</span> <span class="nav-text">全局注册</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%80%E9%83%A8%E6%B3%A8%E5%86%8C"><span class="nav-number">4.2.2.</span> <span class="nav-text">局部注册</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#webpack"><span class="nav-number">5.</span> <span class="nav-text">webpack</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">5.1.</span> <span class="nav-text">webpack是什么</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue%E5%8A%A0%E8%BD%BD%E6%96%87%E4%BB%B6%E6%9C%89%E5%93%AA%E4%BA%9B"><span class="nav-number">5.2.</span> <span class="nav-text">vue加载文件有哪些</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E4%BD%BF%E7%94%A8%E5%89%8D%E6%8F%90"><span class="nav-number">5.3.</span> <span class="nav-text">webpack使用前提</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E7%9A%84%E5%AE%89%E8%A3%85"><span class="nav-number">5.4.</span> <span class="nav-text">webpack的安装</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80webpck"><span class="nav-number">5.4.1.</span> <span class="nav-text">全局webpck</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%80%E9%83%A8webpack%E5%AE%89%E8%A3%85"><span class="nav-number">5.4.2.</span> <span class="nav-text">局部webpack安装</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#webpack%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">5.4.3.</span> <span class="nav-text">webpack配置文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E4%BE%9D%E8%B5%96%E5%9B%BE"><span class="nav-number">5.5.</span> <span class="nav-text">webpack依赖图</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#loader%E7%9A%84%E9%85%8D%E7%BD%AE%E6%96%B9%E5%BC%8F"><span class="nav-number">5.6.</span> <span class="nav-text">loader的配置方式</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E5%AF%B9css%E7%9A%84%E6%89%93%E5%8C%85"><span class="nav-number">5.7.</span> <span class="nav-text">webpack对css的打包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#css-loader"><span class="nav-number">5.7.1.</span> <span class="nav-text">css-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#style-loader"><span class="nav-number">5.7.2.</span> <span class="nav-text">style-loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpak%E5%AF%B9less%E6%96%87%E4%BB%B6%E7%9A%84%E6%89%93%E5%8C%85"><span class="nav-number">5.8.</span> <span class="nav-text">webpak对less文件的打包</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#postcss%E5%B7%A5%E5%85%B7"><span class="nav-number">5.9.</span> <span class="nav-text">postcss工具</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%89%93%E5%8C%85%E5%85%B6%E4%BB%96%E8%B5%84%E6%BA%90"><span class="nav-number">5.10.</span> <span class="nav-text">webpack打包其他资源</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#file-loader"><span class="nav-number">5.10.1.</span> <span class="nav-text">file-loader</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#url-loader"><span class="nav-number">5.10.2.</span> <span class="nav-text">url-loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#asset-module-type-webpack5"><span class="nav-number">5.11.</span> <span class="nav-text">asset module type(webpack5)</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%8A%A0%E8%BD%BD%E5%AD%97%E4%BD%93%E6%96%87%E4%BB%B6"><span class="nav-number">5.11.1.</span> <span class="nav-text">加载字体文件</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#webpack%E6%8F%92%E4%BB%B6Plugin"><span class="nav-number">5.12.</span> <span class="nav-text">webpack插件Plugin</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Plugin"><span class="nav-number">5.12.1.</span> <span class="nav-text">Plugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CleanWebpackPlugin"><span class="nav-number">5.12.2.</span> <span class="nav-text">CleanWebpackPlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#HtmlWebpackPlugin"><span class="nav-number">5.12.3.</span> <span class="nav-text">HtmlWebpackPlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89HTML%E6%A8%A1%E6%9D%BF"><span class="nav-number">5.12.4.</span> <span class="nav-text">自定义HTML模板</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#CopyWebpackPlugin"><span class="nav-number">5.12.5.</span> <span class="nav-text">CopyWebpackPlugin</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Mode%E9%85%8D%E7%BD%AE"><span class="nav-number">5.12.6.</span> <span class="nav-text">Mode配置</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#Babel"><span class="nav-number">5.13.</span> <span class="nav-text">Babel</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Babel%E6%98%AF%E4%BB%80%E4%B9%88"><span class="nav-number">5.13.1.</span> <span class="nav-text">Babel是什么</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Babel%E5%9C%A8%E5%91%BD%E4%BB%A4%E8%A1%8C%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="nav-number">5.13.2.</span> <span class="nav-text">Babel在命令行的使用</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Babel%E7%9A%84%E9%A2%84%E8%AE%BEpreset"><span class="nav-number">5.13.3.</span> <span class="nav-text">Babel的预设preset</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#babel%E7%BC%96%E8%AF%91%E5%99%A8%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="nav-number">5.13.4.</span> <span class="nav-text">babel编译器执行原理</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#babel-loader"><span class="nav-number">5.13.5.</span> <span class="nav-text">babel-loader</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#vue%E6%BA%90%E7%A0%81%E7%9A%84%E6%89%93%E5%8C%85"><span class="nav-number">5.14.</span> <span class="nav-text">vue源码的打包</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#vue%E6%89%93%E5%8C%85%E5%90%8E%E4%B8%8D%E5%90%8C%E7%89%88%E6%9C%AC%E7%9A%84%E8%A7%A3%E6%9E%90"><span class="nav-number">5.14.1.</span> <span class="nav-text">vue打包后不同版本的解析</span></a></li></ol></li></ol></li></ol></div>
      </div>
      <!--/noindex-->

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">zhige</p>
  <div class="site-description" itemprop="description">记录、分享</div>
</div>
<div class="site-state-wrap motion-element">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">17</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">5</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">4</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>



      </div>

    </div>
  </aside>
  <div id="sidebar-dimmer"></div>


      </div>
    </main>

    <footer class="footer">
      <div class="footer-inner">
        

        

<div class="copyright">
  
  &copy; 
  <span itemprop="copyrightYear">2021</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zhige</span>
</div>
  <div class="powered-by">由 <a href="https://hexo.io/" class="theme-link" rel="noopener" target="_blank">Hexo</a> & <a href="https://theme-next.org/" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> 强力驱动
  </div>

        








      </div>
    </footer>
  </div>

  
  <script src="/lib/anime.min.js"></script>
  <script src="/lib/velocity/velocity.min.js"></script>
  <script src="/lib/velocity/velocity.ui.min.js"></script>

<script src="/js/utils.js"></script>

<script src="/js/motion.js"></script>


<script src="/js/schemes/pisces.js"></script>


<script src="/js/next-boot.js"></script>




  















  

  

</body>
</html>
